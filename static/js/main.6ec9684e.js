/*! For license information please see main.6ec9684e.js.LICENSE.txt */
(()=>{var e={763:function(e,t,n){var r;e=n.nmd(e),function(){var i,s="Expected a function",o="__lodash_hash_undefined__",a="__lodash_placeholder__",l=16,c=32,u=64,h=128,d=256,f=1/0,p=9007199254740991,g=NaN,m=4294967295,v=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",l],["flip",512],["partial",c],["partialRight",u],["rearg",d]],y="[object Arguments]",_="[object Array]",w="[object Boolean]",b="[object Date]",E="[object Error]",k="[object Function]",S="[object GeneratorFunction]",T="[object Map]",C="[object Number]",A="[object Object]",x="[object Promise]",I="[object RegExp]",N="[object Set]",P="[object String]",R="[object Symbol]",D="[object WeakMap]",O="[object ArrayBuffer]",L="[object DataView]",M="[object Float32Array]",j="[object Float64Array]",U="[object Int8Array]",F="[object Int16Array]",z="[object Int32Array]",V="[object Uint8Array]",B="[object Uint8ClampedArray]",q="[object Uint16Array]",W="[object Uint32Array]",H=/\b__p \+= '';/g,K=/\b(__p \+=) '' \+/g,G=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Q=/&(?:amp|lt|gt|quot|#39);/g,X=/[&<>"']/g,Y=RegExp(Q.source),J=RegExp(X.source),Z=/<%-([\s\S]+?)%>/g,$=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/[\\^$.*+?()[\]{}|]/g,se=RegExp(ie.source),oe=/^\s+/,ae=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ce=/\{\n\/\* \[wrapped with (.+)\] \*/,ue=/,? & /,he=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,de=/[()=,{}\[\]\/\s]/,fe=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ge=/\w*$/,me=/^[-+]0x[0-9a-f]+$/i,ve=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,_e=/^0o[0-7]+$/i,we=/^(?:0|[1-9]\d*)$/,be=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ee=/($^)/,ke=/['\n\r\u2028\u2029\\]/g,Se="\\ud800-\\udfff",Te="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ce="\\u2700-\\u27bf",Ae="a-z\\xdf-\\xf6\\xf8-\\xff",xe="A-Z\\xc0-\\xd6\\xd8-\\xde",Ie="\\ufe0e\\ufe0f",Ne="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Pe="['\u2019]",Re="["+Se+"]",De="["+Ne+"]",Oe="["+Te+"]",Le="\\d+",Me="["+Ce+"]",je="["+Ae+"]",Ue="[^"+Se+Ne+Le+Ce+Ae+xe+"]",Fe="\\ud83c[\\udffb-\\udfff]",ze="[^"+Se+"]",Ve="(?:\\ud83c[\\udde6-\\uddff]){2}",Be="[\\ud800-\\udbff][\\udc00-\\udfff]",qe="["+xe+"]",We="\\u200d",He="(?:"+je+"|"+Ue+")",Ke="(?:"+qe+"|"+Ue+")",Ge="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Qe="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Xe="(?:"+Oe+"|"+Fe+")"+"?",Ye="["+Ie+"]?",Je=Ye+Xe+("(?:"+We+"(?:"+[ze,Ve,Be].join("|")+")"+Ye+Xe+")*"),Ze="(?:"+[Me,Ve,Be].join("|")+")"+Je,$e="(?:"+[ze+Oe+"?",Oe,Ve,Be,Re].join("|")+")",et=RegExp(Pe,"g"),tt=RegExp(Oe,"g"),nt=RegExp(Fe+"(?="+Fe+")|"+$e+Je,"g"),rt=RegExp([qe+"?"+je+"+"+Ge+"(?="+[De,qe,"$"].join("|")+")",Ke+"+"+Qe+"(?="+[De,qe+He,"$"].join("|")+")",qe+"?"+He+"+"+Ge,qe+"+"+Qe,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Le,Ze].join("|"),"g"),it=RegExp("["+We+Se+Te+Ie+"]"),st=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ot=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],at=-1,lt={};lt[M]=lt[j]=lt[U]=lt[F]=lt[z]=lt[V]=lt[B]=lt[q]=lt[W]=!0,lt[y]=lt[_]=lt[O]=lt[w]=lt[L]=lt[b]=lt[E]=lt[k]=lt[T]=lt[C]=lt[A]=lt[I]=lt[N]=lt[P]=lt[D]=!1;var ct={};ct[y]=ct[_]=ct[O]=ct[L]=ct[w]=ct[b]=ct[M]=ct[j]=ct[U]=ct[F]=ct[z]=ct[T]=ct[C]=ct[A]=ct[I]=ct[N]=ct[P]=ct[R]=ct[V]=ct[B]=ct[q]=ct[W]=!0,ct[E]=ct[k]=ct[D]=!1;var ut={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ht=parseFloat,dt=parseInt,ft="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,pt="object"==typeof self&&self&&self.Object===Object&&self,gt=ft||pt||Function("return this")(),mt=t&&!t.nodeType&&t,vt=mt&&e&&!e.nodeType&&e,yt=vt&&vt.exports===mt,_t=yt&&ft.process,wt=function(){try{var e=vt&&vt.require&&vt.require("util").types;return e||_t&&_t.binding&&_t.binding("util")}catch(t){}}(),bt=wt&&wt.isArrayBuffer,Et=wt&&wt.isDate,kt=wt&&wt.isMap,St=wt&&wt.isRegExp,Tt=wt&&wt.isSet,Ct=wt&&wt.isTypedArray;function At(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function xt(e,t,n,r){for(var i=-1,s=null==e?0:e.length;++i<s;){var o=e[i];t(r,o,n(o),e)}return r}function It(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Nt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Pt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Rt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,s=[];++n<r;){var o=e[n];t(o,n,e)&&(s[i++]=o)}return s}function Dt(e,t){return!!(null==e?0:e.length)&&qt(e,t,0)>-1}function Ot(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Lt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Mt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function jt(e,t,n,r){var i=-1,s=null==e?0:e.length;for(r&&s&&(n=e[++i]);++i<s;)n=t(n,e[i],i,e);return n}function Ut(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Ft(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var zt=Gt("length");function Vt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Bt(e,t,n,r){for(var i=e.length,s=n+(r?1:-1);r?s--:++s<i;)if(t(e[s],s,e))return s;return-1}function qt(e,t,n){return t===t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Bt(e,Ht,n)}function Wt(e,t,n,r){for(var i=n-1,s=e.length;++i<s;)if(r(e[i],t))return i;return-1}function Ht(e){return e!==e}function Kt(e,t){var n=null==e?0:e.length;return n?Yt(e,t)/n:g}function Gt(e){return function(t){return null==t?i:t[e]}}function Qt(e){return function(t){return null==e?i:e[t]}}function Xt(e,t,n,r,i){return i(e,(function(e,i,s){n=r?(r=!1,e):t(n,e,i,s)})),n}function Yt(e,t){for(var n,r=-1,s=e.length;++r<s;){var o=t(e[r]);o!==i&&(n=n===i?o:n+o)}return n}function Jt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Zt(e){return e?e.slice(0,mn(e)+1).replace(oe,""):e}function $t(e){return function(t){return e(t)}}function en(e,t){return Lt(t,(function(t){return e[t]}))}function tn(e,t){return e.has(t)}function nn(e,t){for(var n=-1,r=e.length;++n<r&&qt(t,e[n],0)>-1;);return n}function rn(e,t){for(var n=e.length;n--&&qt(t,e[n],0)>-1;);return n}var sn=Qt({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),on=Qt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function an(e){return"\\"+ut[e]}function ln(e){return it.test(e)}function cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function un(e,t){return function(n){return e(t(n))}}function hn(e,t){for(var n=-1,r=e.length,i=0,s=[];++n<r;){var o=e[n];o!==t&&o!==a||(e[n]=a,s[i++]=n)}return s}function dn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function fn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function pn(e){return ln(e)?function(e){var t=nt.lastIndex=0;for(;nt.test(e);)++t;return t}(e):zt(e)}function gn(e){return ln(e)?function(e){return e.match(nt)||[]}(e):function(e){return e.split("")}(e)}function mn(e){for(var t=e.length;t--&&ae.test(e.charAt(t)););return t}var vn=Qt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var yn=function e(t){var n=(t=null==t?gt:yn.defaults(gt.Object(),t,yn.pick(gt,ot))).Array,r=t.Date,ae=t.Error,Se=t.Function,Te=t.Math,Ce=t.Object,Ae=t.RegExp,xe=t.String,Ie=t.TypeError,Ne=n.prototype,Pe=Se.prototype,Re=Ce.prototype,De=t["__core-js_shared__"],Oe=Pe.toString,Le=Re.hasOwnProperty,Me=0,je=function(){var e=/[^.]+$/.exec(De&&De.keys&&De.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ue=Re.toString,Fe=Oe.call(Ce),ze=gt._,Ve=Ae("^"+Oe.call(Le).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Be=yt?t.Buffer:i,qe=t.Symbol,We=t.Uint8Array,He=Be?Be.allocUnsafe:i,Ke=un(Ce.getPrototypeOf,Ce),Ge=Ce.create,Qe=Re.propertyIsEnumerable,Xe=Ne.splice,Ye=qe?qe.isConcatSpreadable:i,Je=qe?qe.iterator:i,Ze=qe?qe.toStringTag:i,$e=function(){try{var e=hs(Ce,"defineProperty");return e({},"",{}),e}catch(t){}}(),nt=t.clearTimeout!==gt.clearTimeout&&t.clearTimeout,it=r&&r.now!==gt.Date.now&&r.now,ut=t.setTimeout!==gt.setTimeout&&t.setTimeout,ft=Te.ceil,pt=Te.floor,mt=Ce.getOwnPropertySymbols,vt=Be?Be.isBuffer:i,_t=t.isFinite,wt=Ne.join,zt=un(Ce.keys,Ce),Qt=Te.max,_n=Te.min,wn=r.now,bn=t.parseInt,En=Te.random,kn=Ne.reverse,Sn=hs(t,"DataView"),Tn=hs(t,"Map"),Cn=hs(t,"Promise"),An=hs(t,"Set"),xn=hs(t,"WeakMap"),In=hs(Ce,"create"),Nn=xn&&new xn,Pn={},Rn=js(Sn),Dn=js(Tn),On=js(Cn),Ln=js(An),Mn=js(xn),jn=qe?qe.prototype:i,Un=jn?jn.valueOf:i,Fn=jn?jn.toString:i;function zn(e){if(ta(e)&&!Wo(e)&&!(e instanceof Wn)){if(e instanceof qn)return e;if(Le.call(e,"__wrapped__"))return Us(e)}return new qn(e)}var Vn=function(){function e(){}return function(t){if(!ea(t))return{};if(Ge)return Ge(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function Bn(){}function qn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function Wn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=m,this.__views__=[]}function Hn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Kn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Qn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Gn;++t<n;)this.add(e[t])}function Xn(e){var t=this.__data__=new Kn(e);this.size=t.size}function Yn(e,t){var n=Wo(e),r=!n&&qo(e),i=!n&&!r&&Qo(e),s=!n&&!r&&!i&&ca(e),o=n||r||i||s,a=o?Jt(e.length,xe):[],l=a.length;for(var c in e)!t&&!Le.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ys(c,l))||a.push(c);return a}function Jn(e){var t=e.length;return t?e[Qr(0,t-1)]:i}function Zn(e,t){return Os(Ii(e),ar(t,0,e.length))}function $n(e){return Os(Ii(e))}function er(e,t,n){(n!==i&&!zo(e[t],n)||n===i&&!(t in e))&&sr(e,t,n)}function tr(e,t,n){var r=e[t];Le.call(e,t)&&zo(r,n)&&(n!==i||t in e)||sr(e,t,n)}function nr(e,t){for(var n=e.length;n--;)if(zo(e[n][0],t))return n;return-1}function rr(e,t,n,r){return dr(e,(function(e,i,s){t(r,e,n(e),s)})),r}function ir(e,t){return e&&Ni(t,Pa(t),e)}function sr(e,t,n){"__proto__"==t&&$e?$e(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function or(e,t){for(var r=-1,s=t.length,o=n(s),a=null==e;++r<s;)o[r]=a?i:Ca(e,t[r]);return o}function ar(e,t,n){return e===e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function lr(e,t,n,r,s,o){var a,l=1&t,c=2&t,u=4&t;if(n&&(a=s?n(e,r,s,o):n(e)),a!==i)return a;if(!ea(e))return e;var h=Wo(e);if(h){if(a=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Le.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!l)return Ii(e,a)}else{var d=ps(e),f=d==k||d==S;if(Qo(e))return ki(e,l);if(d==A||d==y||f&&!s){if(a=c||f?{}:ms(e),!l)return c?function(e,t){return Ni(e,fs(e),t)}(e,function(e,t){return e&&Ni(t,Ra(t),e)}(a,e)):function(e,t){return Ni(e,ds(e),t)}(e,ir(a,e))}else{if(!ct[d])return s?e:{};a=function(e,t,n){var r=e.constructor;switch(t){case O:return Si(e);case w:case b:return new r(+e);case L:return function(e,t){var n=t?Si(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case M:case j:case U:case F:case z:case V:case B:case q:case W:return Ti(e,n);case T:return new r;case C:case P:return new r(e);case I:return function(e){var t=new e.constructor(e.source,ge.exec(e));return t.lastIndex=e.lastIndex,t}(e);case N:return new r;case R:return i=e,Un?Ce(Un.call(i)):{}}var i}(e,d,l)}}o||(o=new Xn);var p=o.get(e);if(p)return p;o.set(e,a),oa(e)?e.forEach((function(r){a.add(lr(r,t,n,r,e,o))})):na(e)&&e.forEach((function(r,i){a.set(i,lr(r,t,n,i,e,o))}));var g=h?i:(u?c?is:rs:c?Ra:Pa)(e);return It(g||e,(function(r,i){g&&(r=e[i=r]),tr(a,i,lr(r,t,n,i,e,o))})),a}function cr(e,t,n){var r=n.length;if(null==e)return!r;for(e=Ce(e);r--;){var s=n[r],o=t[s],a=e[s];if(a===i&&!(s in e)||!o(a))return!1}return!0}function ur(e,t,n){if("function"!=typeof e)throw new Ie(s);return Ns((function(){e.apply(i,n)}),t)}function hr(e,t,n,r){var i=-1,s=Dt,o=!0,a=e.length,l=[],c=t.length;if(!a)return l;n&&(t=Lt(t,$t(n))),r?(s=Ot,o=!1):t.length>=200&&(s=tn,o=!1,t=new Qn(t));e:for(;++i<a;){var u=e[i],h=null==n?u:n(u);if(u=r||0!==u?u:0,o&&h===h){for(var d=c;d--;)if(t[d]===h)continue e;l.push(u)}else s(t,h,r)||l.push(u)}return l}zn.templateSettings={escape:Z,evaluate:$,interpolate:ee,variable:"",imports:{_:zn}},zn.prototype=Bn.prototype,zn.prototype.constructor=zn,qn.prototype=Vn(Bn.prototype),qn.prototype.constructor=qn,Wn.prototype=Vn(Bn.prototype),Wn.prototype.constructor=Wn,Hn.prototype.clear=function(){this.__data__=In?In(null):{},this.size=0},Hn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Hn.prototype.get=function(e){var t=this.__data__;if(In){var n=t[e];return n===o?i:n}return Le.call(t,e)?t[e]:i},Hn.prototype.has=function(e){var t=this.__data__;return In?t[e]!==i:Le.call(t,e)},Hn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=In&&t===i?o:t,this},Kn.prototype.clear=function(){this.__data__=[],this.size=0},Kn.prototype.delete=function(e){var t=this.__data__,n=nr(t,e);return!(n<0)&&(n==t.length-1?t.pop():Xe.call(t,n,1),--this.size,!0)},Kn.prototype.get=function(e){var t=this.__data__,n=nr(t,e);return n<0?i:t[n][1]},Kn.prototype.has=function(e){return nr(this.__data__,e)>-1},Kn.prototype.set=function(e,t){var n=this.__data__,r=nr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Gn.prototype.clear=function(){this.size=0,this.__data__={hash:new Hn,map:new(Tn||Kn),string:new Hn}},Gn.prototype.delete=function(e){var t=cs(this,e).delete(e);return this.size-=t?1:0,t},Gn.prototype.get=function(e){return cs(this,e).get(e)},Gn.prototype.has=function(e){return cs(this,e).has(e)},Gn.prototype.set=function(e,t){var n=cs(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Qn.prototype.add=Qn.prototype.push=function(e){return this.__data__.set(e,o),this},Qn.prototype.has=function(e){return this.__data__.has(e)},Xn.prototype.clear=function(){this.__data__=new Kn,this.size=0},Xn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Xn.prototype.get=function(e){return this.__data__.get(e)},Xn.prototype.has=function(e){return this.__data__.has(e)},Xn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Kn){var r=n.__data__;if(!Tn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Gn(r)}return n.set(e,t),this.size=n.size,this};var dr=Di(wr),fr=Di(br,!0);function pr(e,t){var n=!0;return dr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function gr(e,t,n){for(var r=-1,s=e.length;++r<s;){var o=e[r],a=t(o);if(null!=a&&(l===i?a===a&&!la(a):n(a,l)))var l=a,c=o}return c}function mr(e,t){var n=[];return dr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function vr(e,t,n,r,i){var s=-1,o=e.length;for(n||(n=vs),i||(i=[]);++s<o;){var a=e[s];t>0&&n(a)?t>1?vr(a,t-1,n,r,i):Mt(i,a):r||(i[i.length]=a)}return i}var yr=Oi(),_r=Oi(!0);function wr(e,t){return e&&yr(e,t,Pa)}function br(e,t){return e&&_r(e,t,Pa)}function Er(e,t){return Rt(t,(function(t){return Jo(e[t])}))}function kr(e,t){for(var n=0,r=(t=_i(t,e)).length;null!=e&&n<r;)e=e[Ms(t[n++])];return n&&n==r?e:i}function Sr(e,t,n){var r=t(e);return Wo(e)?r:Mt(r,n(e))}function Tr(e){return null==e?e===i?"[object Undefined]":"[object Null]":Ze&&Ze in Ce(e)?function(e){var t=Le.call(e,Ze),n=e[Ze];try{e[Ze]=i;var r=!0}catch(o){}var s=Ue.call(e);r&&(t?e[Ze]=n:delete e[Ze]);return s}(e):function(e){return Ue.call(e)}(e)}function Cr(e,t){return e>t}function Ar(e,t){return null!=e&&Le.call(e,t)}function xr(e,t){return null!=e&&t in Ce(e)}function Ir(e,t,r){for(var s=r?Ot:Dt,o=e[0].length,a=e.length,l=a,c=n(a),u=1/0,h=[];l--;){var d=e[l];l&&t&&(d=Lt(d,$t(t))),u=_n(d.length,u),c[l]=!r&&(t||o>=120&&d.length>=120)?new Qn(l&&d):i}d=e[0];var f=-1,p=c[0];e:for(;++f<o&&h.length<u;){var g=d[f],m=t?t(g):g;if(g=r||0!==g?g:0,!(p?tn(p,m):s(h,m,r))){for(l=a;--l;){var v=c[l];if(!(v?tn(v,m):s(e[l],m,r)))continue e}p&&p.push(m),h.push(g)}}return h}function Nr(e,t,n){var r=null==(e=As(e,t=_i(t,e)))?e:e[Ms(Xs(t))];return null==r?i:At(r,e,n)}function Pr(e){return ta(e)&&Tr(e)==y}function Rr(e,t,n,r,s){return e===t||(null==e||null==t||!ta(e)&&!ta(t)?e!==e&&t!==t:function(e,t,n,r,s,o){var a=Wo(e),l=Wo(t),c=a?_:ps(e),u=l?_:ps(t),h=(c=c==y?A:c)==A,d=(u=u==y?A:u)==A,f=c==u;if(f&&Qo(e)){if(!Qo(t))return!1;a=!0,h=!1}if(f&&!h)return o||(o=new Xn),a||ca(e)?ts(e,t,n,r,s,o):function(e,t,n,r,i,s,o){switch(n){case L:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case O:return!(e.byteLength!=t.byteLength||!s(new We(e),new We(t)));case w:case b:case C:return zo(+e,+t);case E:return e.name==t.name&&e.message==t.message;case I:case P:return e==t+"";case T:var a=cn;case N:var l=1&r;if(a||(a=dn),e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;r|=2,o.set(e,t);var u=ts(a(e),a(t),r,i,s,o);return o.delete(e),u;case R:if(Un)return Un.call(e)==Un.call(t)}return!1}(e,t,c,n,r,s,o);if(!(1&n)){var p=h&&Le.call(e,"__wrapped__"),g=d&&Le.call(t,"__wrapped__");if(p||g){var m=p?e.value():e,v=g?t.value():t;return o||(o=new Xn),s(m,v,n,r,o)}}if(!f)return!1;return o||(o=new Xn),function(e,t,n,r,s,o){var a=1&n,l=rs(e),c=l.length,u=rs(t),h=u.length;if(c!=h&&!a)return!1;var d=c;for(;d--;){var f=l[d];if(!(a?f in t:Le.call(t,f)))return!1}var p=o.get(e),g=o.get(t);if(p&&g)return p==t&&g==e;var m=!0;o.set(e,t),o.set(t,e);var v=a;for(;++d<c;){var y=e[f=l[d]],_=t[f];if(r)var w=a?r(_,y,f,t,e,o):r(y,_,f,e,t,o);if(!(w===i?y===_||s(y,_,n,r,o):w)){m=!1;break}v||(v="constructor"==f)}if(m&&!v){var b=e.constructor,E=t.constructor;b==E||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof E&&E instanceof E||(m=!1)}return o.delete(e),o.delete(t),m}(e,t,n,r,s,o)}(e,t,n,r,Rr,s))}function Dr(e,t,n,r){var s=n.length,o=s,a=!r;if(null==e)return!o;for(e=Ce(e);s--;){var l=n[s];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<o;){var c=(l=n[s])[0],u=e[c],h=l[1];if(a&&l[2]){if(u===i&&!(c in e))return!1}else{var d=new Xn;if(r)var f=r(u,h,c,e,t,d);if(!(f===i?Rr(h,u,3,r,d):f))return!1}}return!0}function Or(e){return!(!ea(e)||(t=e,je&&je in t))&&(Jo(e)?Ve:ye).test(js(e));var t}function Lr(e){return"function"==typeof e?e:null==e?rl:"object"==typeof e?Wo(e)?Vr(e[0],e[1]):zr(e):dl(e)}function Mr(e){if(!ks(e))return zt(e);var t=[];for(var n in Ce(e))Le.call(e,n)&&"constructor"!=n&&t.push(n);return t}function jr(e){if(!ea(e))return function(e){var t=[];if(null!=e)for(var n in Ce(e))t.push(n);return t}(e);var t=ks(e),n=[];for(var r in e)("constructor"!=r||!t&&Le.call(e,r))&&n.push(r);return n}function Ur(e,t){return e<t}function Fr(e,t){var r=-1,i=Ko(e)?n(e.length):[];return dr(e,(function(e,n,s){i[++r]=t(e,n,s)})),i}function zr(e){var t=us(e);return 1==t.length&&t[0][2]?Ts(t[0][0],t[0][1]):function(n){return n===e||Dr(n,e,t)}}function Vr(e,t){return ws(e)&&Ss(t)?Ts(Ms(e),t):function(n){var r=Ca(n,e);return r===i&&r===t?Aa(n,e):Rr(t,r,3)}}function Br(e,t,n,r,s){e!==t&&yr(t,(function(o,a){if(s||(s=new Xn),ea(o))!function(e,t,n,r,s,o,a){var l=xs(e,n),c=xs(t,n),u=a.get(c);if(u)return void er(e,n,u);var h=o?o(l,c,n+"",e,t,a):i,d=h===i;if(d){var f=Wo(c),p=!f&&Qo(c),g=!f&&!p&&ca(c);h=c,f||p||g?Wo(l)?h=l:Go(l)?h=Ii(l):p?(d=!1,h=ki(c,!0)):g?(d=!1,h=Ti(c,!0)):h=[]:ia(c)||qo(c)?(h=l,qo(l)?h=va(l):ea(l)&&!Jo(l)||(h=ms(c))):d=!1}d&&(a.set(c,h),s(h,c,r,o,a),a.delete(c));er(e,n,h)}(e,t,a,n,Br,r,s);else{var l=r?r(xs(e,a),o,a+"",e,t,s):i;l===i&&(l=o),er(e,a,l)}}),Ra)}function qr(e,t){var n=e.length;if(n)return ys(t+=t<0?n:0,n)?e[t]:i}function Wr(e,t,n){t=t.length?Lt(t,(function(e){return Wo(e)?function(t){return kr(t,1===e.length?e[0]:e)}:e})):[rl];var r=-1;t=Lt(t,$t(ls()));var i=Fr(e,(function(e,n,i){var s=Lt(t,(function(t){return t(e)}));return{criteria:s,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,s=t.criteria,o=i.length,a=n.length;for(;++r<o;){var l=Ci(i[r],s[r]);if(l)return r>=a?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Hr(e,t,n){for(var r=-1,i=t.length,s={};++r<i;){var o=t[r],a=kr(e,o);n(a,o)&&$r(s,_i(o,e),a)}return s}function Kr(e,t,n,r){var i=r?Wt:qt,s=-1,o=t.length,a=e;for(e===t&&(t=Ii(t)),n&&(a=Lt(e,$t(n)));++s<o;)for(var l=0,c=t[s],u=n?n(c):c;(l=i(a,u,l,r))>-1;)a!==e&&Xe.call(a,l,1),Xe.call(e,l,1);return e}function Gr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==s){var s=i;ys(i)?Xe.call(e,i,1):hi(e,i)}}return e}function Qr(e,t){return e+pt(En()*(t-e+1))}function Xr(e,t){var n="";if(!e||t<1||t>p)return n;do{t%2&&(n+=e),(t=pt(t/2))&&(e+=e)}while(t);return n}function Yr(e,t){return Ps(Cs(e,t,rl),e+"")}function Jr(e){return Jn(za(e))}function Zr(e,t){var n=za(e);return Os(n,ar(t,0,n.length))}function $r(e,t,n,r){if(!ea(e))return e;for(var s=-1,o=(t=_i(t,e)).length,a=o-1,l=e;null!=l&&++s<o;){var c=Ms(t[s]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(s!=a){var h=l[c];(u=r?r(h,c,l):i)===i&&(u=ea(h)?h:ys(t[s+1])?[]:{})}tr(l,c,u),l=l[c]}return e}var ei=Nn?function(e,t){return Nn.set(e,t),e}:rl,ti=$e?function(e,t){return $e(e,"toString",{configurable:!0,enumerable:!1,value:el(t),writable:!0})}:rl;function ni(e){return Os(za(e))}function ri(e,t,r){var i=-1,s=e.length;t<0&&(t=-t>s?0:s+t),(r=r>s?s:r)<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var o=n(s);++i<s;)o[i]=e[i+t];return o}function ii(e,t){var n;return dr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function si(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=2147483647){for(;r<i;){var s=r+i>>>1,o=e[s];null!==o&&!la(o)&&(n?o<=t:o<t)?r=s+1:i=s}return i}return oi(e,t,rl,n)}function oi(e,t,n,r){var s=0,o=null==e?0:e.length;if(0===o)return 0;for(var a=(t=n(t))!==t,l=null===t,c=la(t),u=t===i;s<o;){var h=pt((s+o)/2),d=n(e[h]),f=d!==i,p=null===d,g=d===d,m=la(d);if(a)var v=r||g;else v=u?g&&(r||f):l?g&&f&&(r||!p):c?g&&f&&!p&&(r||!m):!p&&!m&&(r?d<=t:d<t);v?s=h+1:o=h}return _n(o,4294967294)}function ai(e,t){for(var n=-1,r=e.length,i=0,s=[];++n<r;){var o=e[n],a=t?t(o):o;if(!n||!zo(a,l)){var l=a;s[i++]=0===o?0:o}}return s}function li(e){return"number"==typeof e?e:la(e)?g:+e}function ci(e){if("string"==typeof e)return e;if(Wo(e))return Lt(e,ci)+"";if(la(e))return Fn?Fn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ui(e,t,n){var r=-1,i=Dt,s=e.length,o=!0,a=[],l=a;if(n)o=!1,i=Ot;else if(s>=200){var c=t?null:Xi(e);if(c)return dn(c);o=!1,i=tn,l=new Qn}else l=t?[]:a;e:for(;++r<s;){var u=e[r],h=t?t(u):u;if(u=n||0!==u?u:0,o&&h===h){for(var d=l.length;d--;)if(l[d]===h)continue e;t&&l.push(h),a.push(u)}else i(l,h,n)||(l!==a&&l.push(h),a.push(u))}return a}function hi(e,t){return null==(e=As(e,t=_i(t,e)))||delete e[Ms(Xs(t))]}function di(e,t,n,r){return $r(e,t,n(kr(e,t)),r)}function fi(e,t,n,r){for(var i=e.length,s=r?i:-1;(r?s--:++s<i)&&t(e[s],s,e););return n?ri(e,r?0:s,r?s+1:i):ri(e,r?s+1:0,r?i:s)}function pi(e,t){var n=e;return n instanceof Wn&&(n=n.value()),jt(t,(function(e,t){return t.func.apply(t.thisArg,Mt([e],t.args))}),n)}function gi(e,t,r){var i=e.length;if(i<2)return i?ui(e[0]):[];for(var s=-1,o=n(i);++s<i;)for(var a=e[s],l=-1;++l<i;)l!=s&&(o[s]=hr(o[s]||a,e[l],t,r));return ui(vr(o,1),t,r)}function mi(e,t,n){for(var r=-1,s=e.length,o=t.length,a={};++r<s;){var l=r<o?t[r]:i;n(a,e[r],l)}return a}function vi(e){return Go(e)?e:[]}function yi(e){return"function"==typeof e?e:rl}function _i(e,t){return Wo(e)?e:ws(e,t)?[e]:Ls(ya(e))}var wi=Yr;function bi(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:ri(e,t,n)}var Ei=nt||function(e){return gt.clearTimeout(e)};function ki(e,t){if(t)return e.slice();var n=e.length,r=He?He(n):new e.constructor(n);return e.copy(r),r}function Si(e){var t=new e.constructor(e.byteLength);return new We(t).set(new We(e)),t}function Ti(e,t){var n=t?Si(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ci(e,t){if(e!==t){var n=e!==i,r=null===e,s=e===e,o=la(e),a=t!==i,l=null===t,c=t===t,u=la(t);if(!l&&!u&&!o&&e>t||o&&a&&c&&!l&&!u||r&&a&&c||!n&&c||!s)return 1;if(!r&&!o&&!u&&e<t||u&&n&&s&&!r&&!o||l&&n&&s||!a&&s||!c)return-1}return 0}function Ai(e,t,r,i){for(var s=-1,o=e.length,a=r.length,l=-1,c=t.length,u=Qt(o-a,0),h=n(c+u),d=!i;++l<c;)h[l]=t[l];for(;++s<a;)(d||s<o)&&(h[r[s]]=e[s]);for(;u--;)h[l++]=e[s++];return h}function xi(e,t,r,i){for(var s=-1,o=e.length,a=-1,l=r.length,c=-1,u=t.length,h=Qt(o-l,0),d=n(h+u),f=!i;++s<h;)d[s]=e[s];for(var p=s;++c<u;)d[p+c]=t[c];for(;++a<l;)(f||s<o)&&(d[p+r[a]]=e[s++]);return d}function Ii(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function Ni(e,t,n,r){var s=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var l=t[o],c=r?r(n[l],e[l],l,n,e):i;c===i&&(c=e[l]),s?sr(n,l,c):tr(n,l,c)}return n}function Pi(e,t){return function(n,r){var i=Wo(n)?xt:rr,s=t?t():{};return i(n,e,ls(r,2),s)}}function Ri(e){return Yr((function(t,n){var r=-1,s=n.length,o=s>1?n[s-1]:i,a=s>2?n[2]:i;for(o=e.length>3&&"function"==typeof o?(s--,o):i,a&&_s(n[0],n[1],a)&&(o=s<3?i:o,s=1),t=Ce(t);++r<s;){var l=n[r];l&&e(t,l,r,o)}return t}))}function Di(e,t){return function(n,r){if(null==n)return n;if(!Ko(n))return e(n,r);for(var i=n.length,s=t?i:-1,o=Ce(n);(t?s--:++s<i)&&!1!==r(o[s],s,o););return n}}function Oi(e){return function(t,n,r){for(var i=-1,s=Ce(t),o=r(t),a=o.length;a--;){var l=o[e?a:++i];if(!1===n(s[l],l,s))break}return t}}function Li(e){return function(t){var n=ln(t=ya(t))?gn(t):i,r=n?n[0]:t.charAt(0),s=n?bi(n,1).join(""):t.slice(1);return r[e]()+s}}function Mi(e){return function(t){return jt(Ja(qa(t).replace(et,"")),e,"")}}function ji(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Vn(e.prototype),r=e.apply(n,t);return ea(r)?r:n}}function Ui(e){return function(t,n,r){var s=Ce(t);if(!Ko(t)){var o=ls(n,3);t=Pa(t),n=function(e){return o(s[e],e,s)}}var a=e(t,n,r);return a>-1?s[o?t[a]:a]:i}}function Fi(e){return ns((function(t){var n=t.length,r=n,o=qn.prototype.thru;for(e&&t.reverse();r--;){var a=t[r];if("function"!=typeof a)throw new Ie(s);if(o&&!l&&"wrapper"==os(a))var l=new qn([],!0)}for(r=l?r:n;++r<n;){var c=os(a=t[r]),u="wrapper"==c?ss(a):i;l=u&&bs(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?l[os(u[0])].apply(l,u[3]):1==a.length&&bs(a)?l[c]():l.thru(a)}return function(){var e=arguments,r=e[0];if(l&&1==e.length&&Wo(r))return l.plant(r).value();for(var i=0,s=n?t[i].apply(this,e):r;++i<n;)s=t[i].call(this,s);return s}}))}function zi(e,t,r,s,o,a,l,c,u,d){var f=t&h,p=1&t,g=2&t,m=24&t,v=512&t,y=g?i:ji(e);return function h(){for(var _=arguments.length,w=n(_),b=_;b--;)w[b]=arguments[b];if(m)var E=as(h),k=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(w,E);if(s&&(w=Ai(w,s,o,m)),a&&(w=xi(w,a,l,m)),_-=k,m&&_<d){var S=hn(w,E);return Gi(e,t,zi,h.placeholder,r,w,S,c,u,d-_)}var T=p?r:this,C=g?T[e]:e;return _=w.length,c?w=function(e,t){var n=e.length,r=_n(t.length,n),s=Ii(e);for(;r--;){var o=t[r];e[r]=ys(o,n)?s[o]:i}return e}(w,c):v&&_>1&&w.reverse(),f&&u<_&&(w.length=u),this&&this!==gt&&this instanceof h&&(C=y||ji(C)),C.apply(T,w)}}function Vi(e,t){return function(n,r){return function(e,t,n,r){return wr(e,(function(e,i,s){t(r,n(e),i,s)})),r}(n,e,t(r),{})}}function Bi(e,t){return function(n,r){var s;if(n===i&&r===i)return t;if(n!==i&&(s=n),r!==i){if(s===i)return r;"string"==typeof n||"string"==typeof r?(n=ci(n),r=ci(r)):(n=li(n),r=li(r)),s=e(n,r)}return s}}function qi(e){return ns((function(t){return t=Lt(t,$t(ls())),Yr((function(n){var r=this;return e(t,(function(e){return At(e,r,n)}))}))}))}function Wi(e,t){var n=(t=t===i?" ":ci(t)).length;if(n<2)return n?Xr(t,e):t;var r=Xr(t,ft(e/pn(t)));return ln(t)?bi(gn(r),0,e).join(""):r.slice(0,e)}function Hi(e){return function(t,r,s){return s&&"number"!=typeof s&&_s(t,r,s)&&(r=s=i),t=fa(t),r===i?(r=t,t=0):r=fa(r),function(e,t,r,i){for(var s=-1,o=Qt(ft((t-e)/(r||1)),0),a=n(o);o--;)a[i?o:++s]=e,e+=r;return a}(t,r,s=s===i?t<r?1:-1:fa(s),e)}}function Ki(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ma(t),n=ma(n)),e(t,n)}}function Gi(e,t,n,r,s,o,a,l,h,d){var f=8&t;t|=f?c:u,4&(t&=~(f?u:c))||(t&=-4);var p=[e,t,s,f?o:i,f?a:i,f?i:o,f?i:a,l,h,d],g=n.apply(i,p);return bs(e)&&Is(g,p),g.placeholder=r,Rs(g,e,t)}function Qi(e){var t=Te[e];return function(e,n){if(e=ma(e),(n=null==n?0:_n(pa(n),292))&&_t(e)){var r=(ya(e)+"e").split("e");return+((r=(ya(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Xi=An&&1/dn(new An([,-0]))[1]==f?function(e){return new An(e)}:ll;function Yi(e){return function(t){var n=ps(t);return n==T?cn(t):n==N?fn(t):function(e,t){return Lt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Ji(e,t,r,o,f,p,g,m){var v=2&t;if(!v&&"function"!=typeof e)throw new Ie(s);var y=o?o.length:0;if(y||(t&=-97,o=f=i),g=g===i?g:Qt(pa(g),0),m=m===i?m:pa(m),y-=f?f.length:0,t&u){var _=o,w=f;o=f=i}var b=v?i:ss(e),E=[e,t,r,o,f,_,w,p,g,m];if(b&&function(e,t){var n=e[1],r=t[1],i=n|r,s=i<131,o=r==h&&8==n||r==h&&n==d&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!s&&!o)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var l=t[3];if(l){var c=e[3];e[3]=c?Ai(c,l,t[4]):l,e[4]=c?hn(e[3],a):t[4]}(l=t[5])&&(c=e[5],e[5]=c?xi(c,l,t[6]):l,e[6]=c?hn(e[5],a):t[6]);(l=t[7])&&(e[7]=l);r&h&&(e[8]=null==e[8]?t[8]:_n(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(E,b),e=E[0],t=E[1],r=E[2],o=E[3],f=E[4],!(m=E[9]=E[9]===i?v?0:e.length:Qt(E[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)k=8==t||t==l?function(e,t,r){var s=ji(e);return function o(){for(var a=arguments.length,l=n(a),c=a,u=as(o);c--;)l[c]=arguments[c];var h=a<3&&l[0]!==u&&l[a-1]!==u?[]:hn(l,u);return(a-=h.length)<r?Gi(e,t,zi,o.placeholder,i,l,h,i,i,r-a):At(this&&this!==gt&&this instanceof o?s:e,this,l)}}(e,t,m):t!=c&&33!=t||f.length?zi.apply(i,E):function(e,t,r,i){var s=1&t,o=ji(e);return function t(){for(var a=-1,l=arguments.length,c=-1,u=i.length,h=n(u+l),d=this&&this!==gt&&this instanceof t?o:e;++c<u;)h[c]=i[c];for(;l--;)h[c++]=arguments[++a];return At(d,s?r:this,h)}}(e,t,r,o);else var k=function(e,t,n){var r=1&t,i=ji(e);return function t(){return(this&&this!==gt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,r);return Rs((b?ei:Is)(k,E),e,t)}function Zi(e,t,n,r){return e===i||zo(e,Re[n])&&!Le.call(r,n)?t:e}function $i(e,t,n,r,s,o){return ea(e)&&ea(t)&&(o.set(t,e),Br(e,t,i,$i,o),o.delete(t)),e}function es(e){return ia(e)?i:e}function ts(e,t,n,r,s,o){var a=1&n,l=e.length,c=t.length;if(l!=c&&!(a&&c>l))return!1;var u=o.get(e),h=o.get(t);if(u&&h)return u==t&&h==e;var d=-1,f=!0,p=2&n?new Qn:i;for(o.set(e,t),o.set(t,e);++d<l;){var g=e[d],m=t[d];if(r)var v=a?r(m,g,d,t,e,o):r(g,m,d,e,t,o);if(v!==i){if(v)continue;f=!1;break}if(p){if(!Ft(t,(function(e,t){if(!tn(p,t)&&(g===e||s(g,e,n,r,o)))return p.push(t)}))){f=!1;break}}else if(g!==m&&!s(g,m,n,r,o)){f=!1;break}}return o.delete(e),o.delete(t),f}function ns(e){return Ps(Cs(e,i,Ws),e+"")}function rs(e){return Sr(e,Pa,ds)}function is(e){return Sr(e,Ra,fs)}var ss=Nn?function(e){return Nn.get(e)}:ll;function os(e){for(var t=e.name+"",n=Pn[t],r=Le.call(Pn,t)?n.length:0;r--;){var i=n[r],s=i.func;if(null==s||s==e)return i.name}return t}function as(e){return(Le.call(zn,"placeholder")?zn:e).placeholder}function ls(){var e=zn.iteratee||il;return e=e===il?Lr:e,arguments.length?e(arguments[0],arguments[1]):e}function cs(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function us(e){for(var t=Pa(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Ss(i)]}return t}function hs(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return Or(n)?n:i}var ds=mt?function(e){return null==e?[]:(e=Ce(e),Rt(mt(e),(function(t){return Qe.call(e,t)})))}:gl,fs=mt?function(e){for(var t=[];e;)Mt(t,ds(e)),e=Ke(e);return t}:gl,ps=Tr;function gs(e,t,n){for(var r=-1,i=(t=_i(t,e)).length,s=!1;++r<i;){var o=Ms(t[r]);if(!(s=null!=e&&n(e,o)))break;e=e[o]}return s||++r!=i?s:!!(i=null==e?0:e.length)&&$o(i)&&ys(o,i)&&(Wo(e)||qo(e))}function ms(e){return"function"!=typeof e.constructor||ks(e)?{}:Vn(Ke(e))}function vs(e){return Wo(e)||qo(e)||!!(Ye&&e&&e[Ye])}function ys(e,t){var n=typeof e;return!!(t=null==t?p:t)&&("number"==n||"symbol"!=n&&we.test(e))&&e>-1&&e%1==0&&e<t}function _s(e,t,n){if(!ea(n))return!1;var r=typeof t;return!!("number"==r?Ko(n)&&ys(t,n.length):"string"==r&&t in n)&&zo(n[t],e)}function ws(e,t){if(Wo(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!la(e))||(ne.test(e)||!te.test(e)||null!=t&&e in Ce(t))}function bs(e){var t=os(e),n=zn[t];if("function"!=typeof n||!(t in Wn.prototype))return!1;if(e===n)return!0;var r=ss(n);return!!r&&e===r[0]}(Sn&&ps(new Sn(new ArrayBuffer(1)))!=L||Tn&&ps(new Tn)!=T||Cn&&ps(Cn.resolve())!=x||An&&ps(new An)!=N||xn&&ps(new xn)!=D)&&(ps=function(e){var t=Tr(e),n=t==A?e.constructor:i,r=n?js(n):"";if(r)switch(r){case Rn:return L;case Dn:return T;case On:return x;case Ln:return N;case Mn:return D}return t});var Es=De?Jo:ml;function ks(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Re)}function Ss(e){return e===e&&!ea(e)}function Ts(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==i||e in Ce(n)))}}function Cs(e,t,r){return t=Qt(t===i?e.length-1:t,0),function(){for(var i=arguments,s=-1,o=Qt(i.length-t,0),a=n(o);++s<o;)a[s]=i[t+s];s=-1;for(var l=n(t+1);++s<t;)l[s]=i[s];return l[t]=r(a),At(e,this,l)}}function As(e,t){return t.length<2?e:kr(e,ri(t,0,-1))}function xs(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Is=Ds(ei),Ns=ut||function(e,t){return gt.setTimeout(e,t)},Ps=Ds(ti);function Rs(e,t,n){var r=t+"";return Ps(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(le,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return It(v,(function(n){var r="_."+n[0];t&n[1]&&!Dt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ce);return t?t[1].split(ue):[]}(r),n)))}function Ds(e){var t=0,n=0;return function(){var r=wn(),s=16-(r-n);if(n=r,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Os(e,t){var n=-1,r=e.length,s=r-1;for(t=t===i?r:t;++n<t;){var o=Qr(n,s),a=e[o];e[o]=e[n],e[n]=a}return e.length=t,e}var Ls=function(e){var t=Oo(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,n,r,i){t.push(r?i.replace(fe,"$1"):n||e)})),t}));function Ms(e){if("string"==typeof e||la(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function js(e){if(null!=e){try{return Oe.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Us(e){if(e instanceof Wn)return e.clone();var t=new qn(e.__wrapped__,e.__chain__);return t.__actions__=Ii(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Fs=Yr((function(e,t){return Go(e)?hr(e,vr(t,1,Go,!0)):[]})),zs=Yr((function(e,t){var n=Xs(t);return Go(n)&&(n=i),Go(e)?hr(e,vr(t,1,Go,!0),ls(n,2)):[]})),Vs=Yr((function(e,t){var n=Xs(t);return Go(n)&&(n=i),Go(e)?hr(e,vr(t,1,Go,!0),i,n):[]}));function Bs(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:pa(n);return i<0&&(i=Qt(r+i,0)),Bt(e,ls(t,3),i)}function qs(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var s=r-1;return n!==i&&(s=pa(n),s=n<0?Qt(r+s,0):_n(s,r-1)),Bt(e,ls(t,3),s,!0)}function Ws(e){return(null==e?0:e.length)?vr(e,1):[]}function Hs(e){return e&&e.length?e[0]:i}var Ks=Yr((function(e){var t=Lt(e,vi);return t.length&&t[0]===e[0]?Ir(t):[]})),Gs=Yr((function(e){var t=Xs(e),n=Lt(e,vi);return t===Xs(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Ir(n,ls(t,2)):[]})),Qs=Yr((function(e){var t=Xs(e),n=Lt(e,vi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?Ir(n,i,t):[]}));function Xs(e){var t=null==e?0:e.length;return t?e[t-1]:i}var Ys=Yr(Js);function Js(e,t){return e&&e.length&&t&&t.length?Kr(e,t):e}var Zs=ns((function(e,t){var n=null==e?0:e.length,r=or(e,t);return Gr(e,Lt(t,(function(e){return ys(e,n)?+e:e})).sort(Ci)),r}));function $s(e){return null==e?e:kn.call(e)}var eo=Yr((function(e){return ui(vr(e,1,Go,!0))})),to=Yr((function(e){var t=Xs(e);return Go(t)&&(t=i),ui(vr(e,1,Go,!0),ls(t,2))})),no=Yr((function(e){var t=Xs(e);return t="function"==typeof t?t:i,ui(vr(e,1,Go,!0),i,t)}));function ro(e){if(!e||!e.length)return[];var t=0;return e=Rt(e,(function(e){if(Go(e))return t=Qt(e.length,t),!0})),Jt(t,(function(t){return Lt(e,Gt(t))}))}function io(e,t){if(!e||!e.length)return[];var n=ro(e);return null==t?n:Lt(n,(function(e){return At(t,i,e)}))}var so=Yr((function(e,t){return Go(e)?hr(e,t):[]})),oo=Yr((function(e){return gi(Rt(e,Go))})),ao=Yr((function(e){var t=Xs(e);return Go(t)&&(t=i),gi(Rt(e,Go),ls(t,2))})),lo=Yr((function(e){var t=Xs(e);return t="function"==typeof t?t:i,gi(Rt(e,Go),i,t)})),co=Yr(ro);var uo=Yr((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,io(e,n)}));function ho(e){var t=zn(e);return t.__chain__=!0,t}function fo(e,t){return t(e)}var po=ns((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,s=function(t){return or(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Wn&&ys(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:fo,args:[s],thisArg:i}),new qn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(s)}));var go=Pi((function(e,t,n){Le.call(e,n)?++e[n]:sr(e,n,1)}));var mo=Ui(Bs),vo=Ui(qs);function yo(e,t){return(Wo(e)?It:dr)(e,ls(t,3))}function _o(e,t){return(Wo(e)?Nt:fr)(e,ls(t,3))}var wo=Pi((function(e,t,n){Le.call(e,n)?e[n].push(t):sr(e,n,[t])}));var bo=Yr((function(e,t,r){var i=-1,s="function"==typeof t,o=Ko(e)?n(e.length):[];return dr(e,(function(e){o[++i]=s?At(t,e,r):Nr(e,t,r)})),o})),Eo=Pi((function(e,t,n){sr(e,n,t)}));function ko(e,t){return(Wo(e)?Lt:Fr)(e,ls(t,3))}var So=Pi((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var To=Yr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&_s(e,t[0],t[1])?t=[]:n>2&&_s(t[0],t[1],t[2])&&(t=[t[0]]),Wr(e,vr(t,1),[])})),Co=it||function(){return gt.Date.now()};function Ao(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Ji(e,h,i,i,i,i,t)}function xo(e,t){var n;if("function"!=typeof t)throw new Ie(s);return e=pa(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var Io=Yr((function(e,t,n){var r=1;if(n.length){var i=hn(n,as(Io));r|=c}return Ji(e,r,t,n,i)})),No=Yr((function(e,t,n){var r=3;if(n.length){var i=hn(n,as(No));r|=c}return Ji(t,r,e,n,i)}));function Po(e,t,n){var r,o,a,l,c,u,h=0,d=!1,f=!1,p=!0;if("function"!=typeof e)throw new Ie(s);function g(t){var n=r,s=o;return r=o=i,h=t,l=e.apply(s,n)}function m(e){var n=e-u;return u===i||n>=t||n<0||f&&e-h>=a}function v(){var e=Co();if(m(e))return y(e);c=Ns(v,function(e){var n=t-(e-u);return f?_n(n,a-(e-h)):n}(e))}function y(e){return c=i,p&&r?g(e):(r=o=i,l)}function _(){var e=Co(),n=m(e);if(r=arguments,o=this,u=e,n){if(c===i)return function(e){return h=e,c=Ns(v,t),d?g(e):l}(u);if(f)return Ei(c),c=Ns(v,t),g(u)}return c===i&&(c=Ns(v,t)),l}return t=ma(t)||0,ea(n)&&(d=!!n.leading,a=(f="maxWait"in n)?Qt(ma(n.maxWait)||0,t):a,p="trailing"in n?!!n.trailing:p),_.cancel=function(){c!==i&&Ei(c),h=0,r=u=o=c=i},_.flush=function(){return c===i?l:y(Co())},_}var Ro=Yr((function(e,t){return ur(e,1,t)})),Do=Yr((function(e,t,n){return ur(e,ma(t)||0,n)}));function Oo(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ie(s);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=e.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(Oo.Cache||Gn),n}function Lo(e){if("function"!=typeof e)throw new Ie(s);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Oo.Cache=Gn;var Mo=wi((function(e,t){var n=(t=1==t.length&&Wo(t[0])?Lt(t[0],$t(ls())):Lt(vr(t,1),$t(ls()))).length;return Yr((function(r){for(var i=-1,s=_n(r.length,n);++i<s;)r[i]=t[i].call(this,r[i]);return At(e,this,r)}))})),jo=Yr((function(e,t){var n=hn(t,as(jo));return Ji(e,c,i,t,n)})),Uo=Yr((function(e,t){var n=hn(t,as(Uo));return Ji(e,u,i,t,n)})),Fo=ns((function(e,t){return Ji(e,d,i,i,i,t)}));function zo(e,t){return e===t||e!==e&&t!==t}var Vo=Ki(Cr),Bo=Ki((function(e,t){return e>=t})),qo=Pr(function(){return arguments}())?Pr:function(e){return ta(e)&&Le.call(e,"callee")&&!Qe.call(e,"callee")},Wo=n.isArray,Ho=bt?$t(bt):function(e){return ta(e)&&Tr(e)==O};function Ko(e){return null!=e&&$o(e.length)&&!Jo(e)}function Go(e){return ta(e)&&Ko(e)}var Qo=vt||ml,Xo=Et?$t(Et):function(e){return ta(e)&&Tr(e)==b};function Yo(e){if(!ta(e))return!1;var t=Tr(e);return t==E||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!ia(e)}function Jo(e){if(!ea(e))return!1;var t=Tr(e);return t==k||t==S||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Zo(e){return"number"==typeof e&&e==pa(e)}function $o(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=p}function ea(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ta(e){return null!=e&&"object"==typeof e}var na=kt?$t(kt):function(e){return ta(e)&&ps(e)==T};function ra(e){return"number"==typeof e||ta(e)&&Tr(e)==C}function ia(e){if(!ta(e)||Tr(e)!=A)return!1;var t=Ke(e);if(null===t)return!0;var n=Le.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Oe.call(n)==Fe}var sa=St?$t(St):function(e){return ta(e)&&Tr(e)==I};var oa=Tt?$t(Tt):function(e){return ta(e)&&ps(e)==N};function aa(e){return"string"==typeof e||!Wo(e)&&ta(e)&&Tr(e)==P}function la(e){return"symbol"==typeof e||ta(e)&&Tr(e)==R}var ca=Ct?$t(Ct):function(e){return ta(e)&&$o(e.length)&&!!lt[Tr(e)]};var ua=Ki(Ur),ha=Ki((function(e,t){return e<=t}));function da(e){if(!e)return[];if(Ko(e))return aa(e)?gn(e):Ii(e);if(Je&&e[Je])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Je]());var t=ps(e);return(t==T?cn:t==N?dn:za)(e)}function fa(e){return e?(e=ma(e))===f||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}function pa(e){var t=fa(e),n=t%1;return t===t?n?t-n:t:0}function ga(e){return e?ar(pa(e),0,m):0}function ma(e){if("number"==typeof e)return e;if(la(e))return g;if(ea(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ea(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Zt(e);var n=ve.test(e);return n||_e.test(e)?dt(e.slice(2),n?2:8):me.test(e)?g:+e}function va(e){return Ni(e,Ra(e))}function ya(e){return null==e?"":ci(e)}var _a=Ri((function(e,t){if(ks(t)||Ko(t))Ni(t,Pa(t),e);else for(var n in t)Le.call(t,n)&&tr(e,n,t[n])})),wa=Ri((function(e,t){Ni(t,Ra(t),e)})),ba=Ri((function(e,t,n,r){Ni(t,Ra(t),e,r)})),Ea=Ri((function(e,t,n,r){Ni(t,Pa(t),e,r)})),ka=ns(or);var Sa=Yr((function(e,t){e=Ce(e);var n=-1,r=t.length,s=r>2?t[2]:i;for(s&&_s(t[0],t[1],s)&&(r=1);++n<r;)for(var o=t[n],a=Ra(o),l=-1,c=a.length;++l<c;){var u=a[l],h=e[u];(h===i||zo(h,Re[u])&&!Le.call(e,u))&&(e[u]=o[u])}return e})),Ta=Yr((function(e){return e.push(i,$i),At(Oa,i,e)}));function Ca(e,t,n){var r=null==e?i:kr(e,t);return r===i?n:r}function Aa(e,t){return null!=e&&gs(e,t,xr)}var xa=Vi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ue.call(t)),e[t]=n}),el(rl)),Ia=Vi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ue.call(t)),Le.call(e,t)?e[t].push(n):e[t]=[n]}),ls),Na=Yr(Nr);function Pa(e){return Ko(e)?Yn(e):Mr(e)}function Ra(e){return Ko(e)?Yn(e,!0):jr(e)}var Da=Ri((function(e,t,n){Br(e,t,n)})),Oa=Ri((function(e,t,n,r){Br(e,t,n,r)})),La=ns((function(e,t){var n={};if(null==e)return n;var r=!1;t=Lt(t,(function(t){return t=_i(t,e),r||(r=t.length>1),t})),Ni(e,is(e),n),r&&(n=lr(n,7,es));for(var i=t.length;i--;)hi(n,t[i]);return n}));var Ma=ns((function(e,t){return null==e?{}:function(e,t){return Hr(e,t,(function(t,n){return Aa(e,n)}))}(e,t)}));function ja(e,t){if(null==e)return{};var n=Lt(is(e),(function(e){return[e]}));return t=ls(t),Hr(e,n,(function(e,n){return t(e,n[0])}))}var Ua=Yi(Pa),Fa=Yi(Ra);function za(e){return null==e?[]:en(e,Pa(e))}var Va=Mi((function(e,t,n){return t=t.toLowerCase(),e+(n?Ba(t):t)}));function Ba(e){return Ya(ya(e).toLowerCase())}function qa(e){return(e=ya(e))&&e.replace(be,sn).replace(tt,"")}var Wa=Mi((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Ha=Mi((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ka=Li("toLowerCase");var Ga=Mi((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Qa=Mi((function(e,t,n){return e+(n?" ":"")+Ya(t)}));var Xa=Mi((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Ya=Li("toUpperCase");function Ja(e,t,n){return e=ya(e),(t=n?i:t)===i?function(e){return st.test(e)}(e)?function(e){return e.match(rt)||[]}(e):function(e){return e.match(he)||[]}(e):e.match(t)||[]}var Za=Yr((function(e,t){try{return At(e,i,t)}catch(n){return Yo(n)?n:new ae(n)}})),$a=ns((function(e,t){return It(t,(function(t){t=Ms(t),sr(e,t,Io(e[t],e))})),e}));function el(e){return function(){return e}}var tl=Fi(),nl=Fi(!0);function rl(e){return e}function il(e){return Lr("function"==typeof e?e:lr(e,1))}var sl=Yr((function(e,t){return function(n){return Nr(n,e,t)}})),ol=Yr((function(e,t){return function(n){return Nr(e,n,t)}}));function al(e,t,n){var r=Pa(t),i=Er(t,r);null!=n||ea(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Er(t,Pa(t)));var s=!(ea(n)&&"chain"in n)||!!n.chain,o=Jo(e);return It(i,(function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(s||t){var n=e(this.__wrapped__);return(n.__actions__=Ii(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Mt([this.value()],arguments))})})),e}function ll(){}var cl=qi(Lt),ul=qi(Pt),hl=qi(Ft);function dl(e){return ws(e)?Gt(Ms(e)):function(e){return function(t){return kr(t,e)}}(e)}var fl=Hi(),pl=Hi(!0);function gl(){return[]}function ml(){return!1}var vl=Bi((function(e,t){return e+t}),0),yl=Qi("ceil"),_l=Bi((function(e,t){return e/t}),1),wl=Qi("floor");var bl=Bi((function(e,t){return e*t}),1),El=Qi("round"),kl=Bi((function(e,t){return e-t}),0);return zn.after=function(e,t){if("function"!=typeof t)throw new Ie(s);return e=pa(e),function(){if(--e<1)return t.apply(this,arguments)}},zn.ary=Ao,zn.assign=_a,zn.assignIn=wa,zn.assignInWith=ba,zn.assignWith=Ea,zn.at=ka,zn.before=xo,zn.bind=Io,zn.bindAll=$a,zn.bindKey=No,zn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Wo(e)?e:[e]},zn.chain=ho,zn.chunk=function(e,t,r){t=(r?_s(e,t,r):t===i)?1:Qt(pa(t),0);var s=null==e?0:e.length;if(!s||t<1)return[];for(var o=0,a=0,l=n(ft(s/t));o<s;)l[a++]=ri(e,o,o+=t);return l},zn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var s=e[t];s&&(i[r++]=s)}return i},zn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=n(e-1),r=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Mt(Wo(r)?Ii(r):[r],vr(t,1))},zn.cond=function(e){var t=null==e?0:e.length,n=ls();return e=t?Lt(e,(function(e){if("function"!=typeof e[1])throw new Ie(s);return[n(e[0]),e[1]]})):[],Yr((function(n){for(var r=-1;++r<t;){var i=e[r];if(At(i[0],this,n))return At(i[1],this,n)}}))},zn.conforms=function(e){return function(e){var t=Pa(e);return function(n){return cr(n,e,t)}}(lr(e,1))},zn.constant=el,zn.countBy=go,zn.create=function(e,t){var n=Vn(e);return null==t?n:ir(n,t)},zn.curry=function e(t,n,r){var s=Ji(t,8,i,i,i,i,i,n=r?i:n);return s.placeholder=e.placeholder,s},zn.curryRight=function e(t,n,r){var s=Ji(t,l,i,i,i,i,i,n=r?i:n);return s.placeholder=e.placeholder,s},zn.debounce=Po,zn.defaults=Sa,zn.defaultsDeep=Ta,zn.defer=Ro,zn.delay=Do,zn.difference=Fs,zn.differenceBy=zs,zn.differenceWith=Vs,zn.drop=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,(t=n||t===i?1:pa(t))<0?0:t,r):[]},zn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,0,(t=r-(t=n||t===i?1:pa(t)))<0?0:t):[]},zn.dropRightWhile=function(e,t){return e&&e.length?fi(e,ls(t,3),!0,!0):[]},zn.dropWhile=function(e,t){return e&&e.length?fi(e,ls(t,3),!0):[]},zn.fill=function(e,t,n,r){var s=null==e?0:e.length;return s?(n&&"number"!=typeof n&&_s(e,t,n)&&(n=0,r=s),function(e,t,n,r){var s=e.length;for((n=pa(n))<0&&(n=-n>s?0:s+n),(r=r===i||r>s?s:pa(r))<0&&(r+=s),r=n>r?0:ga(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},zn.filter=function(e,t){return(Wo(e)?Rt:mr)(e,ls(t,3))},zn.flatMap=function(e,t){return vr(ko(e,t),1)},zn.flatMapDeep=function(e,t){return vr(ko(e,t),f)},zn.flatMapDepth=function(e,t,n){return n=n===i?1:pa(n),vr(ko(e,t),n)},zn.flatten=Ws,zn.flattenDeep=function(e){return(null==e?0:e.length)?vr(e,f):[]},zn.flattenDepth=function(e,t){return(null==e?0:e.length)?vr(e,t=t===i?1:pa(t)):[]},zn.flip=function(e){return Ji(e,512)},zn.flow=tl,zn.flowRight=nl,zn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},zn.functions=function(e){return null==e?[]:Er(e,Pa(e))},zn.functionsIn=function(e){return null==e?[]:Er(e,Ra(e))},zn.groupBy=wo,zn.initial=function(e){return(null==e?0:e.length)?ri(e,0,-1):[]},zn.intersection=Ks,zn.intersectionBy=Gs,zn.intersectionWith=Qs,zn.invert=xa,zn.invertBy=Ia,zn.invokeMap=bo,zn.iteratee=il,zn.keyBy=Eo,zn.keys=Pa,zn.keysIn=Ra,zn.map=ko,zn.mapKeys=function(e,t){var n={};return t=ls(t,3),wr(e,(function(e,r,i){sr(n,t(e,r,i),e)})),n},zn.mapValues=function(e,t){var n={};return t=ls(t,3),wr(e,(function(e,r,i){sr(n,r,t(e,r,i))})),n},zn.matches=function(e){return zr(lr(e,1))},zn.matchesProperty=function(e,t){return Vr(e,lr(t,1))},zn.memoize=Oo,zn.merge=Da,zn.mergeWith=Oa,zn.method=sl,zn.methodOf=ol,zn.mixin=al,zn.negate=Lo,zn.nthArg=function(e){return e=pa(e),Yr((function(t){return qr(t,e)}))},zn.omit=La,zn.omitBy=function(e,t){return ja(e,Lo(ls(t)))},zn.once=function(e){return xo(2,e)},zn.orderBy=function(e,t,n,r){return null==e?[]:(Wo(t)||(t=null==t?[]:[t]),Wo(n=r?i:n)||(n=null==n?[]:[n]),Wr(e,t,n))},zn.over=cl,zn.overArgs=Mo,zn.overEvery=ul,zn.overSome=hl,zn.partial=jo,zn.partialRight=Uo,zn.partition=So,zn.pick=Ma,zn.pickBy=ja,zn.property=dl,zn.propertyOf=function(e){return function(t){return null==e?i:kr(e,t)}},zn.pull=Ys,zn.pullAll=Js,zn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Kr(e,t,ls(n,2)):e},zn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Kr(e,t,i,n):e},zn.pullAt=Zs,zn.range=fl,zn.rangeRight=pl,zn.rearg=Fo,zn.reject=function(e,t){return(Wo(e)?Rt:mr)(e,Lo(ls(t,3)))},zn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],s=e.length;for(t=ls(t,3);++r<s;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return Gr(e,i),n},zn.rest=function(e,t){if("function"!=typeof e)throw new Ie(s);return Yr(e,t=t===i?t:pa(t))},zn.reverse=$s,zn.sampleSize=function(e,t,n){return t=(n?_s(e,t,n):t===i)?1:pa(t),(Wo(e)?Zn:Zr)(e,t)},zn.set=function(e,t,n){return null==e?e:$r(e,t,n)},zn.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:$r(e,t,n,r)},zn.shuffle=function(e){return(Wo(e)?$n:ni)(e)},zn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&_s(e,t,n)?(t=0,n=r):(t=null==t?0:pa(t),n=n===i?r:pa(n)),ri(e,t,n)):[]},zn.sortBy=To,zn.sortedUniq=function(e){return e&&e.length?ai(e):[]},zn.sortedUniqBy=function(e,t){return e&&e.length?ai(e,ls(t,2)):[]},zn.split=function(e,t,n){return n&&"number"!=typeof n&&_s(e,t,n)&&(t=n=i),(n=n===i?m:n>>>0)?(e=ya(e))&&("string"==typeof t||null!=t&&!sa(t))&&!(t=ci(t))&&ln(e)?bi(gn(e),0,n):e.split(t,n):[]},zn.spread=function(e,t){if("function"!=typeof e)throw new Ie(s);return t=null==t?0:Qt(pa(t),0),Yr((function(n){var r=n[t],i=bi(n,0,t);return r&&Mt(i,r),At(e,this,i)}))},zn.tail=function(e){var t=null==e?0:e.length;return t?ri(e,1,t):[]},zn.take=function(e,t,n){return e&&e.length?ri(e,0,(t=n||t===i?1:pa(t))<0?0:t):[]},zn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?ri(e,(t=r-(t=n||t===i?1:pa(t)))<0?0:t,r):[]},zn.takeRightWhile=function(e,t){return e&&e.length?fi(e,ls(t,3),!1,!0):[]},zn.takeWhile=function(e,t){return e&&e.length?fi(e,ls(t,3)):[]},zn.tap=function(e,t){return t(e),e},zn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Ie(s);return ea(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Po(e,t,{leading:r,maxWait:t,trailing:i})},zn.thru=fo,zn.toArray=da,zn.toPairs=Ua,zn.toPairsIn=Fa,zn.toPath=function(e){return Wo(e)?Lt(e,Ms):la(e)?[e]:Ii(Ls(ya(e)))},zn.toPlainObject=va,zn.transform=function(e,t,n){var r=Wo(e),i=r||Qo(e)||ca(e);if(t=ls(t,4),null==n){var s=e&&e.constructor;n=i?r?new s:[]:ea(e)&&Jo(s)?Vn(Ke(e)):{}}return(i?It:wr)(e,(function(e,r,i){return t(n,e,r,i)})),n},zn.unary=function(e){return Ao(e,1)},zn.union=eo,zn.unionBy=to,zn.unionWith=no,zn.uniq=function(e){return e&&e.length?ui(e):[]},zn.uniqBy=function(e,t){return e&&e.length?ui(e,ls(t,2)):[]},zn.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?ui(e,i,t):[]},zn.unset=function(e,t){return null==e||hi(e,t)},zn.unzip=ro,zn.unzipWith=io,zn.update=function(e,t,n){return null==e?e:di(e,t,yi(n))},zn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:di(e,t,yi(n),r)},zn.values=za,zn.valuesIn=function(e){return null==e?[]:en(e,Ra(e))},zn.without=so,zn.words=Ja,zn.wrap=function(e,t){return jo(yi(t),e)},zn.xor=oo,zn.xorBy=ao,zn.xorWith=lo,zn.zip=co,zn.zipObject=function(e,t){return mi(e||[],t||[],tr)},zn.zipObjectDeep=function(e,t){return mi(e||[],t||[],$r)},zn.zipWith=uo,zn.entries=Ua,zn.entriesIn=Fa,zn.extend=wa,zn.extendWith=ba,al(zn,zn),zn.add=vl,zn.attempt=Za,zn.camelCase=Va,zn.capitalize=Ba,zn.ceil=yl,zn.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=ma(n))===n?n:0),t!==i&&(t=(t=ma(t))===t?t:0),ar(ma(e),t,n)},zn.clone=function(e){return lr(e,4)},zn.cloneDeep=function(e){return lr(e,5)},zn.cloneDeepWith=function(e,t){return lr(e,5,t="function"==typeof t?t:i)},zn.cloneWith=function(e,t){return lr(e,4,t="function"==typeof t?t:i)},zn.conformsTo=function(e,t){return null==t||cr(e,t,Pa(t))},zn.deburr=qa,zn.defaultTo=function(e,t){return null==e||e!==e?t:e},zn.divide=_l,zn.endsWith=function(e,t,n){e=ya(e),t=ci(t);var r=e.length,s=n=n===i?r:ar(pa(n),0,r);return(n-=t.length)>=0&&e.slice(n,s)==t},zn.eq=zo,zn.escape=function(e){return(e=ya(e))&&J.test(e)?e.replace(X,on):e},zn.escapeRegExp=function(e){return(e=ya(e))&&se.test(e)?e.replace(ie,"\\$&"):e},zn.every=function(e,t,n){var r=Wo(e)?Pt:pr;return n&&_s(e,t,n)&&(t=i),r(e,ls(t,3))},zn.find=mo,zn.findIndex=Bs,zn.findKey=function(e,t){return Vt(e,ls(t,3),wr)},zn.findLast=vo,zn.findLastIndex=qs,zn.findLastKey=function(e,t){return Vt(e,ls(t,3),br)},zn.floor=wl,zn.forEach=yo,zn.forEachRight=_o,zn.forIn=function(e,t){return null==e?e:yr(e,ls(t,3),Ra)},zn.forInRight=function(e,t){return null==e?e:_r(e,ls(t,3),Ra)},zn.forOwn=function(e,t){return e&&wr(e,ls(t,3))},zn.forOwnRight=function(e,t){return e&&br(e,ls(t,3))},zn.get=Ca,zn.gt=Vo,zn.gte=Bo,zn.has=function(e,t){return null!=e&&gs(e,t,Ar)},zn.hasIn=Aa,zn.head=Hs,zn.identity=rl,zn.includes=function(e,t,n,r){e=Ko(e)?e:za(e),n=n&&!r?pa(n):0;var i=e.length;return n<0&&(n=Qt(i+n,0)),aa(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&qt(e,t,n)>-1},zn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:pa(n);return i<0&&(i=Qt(r+i,0)),qt(e,t,i)},zn.inRange=function(e,t,n){return t=fa(t),n===i?(n=t,t=0):n=fa(n),function(e,t,n){return e>=_n(t,n)&&e<Qt(t,n)}(e=ma(e),t,n)},zn.invoke=Na,zn.isArguments=qo,zn.isArray=Wo,zn.isArrayBuffer=Ho,zn.isArrayLike=Ko,zn.isArrayLikeObject=Go,zn.isBoolean=function(e){return!0===e||!1===e||ta(e)&&Tr(e)==w},zn.isBuffer=Qo,zn.isDate=Xo,zn.isElement=function(e){return ta(e)&&1===e.nodeType&&!ia(e)},zn.isEmpty=function(e){if(null==e)return!0;if(Ko(e)&&(Wo(e)||"string"==typeof e||"function"==typeof e.splice||Qo(e)||ca(e)||qo(e)))return!e.length;var t=ps(e);if(t==T||t==N)return!e.size;if(ks(e))return!Mr(e).length;for(var n in e)if(Le.call(e,n))return!1;return!0},zn.isEqual=function(e,t){return Rr(e,t)},zn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Rr(e,t,i,n):!!r},zn.isError=Yo,zn.isFinite=function(e){return"number"==typeof e&&_t(e)},zn.isFunction=Jo,zn.isInteger=Zo,zn.isLength=$o,zn.isMap=na,zn.isMatch=function(e,t){return e===t||Dr(e,t,us(t))},zn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Dr(e,t,us(t),n)},zn.isNaN=function(e){return ra(e)&&e!=+e},zn.isNative=function(e){if(Es(e))throw new ae("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Or(e)},zn.isNil=function(e){return null==e},zn.isNull=function(e){return null===e},zn.isNumber=ra,zn.isObject=ea,zn.isObjectLike=ta,zn.isPlainObject=ia,zn.isRegExp=sa,zn.isSafeInteger=function(e){return Zo(e)&&e>=-9007199254740991&&e<=p},zn.isSet=oa,zn.isString=aa,zn.isSymbol=la,zn.isTypedArray=ca,zn.isUndefined=function(e){return e===i},zn.isWeakMap=function(e){return ta(e)&&ps(e)==D},zn.isWeakSet=function(e){return ta(e)&&"[object WeakSet]"==Tr(e)},zn.join=function(e,t){return null==e?"":wt.call(e,t)},zn.kebabCase=Wa,zn.last=Xs,zn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var s=r;return n!==i&&(s=(s=pa(n))<0?Qt(r+s,0):_n(s,r-1)),t===t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,s):Bt(e,Ht,s,!0)},zn.lowerCase=Ha,zn.lowerFirst=Ka,zn.lt=ua,zn.lte=ha,zn.max=function(e){return e&&e.length?gr(e,rl,Cr):i},zn.maxBy=function(e,t){return e&&e.length?gr(e,ls(t,2),Cr):i},zn.mean=function(e){return Kt(e,rl)},zn.meanBy=function(e,t){return Kt(e,ls(t,2))},zn.min=function(e){return e&&e.length?gr(e,rl,Ur):i},zn.minBy=function(e,t){return e&&e.length?gr(e,ls(t,2),Ur):i},zn.stubArray=gl,zn.stubFalse=ml,zn.stubObject=function(){return{}},zn.stubString=function(){return""},zn.stubTrue=function(){return!0},zn.multiply=bl,zn.nth=function(e,t){return e&&e.length?qr(e,pa(t)):i},zn.noConflict=function(){return gt._===this&&(gt._=ze),this},zn.noop=ll,zn.now=Co,zn.pad=function(e,t,n){e=ya(e);var r=(t=pa(t))?pn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Wi(pt(i),n)+e+Wi(ft(i),n)},zn.padEnd=function(e,t,n){e=ya(e);var r=(t=pa(t))?pn(e):0;return t&&r<t?e+Wi(t-r,n):e},zn.padStart=function(e,t,n){e=ya(e);var r=(t=pa(t))?pn(e):0;return t&&r<t?Wi(t-r,n)+e:e},zn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),bn(ya(e).replace(oe,""),t||0)},zn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&_s(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=fa(e),t===i?(t=e,e=0):t=fa(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var s=En();return _n(e+s*(t-e+ht("1e-"+((s+"").length-1))),t)}return Qr(e,t)},zn.reduce=function(e,t,n){var r=Wo(e)?jt:Xt,i=arguments.length<3;return r(e,ls(t,4),n,i,dr)},zn.reduceRight=function(e,t,n){var r=Wo(e)?Ut:Xt,i=arguments.length<3;return r(e,ls(t,4),n,i,fr)},zn.repeat=function(e,t,n){return t=(n?_s(e,t,n):t===i)?1:pa(t),Xr(ya(e),t)},zn.replace=function(){var e=arguments,t=ya(e[0]);return e.length<3?t:t.replace(e[1],e[2])},zn.result=function(e,t,n){var r=-1,s=(t=_i(t,e)).length;for(s||(s=1,e=i);++r<s;){var o=null==e?i:e[Ms(t[r])];o===i&&(r=s,o=n),e=Jo(o)?o.call(e):o}return e},zn.round=El,zn.runInContext=e,zn.sample=function(e){return(Wo(e)?Jn:Jr)(e)},zn.size=function(e){if(null==e)return 0;if(Ko(e))return aa(e)?pn(e):e.length;var t=ps(e);return t==T||t==N?e.size:Mr(e).length},zn.snakeCase=Ga,zn.some=function(e,t,n){var r=Wo(e)?Ft:ii;return n&&_s(e,t,n)&&(t=i),r(e,ls(t,3))},zn.sortedIndex=function(e,t){return si(e,t)},zn.sortedIndexBy=function(e,t,n){return oi(e,t,ls(n,2))},zn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=si(e,t);if(r<n&&zo(e[r],t))return r}return-1},zn.sortedLastIndex=function(e,t){return si(e,t,!0)},zn.sortedLastIndexBy=function(e,t,n){return oi(e,t,ls(n,2),!0)},zn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=si(e,t,!0)-1;if(zo(e[n],t))return n}return-1},zn.startCase=Qa,zn.startsWith=function(e,t,n){return e=ya(e),n=null==n?0:ar(pa(n),0,e.length),t=ci(t),e.slice(n,n+t.length)==t},zn.subtract=kl,zn.sum=function(e){return e&&e.length?Yt(e,rl):0},zn.sumBy=function(e,t){return e&&e.length?Yt(e,ls(t,2)):0},zn.template=function(e,t,n){var r=zn.templateSettings;n&&_s(e,t,n)&&(t=i),e=ya(e),t=ba({},t,r,Zi);var s,o,a=ba({},t.imports,r.imports,Zi),l=Pa(a),c=en(a,l),u=0,h=t.interpolate||Ee,d="__p += '",f=Ae((t.escape||Ee).source+"|"+h.source+"|"+(h===ee?pe:Ee).source+"|"+(t.evaluate||Ee).source+"|$","g"),p="//# sourceURL="+(Le.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++at+"]")+"\n";e.replace(f,(function(t,n,r,i,a,l){return r||(r=i),d+=e.slice(u,l).replace(ke,an),n&&(s=!0,d+="' +\n__e("+n+") +\n'"),a&&(o=!0,d+="';\n"+a+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=l+t.length,t})),d+="';\n";var g=Le.call(t,"variable")&&t.variable;if(g){if(de.test(g))throw new ae("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(o?d.replace(H,""):d).replace(K,"$1").replace(G,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=Za((function(){return Se(l,p+"return "+d).apply(i,c)}));if(m.source=d,Yo(m))throw m;return m},zn.times=function(e,t){if((e=pa(e))<1||e>p)return[];var n=m,r=_n(e,m);t=ls(t),e-=m;for(var i=Jt(r,t);++n<e;)t(n);return i},zn.toFinite=fa,zn.toInteger=pa,zn.toLength=ga,zn.toLower=function(e){return ya(e).toLowerCase()},zn.toNumber=ma,zn.toSafeInteger=function(e){return e?ar(pa(e),-9007199254740991,p):0===e?e:0},zn.toString=ya,zn.toUpper=function(e){return ya(e).toUpperCase()},zn.trim=function(e,t,n){if((e=ya(e))&&(n||t===i))return Zt(e);if(!e||!(t=ci(t)))return e;var r=gn(e),s=gn(t);return bi(r,nn(r,s),rn(r,s)+1).join("")},zn.trimEnd=function(e,t,n){if((e=ya(e))&&(n||t===i))return e.slice(0,mn(e)+1);if(!e||!(t=ci(t)))return e;var r=gn(e);return bi(r,0,rn(r,gn(t))+1).join("")},zn.trimStart=function(e,t,n){if((e=ya(e))&&(n||t===i))return e.replace(oe,"");if(!e||!(t=ci(t)))return e;var r=gn(e);return bi(r,nn(r,gn(t))).join("")},zn.truncate=function(e,t){var n=30,r="...";if(ea(t)){var s="separator"in t?t.separator:s;n="length"in t?pa(t.length):n,r="omission"in t?ci(t.omission):r}var o=(e=ya(e)).length;if(ln(e)){var a=gn(e);o=a.length}if(n>=o)return e;var l=n-pn(r);if(l<1)return r;var c=a?bi(a,0,l).join(""):e.slice(0,l);if(s===i)return c+r;if(a&&(l+=c.length-l),sa(s)){if(e.slice(l).search(s)){var u,h=c;for(s.global||(s=Ae(s.source,ya(ge.exec(s))+"g")),s.lastIndex=0;u=s.exec(h);)var d=u.index;c=c.slice(0,d===i?l:d)}}else if(e.indexOf(ci(s),l)!=l){var f=c.lastIndexOf(s);f>-1&&(c=c.slice(0,f))}return c+r},zn.unescape=function(e){return(e=ya(e))&&Y.test(e)?e.replace(Q,vn):e},zn.uniqueId=function(e){var t=++Me;return ya(e)+t},zn.upperCase=Xa,zn.upperFirst=Ya,zn.each=yo,zn.eachRight=_o,zn.first=Hs,al(zn,function(){var e={};return wr(zn,(function(t,n){Le.call(zn.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),zn.VERSION="4.17.21",It(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){zn[e].placeholder=zn})),It(["drop","take"],(function(e,t){Wn.prototype[e]=function(n){n=n===i?1:Qt(pa(n),0);var r=this.__filtered__&&!t?new Wn(this):this.clone();return r.__filtered__?r.__takeCount__=_n(n,r.__takeCount__):r.__views__.push({size:_n(n,m),type:e+(r.__dir__<0?"Right":"")}),r},Wn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),It(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Wn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ls(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),It(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Wn.prototype[e]=function(){return this[n](1).value()[0]}})),It(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Wn.prototype[e]=function(){return this.__filtered__?new Wn(this):this[n](1)}})),Wn.prototype.compact=function(){return this.filter(rl)},Wn.prototype.find=function(e){return this.filter(e).head()},Wn.prototype.findLast=function(e){return this.reverse().find(e)},Wn.prototype.invokeMap=Yr((function(e,t){return"function"==typeof e?new Wn(this):this.map((function(n){return Nr(n,e,t)}))})),Wn.prototype.reject=function(e){return this.filter(Lo(ls(e)))},Wn.prototype.slice=function(e,t){e=pa(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Wn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=pa(t))<0?n.dropRight(-t):n.take(t-e)),n)},Wn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Wn.prototype.toArray=function(){return this.take(m)},wr(Wn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),s=zn[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);s&&(zn.prototype[t]=function(){var t=this.__wrapped__,a=r?[1]:arguments,l=t instanceof Wn,c=a[0],u=l||Wo(t),h=function(e){var t=s.apply(zn,Mt([e],a));return r&&d?t[0]:t};u&&n&&"function"==typeof c&&1!=c.length&&(l=u=!1);var d=this.__chain__,f=!!this.__actions__.length,p=o&&!d,g=l&&!f;if(!o&&u){t=g?t:new Wn(this);var m=e.apply(t,a);return m.__actions__.push({func:fo,args:[h],thisArg:i}),new qn(m,d)}return p&&g?e.apply(this,a):(m=this.thru(h),p?r?m.value()[0]:m.value():m)})})),It(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ne[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);zn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Wo(i)?i:[],e)}return this[n]((function(n){return t.apply(Wo(n)?n:[],e)}))}})),wr(Wn.prototype,(function(e,t){var n=zn[t];if(n){var r=n.name+"";Le.call(Pn,r)||(Pn[r]=[]),Pn[r].push({name:t,func:n})}})),Pn[zi(i,2).name]=[{name:"wrapper",func:i}],Wn.prototype.clone=function(){var e=new Wn(this.__wrapped__);return e.__actions__=Ii(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ii(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ii(this.__views__),e},Wn.prototype.reverse=function(){if(this.__filtered__){var e=new Wn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Wn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Wo(e),r=t<0,i=n?e.length:0,s=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var s=n[r],o=s.size;switch(s.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=_n(t,e+o);break;case"takeRight":e=Qt(e,t-o)}}return{start:e,end:t}}(0,i,this.__views__),o=s.start,a=s.end,l=a-o,c=r?a:o-1,u=this.__iteratees__,h=u.length,d=0,f=_n(l,this.__takeCount__);if(!n||!r&&i==l&&f==l)return pi(e,this.__actions__);var p=[];e:for(;l--&&d<f;){for(var g=-1,m=e[c+=t];++g<h;){var v=u[g],y=v.iteratee,_=v.type,w=y(m);if(2==_)m=w;else if(!w){if(1==_)continue e;break e}}p[d++]=m}return p},zn.prototype.at=po,zn.prototype.chain=function(){return ho(this)},zn.prototype.commit=function(){return new qn(this.value(),this.__chain__)},zn.prototype.next=function(){this.__values__===i&&(this.__values__=da(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},zn.prototype.plant=function(e){for(var t,n=this;n instanceof Bn;){var r=Us(n);r.__index__=0,r.__values__=i,t?s.__wrapped__=r:t=r;var s=r;n=n.__wrapped__}return s.__wrapped__=e,t},zn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Wn){var t=e;return this.__actions__.length&&(t=new Wn(this)),(t=t.reverse()).__actions__.push({func:fo,args:[$s],thisArg:i}),new qn(t,this.__chain__)}return this.thru($s)},zn.prototype.toJSON=zn.prototype.valueOf=zn.prototype.value=function(){return pi(this.__wrapped__,this.__actions__)},zn.prototype.first=zn.prototype.head,Je&&(zn.prototype[Je]=function(){return this}),zn}();gt._=yn,(r=function(){return yn}.call(t,n,t,e))===i||(e.exports=r)}.call(this)},463:(e,t,n)=>{"use strict";var r=n(791),i=n(296);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),E=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),A=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,j=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var F=!1;function z(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function V(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case E:return"Portal";case T:return"Profiler";case S:return"StrictMode";case I:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function Z(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,ke=null,Se=null;function Te(e){if(e=_i(e)){if("function"!==typeof Ee)throw Error(s(280));var t=e.stateNode;t&&(t=bi(t),Ee(e.stateNode,e.type,t))}}function Ce(e){ke?Se?Se.push(e):Se=[e]:ke=e}function Ae(){if(ke){var e=ke,t=Se;if(Se=ke=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function xe(e,t){return e(t)}function Ie(){}var Ne=!1;function Pe(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return xe(e,t,n)}finally{Ne=!1,(null!==ke||null!==Se)&&(Ie(),Ae())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var De=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){De=!1}function Le(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,je=null,Ue=!1,Fe=null,ze={onError:function(e){Me=!0,je=e}};function Ve(e,t,n,r,i,s,o,a,l){Me=!1,je=null,Le.apply(ze,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(s(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Xe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Je=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,Et,kt,St,Tt,Ct=!1,At=[],xt=null,It=null,Nt=null,Pt=new Map,Rt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jt(e){var t=yi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Tt(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ft(e,t,n){Ut(e)&&n.delete(t)}function zt(){Ct=!1,null!==xt&&Ut(xt)&&(xt=null),null!==It&&Ut(It)&&(It=null),null!==Nt&&Ut(Nt)&&(Nt=null),Pt.forEach(Ft),Rt.forEach(Ft)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Bt(e){function t(t){return Vt(t,e)}if(0<At.length){Vt(At[0],e);for(var n=1;n<At.length;n++){var r=At[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&Vt(xt,e),null!==It&&Vt(It,e),null!==Nt&&Vt(Nt,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)jt(n),null===n.blockedOn&&Dt.shift()}var qt=w.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,r){var i=_t,s=qt.transition;qt.transition=null;try{_t=1,Gt(e,t,n,r)}finally{_t=i,qt.transition=s}}function Kt(e,t,n,r){var i=_t,s=qt.transition;qt.transition=null;try{_t=4,Gt(e,t,n,r)}finally{_t=i,qt.transition=s}}function Gt(e,t,n,r){if(Wt){var i=Xt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return xt=Mt(xt,e,t,n,r,i),!0;case"dragenter":return It=Mt(It,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pt.set(s,Mt(Pt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rt.set(s,Mt(Rt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=_i(i);if(null!==s&&bt(s),null===(s=Xt(e,t,n,r))&&Wr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Xt(e,t,n,r){if(Qt=null,null!==(e=yi(e=be(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=j({},cn,{view:0,detail:0}),dn=sn(hn),fn=j({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),gn=sn(j({},fn,{dataTransfer:0})),mn=sn(j({},hn,{relatedTarget:0})),vn=sn(j({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=j({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=sn(yn),wn=sn(j({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function Tn(){return Sn}var Cn=j({},hn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=sn(Cn),xn=sn(j({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=sn(j({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Nn=sn(j({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=j({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(Pn),Dn=[9,13,27,32],On=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,jn=u&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Fn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,r){Ce(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Ur(e,0)}function Xn(e){if(G(wi(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(u){var Zn;if(u){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Zn=$n}else Zn=!1;Jn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Xn(Gn)){var t=[];Hn(t,Gn,e,be(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Gn)}function sr(e,t){if("click"===e)return Xn(t)}function or(e,t){if("input"===e||"change"===e)return Xn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,vr=null,yr=null,_r=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Kr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},kr={},Sr={};function Tr(e){if(kr[e])return kr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return kr[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var Cr=Tr("animationend"),Ar=Tr("animationiteration"),xr=Tr("animationstart"),Ir=Tr("transitionend"),Nr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Nr.set(e,t),l(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var Or=Pr[Dr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(Cr,"onAnimationEnd"),Rr(Ar,"onAnimationIteration"),Rr(xr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(Ve.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=je;Me=!1,je=null,Ue||(Ue=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;jr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;jr(i,a,c),s=l}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function Fr(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Vr]){e[Vr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,zr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Ht;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=yi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Pe((function(){var r=s,i=be(n),o=[];e:{var a=Nr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=An;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Cr:case Ar:case xr:l=vn;break;case Ir:l=Nn;break;case"scroll":l=dn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=xn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Re(p,d))&&u.push(Hr(p,g,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=xn,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:wi(l),f=null==c?a:wi(c),(a=new u(g,p+"leave",l,n,i)).target=h,a.relatedTarget=f,g=null,yi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,g=u),h=g,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,g=d;g;g=Gr(g))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)d=Gr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Gr(u),d=Gr(d)}u=null}else u=null;null!==l&&Qr(o,a,l,u,!1),null!==c&&null!==h&&Qr(o,h,c,u,!0)}if("select"===(l=(a=r?wi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Yn;else if(Wn(a))if(Jn)m=or;else{m=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=sr);switch(m&&(m=m(e,r))?Hn(o,m,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?wi(r):window,e){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(mr=v,vr=r,yr=null);break;case"focusout":yr=vr=mr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,wr(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":wr(o,n,i)}var y;if(On)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Bn?zn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(jn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Bn&&(y=en()):(Zt="value"in(Jt=i)?Jt.value:Jt.textContent,Bn=!0)),0<(v=Kr(r,_)).length&&(_=new wn(_,e,null,n,i),o.push({event:_,listeners:v}),y?_.data=y:null!==(y=Vn(n))&&(_.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Un);case"textInput":return(e=t.data)===Un&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&zn(e,t)?(e=en(),$t=Zt=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Ur(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Re(e,n))&&r.unshift(Hr(e,s,i)),null!=(s=Re(e,t))&&r.push(Hr(e,s,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Re(n,s))&&o.unshift(Hr(n,l,a)):i||null!=(l=Re(n,s))&&o.push(Hr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Xr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Yr,"")}function Zr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,gi="__reactEvents$"+hi,mi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function bi(e){return e[fi]||null}var Ei=[],ki=-1;function Si(e){return{current:e}}function Ti(e){0>ki||(e.current=Ei[ki],Ei[ki]=null,ki--)}function Ci(e,t){ki++,Ei[ki]=e.current,e.current=t}var Ai={},xi=Si(Ai),Ii=Si(!1),Ni=Ai;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ai;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ti(Ii),Ti(xi)}function Oi(e,t,n){if(xi.current!==Ai)throw Error(s(168));Ci(xi,t),Ci(Ii,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return j({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ai,Ni=xi.current,Ci(xi,e),Ci(Ii,Ii.current),!0}function ji(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ii),Ti(xi),Ci(xi,e)):Ti(Ii),Ci(Ii,n)}var Ui=null,Fi=!1,zi=!1;function Vi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!zi&&null!==Ui){zi=!0;var e=0,t=_t;try{var n=Ui;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Fi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge($e,Bi),i}finally{_t=t,zi=!1}}return null}var qi=[],Wi=0,Hi=null,Ki=0,Gi=[],Qi=0,Xi=null,Yi=1,Ji="";function Zi(e,t){qi[Wi++]=Ki,qi[Wi++]=Hi,Hi=e,Ki=t}function $i(e,t,n){Gi[Qi++]=Yi,Gi[Qi++]=Ji,Gi[Qi++]=Xi,Xi=e;var r=Yi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Ji=s+e}else Yi=1<<s|n<<i|r,Ji=e}function es(e){null!==e.return&&(Zi(e,1),$i(e,1,0))}function ts(e){for(;e===Hi;)Hi=qi[--Wi],qi[Wi]=null,Ki=qi[--Wi],qi[Wi]=null;for(;e===Xi;)Xi=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null,Yi=Gi[--Qi],Gi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xi?{id:Yi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var gs=w.ReactCurrentBatchConfig;function ms(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var vs=Si(null),ys=null,_s=null,ws=null;function bs(){ws=_s=ys=null}function Es(e){var t=vs.current;Ti(vs),e._currentValue=t}function ks(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ss(e,t){ys=e,ws=_s=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wa=!0),e.firstContext=null)}function Ts(e){var t=e._currentValue;if(ws!==e)if(e={context:e,memoizedValue:t,next:null},null===_s){if(null===ys)throw Error(s(308));_s=e,ys.dependencies={lanes:0,firstContext:e}}else _s=_s.next=e;return t}var Cs=null;function As(e){null===Cs?Cs=[e]:Cs.push(e)}function xs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,As(t)):(n.next=i.next,i.next=n),t.interleaved=n,Is(e,r)}function Is(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ns=!1;function Ps(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ds(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Os(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Il)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Is(e,n)}return null===(i=r.interleaved)?(t.next=t,As(r)):(t.next=i.next,i.next=t),r.interleaved=t,Is(e,n)}function Ls(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ms(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function js(e,t,n,r){var i=e.updateQueue;Ns=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(d=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break e;h=j({},h,d);break e;case 2:Ns=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);jl|=o,e.lanes=o,e.memoizedState=h}}function Us(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Fs=(new r.Component).refs;function zs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Vs={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Ds(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(rc(t,e,i,r),Ls(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Ds(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(rc(t,e,i,r),Ls(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Ds(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Os(e,i,r))&&(rc(t,e,r,n),Ls(t,e,r))}};function Bs(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function qs(e,t,n){var r=!1,i=Ai,s=t.contextType;return"object"===typeof s&&null!==s?s=Ts(s):(i=Ri(t)?Ni:xi.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ai),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Vs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ws(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Vs.enqueueReplaceState(t,t.state,null)}function Hs(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Fs,Ps(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ts(s):(s=Ri(t)?Ni:xi.current,i.context=Pi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(zs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Vs.enqueueReplaceState(i,i.state,null),js(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ks(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Fs&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Gs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qs(e){return(0,e._init)(e._payload)}function Xs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===k?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&Qs(s)===t.type)?((r=i(t,n.props)).ref=Ks(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ks(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ks(e,null,t),n.return=e,n;case E:return(t=Fc(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Gs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case E:return n.key===i?u(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Gs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Gs(t,r)}return null}function g(i,s,a,l){for(var c=null,u=null,h=s,g=s=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var v=f(i,h,a[g],l);if(null===v){null===h&&(h=m);break}e&&h&&null===v.alternate&&t(i,h),s=o(v,s,g),null===u?c=v:u.sibling=v,u=v,h=m}if(g===a.length)return n(i,h),is&&Zi(i,g),c;if(null===h){for(;g<a.length;g++)null!==(h=d(i,a[g],l))&&(s=o(h,s,g),null===u?c=h:u.sibling=h,u=h);return is&&Zi(i,g),c}for(h=r(i,h);g<a.length;g++)null!==(m=p(h,i,g,a[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=o(m,s,g),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach((function(e){return t(i,e)})),is&&Zi(i,g),c}function m(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,g=a,m=a=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var _=f(i,g,y.value,c);if(null===_){null===g&&(g=v);break}e&&g&&null===_.alternate&&t(i,g),a=o(_,a,m),null===h?u=_:h.sibling=_,h=_,g=v}if(y.done)return n(i,g),is&&Zi(i,m),u;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=d(i,y.value,c))&&(a=o(y,a,m),null===h?u=y:h.sibling=y,h=y);return is&&Zi(i,m),u}for(g=r(i,g);!y.done;m++,y=l.next())null!==(y=p(g,i,m,y.value,c))&&(e&&null!==y.alternate&&g.delete(null===y.key?m:y.key),a=o(y,a,m),null===h?u=y:h.sibling=y,h=y);return e&&g.forEach((function(e){return t(i,e)})),is&&Zi(i,m),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===k){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Qs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=Ks(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===k?((s=Mc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Lc(o.type,o.key,o.props,null,r.mode,l)).ref=Ks(r,s,o),l.return=r,r=l)}return a(r);case E:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fc(o,r.mode,l)).return=r,r=s}return a(r);case R:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return g(r,s,o,l);if(L(o))return m(r,s,o,l);Gs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Uc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var Ys=Xs(!0),Js=Xs(!1),Zs={},$s=Si(Zs),eo=Si(Zs),to=Si(Zs);function no(e){if(e===Zs)throw Error(s(174));return e}function ro(e,t){switch(Ci(to,t),Ci(eo,e),Ci($s,Zs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti($s),Ci($s,t)}function io(){Ti($s),Ti(eo),Ti(to)}function so(e){no(to.current);var t=no($s.current),n=le(t,e.type);t!==n&&(Ci(eo,e),Ci($s,n))}function oo(e){eo.current===e&&(Ti($s),Ti(eo))}var ao=Si(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function uo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=w.ReactCurrentDispatcher,fo=w.ReactCurrentBatchConfig,po=0,go=null,mo=null,vo=null,yo=!1,_o=!1,wo=0,bo=0;function Eo(){throw Error(s(321))}function ko(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(po=o,go=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),_o){o=0;do{if(_o=!1,wo=0,25<=o)throw Error(s(301));o+=1,vo=mo=null,t.updateQueue=null,ho.current=ca,e=n(r,i)}while(_o)}if(ho.current=oa,t=null!==mo&&null!==mo.next,po=0,vo=mo=go=null,yo=!1,t)throw Error(s(300));return e}function To(){var e=0!==wo;return wo=0,e}function Co(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vo?go.memoizedState=vo=e:vo=vo.next=e,vo}function Ao(){if(null===mo){var e=go.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===vo?go.memoizedState:vo.next;if(null!==t)vo=t,mo=e;else{if(null===e)throw Error(s(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===vo?go.memoizedState=vo=e:vo=vo.next=e}return vo}function xo(e,t){return"function"===typeof t?t(e):t}function Io(e){var t=Ao(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,go.lanes|=h,jl|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(wa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,go.lanes|=o,jl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=Ao(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(wa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Ro(e,t){var n=go,r=Ao(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,wa=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==vo&&1&vo.memoizedState.tag){if(n.flags|=2048,Fo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Nl)throw Error(s(349));0!==(30&po)||Do(n,t,i)}return i}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=go.updateQueue)?(t={lastEffect:null,stores:null},go.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&jo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&jo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function jo(e){var t=Is(e,1);null!==t&&rc(t,e,1,-1)}function Uo(e){var t=Co();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,go,e),[t.memoizedState,e]}function Fo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=go.updateQueue)?(t={lastEffect:null,stores:null},go.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function zo(){return Ao().memoizedState}function Vo(e,t,n,r){var i=Co();go.flags|=e,i.memoizedState=Fo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=Ao();r=void 0===r?null:r;var s=void 0;if(null!==mo){var o=mo.memoizedState;if(s=o.destroy,null!==r&&ko(r,o.deps))return void(i.memoizedState=Fo(t,n,s,r))}go.flags|=e,i.memoizedState=Fo(1|t,n,s,r)}function qo(e,t){return Vo(8390656,8,e,t)}function Wo(e,t){return Bo(2048,8,e,t)}function Ho(e,t){return Bo(4,2,e,t)}function Ko(e,t){return Bo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Go.bind(null,t,e),n)}function Xo(){}function Yo(e,t){var n=Ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=Ao();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,wa=!0),e.memoizedState=n):(ar(n,t)||(n=gt(),go.lanes|=n,jl|=n,e.baseState=!0),t)}function $o(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{_t=n,fo.transition=r}}function ea(){return Ao().memoizedState}function ta(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=xs(e,t,n,r))){rc(n,e,r,tc()),sa(n,t,r)}}function na(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,As(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=xs(e,t,i,r))&&(rc(n,e,r,i=tc()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===go||null!==t&&t===go}function ia(e,t){_o=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var oa={readContext:Ts,useCallback:Eo,useContext:Eo,useEffect:Eo,useImperativeHandle:Eo,useInsertionEffect:Eo,useLayoutEffect:Eo,useMemo:Eo,useReducer:Eo,useRef:Eo,useState:Eo,useDebugValue:Eo,useDeferredValue:Eo,useTransition:Eo,useMutableSource:Eo,useSyncExternalStore:Eo,useId:Eo,unstable_isNewReconciler:!1},aa={readContext:Ts,useCallback:function(e,t){return Co().memoizedState=[e,void 0===t?null:t],e},useContext:Ts,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vo(4,2,e,t)},useMemo:function(e,t){var n=Co();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Co();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,go,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Co().memoizedState=e},useState:Uo,useDebugValue:Xo,useDeferredValue:function(e){return Co().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=$o.bind(null,e[1]),Co().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=go,i=Co();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Nl)throw Error(s(349));0!==(30&po)||Do(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Fo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Co(),t=Nl.identifierPrefix;if(is){var n=Ji;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=wo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:Ts,useCallback:Yo,useContext:Ts,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:Jo,useReducer:Io,useRef:zo,useState:function(){return Io(xo)},useDebugValue:Xo,useDeferredValue:function(e){return Zo(Ao(),mo.memoizedState,e)},useTransition:function(){return[Io(xo)[0],Ao().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:ea,unstable_isNewReconciler:!1},ca={readContext:Ts,useCallback:Yo,useContext:Ts,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:Jo,useReducer:No,useRef:zo,useState:function(){return No(xo)},useDebugValue:Xo,useDeferredValue:function(e){var t=Ao();return null===mo?t.memoizedState=e:Zo(t,mo.memoizedState,e)},useTransition:function(){return[No(xo)[0],Ao().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Ds(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Kl=r),da(0,t)},n}function ga(e,t,n){(n=Ds(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function va(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ds(-1,1)).tag=2,Os(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var _a=w.ReactCurrentOwner,wa=!1;function ba(e,t,n,r){t.child=null===e?Js(t,null,n,r):Ys(t,e.child,n,r)}function Ea(e,t,n,r,i){n=n.render;var s=t.ref;return Ss(t,i),r=So(e,t,n,r,s,i),n=To(),null===e||wa?(is&&n&&es(t),t.flags|=1,ba(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function ka(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Dc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Sa(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Ha(e,t,i)}return t.flags|=1,(e=Oc(s,r)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(wa=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ha(e,t,i);0!==(131072&e.flags)&&(wa=!0)}}return Aa(e,t,n,r,i)}function Ta(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Ol,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Ol,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ci(Ol,Dl),Dl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ci(Ol,Dl),Dl|=r;return ba(e,t,i,n),t.child}function Ca(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Aa(e,t,n,r,i){var s=Ri(n)?Ni:xi.current;return s=Pi(t,s),Ss(t,i),n=So(e,t,n,r,s,i),r=To(),null===e||wa?(is&&r&&es(t),t.flags|=1,ba(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function xa(e,t,n,r,i){if(Ri(n)){var s=!0;Mi(t)}else s=!1;if(Ss(t,i),null===t.stateNode)Wa(e,t),qs(t,n,r),Hs(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ts(c):c=Pi(t,c=Ri(n)?Ni:xi.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&Ws(t,o,r,c),Ns=!1;var d=t.memoizedState;o.state=d,js(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ii.current||Ns?("function"===typeof u&&(zs(t,n,u,r),l=t.memoizedState),(a=Ns||Bs(t,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Rs(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:ms(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ts(l):l=Pi(t,l=Ri(n)?Ni:xi.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&Ws(t,o,r,l),Ns=!1,d=t.memoizedState,o.state=d,js(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ii.current||Ns?("function"===typeof f&&(zs(t,n,f,r),p=t.memoizedState),(c=Ns||Bs(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Ia(e,t,n,r,s,i)}function Ia(e,t,n,r,i,s){Ca(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&ji(t,n,!1),Ha(e,t,s);r=t.stateNode,_a.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ys(t,e.child,null,s),t.child=Ys(t,null,a,s)):ba(e,t,a,s),t.memoizedState=r.state,i&&ji(t,n,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Pa(e,t,n,r,i){return fs(),ps(i),t.flags|=256,ba(e,t,n,r),t.child}var Ra,Da,Oa,La,Ma={dehydrated:null,treeContext:null,retryLane:0};function ja(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ua(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ci(ao,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=jc(l,i,0,null),e=Mc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=ja(n),t.memoizedState=Ma,e):Fa(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,za(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=jc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ys(t,e.child,null,a),t.child.memoizedState=ja(a),t.memoizedState=Ma,o);if(0===(1&t.mode))return za(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,za(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),wa||l){if(null!==(r=Nl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Is(e,i),rc(r,e,i,-1))}return mc(),za(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=xc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Gi[Qi++]=Yi,Gi[Qi++]=Ji,Gi[Qi++]=Xi,Yi=e.id,Ji=e.overflow,Xi=t),t=Fa(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Oc(r,a):(a=Mc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?ja(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,i}return e=(a=e.child).sibling,i=Oc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fa(e,t){return(t=jc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function za(e,t,n,r){return null!==r&&ps(r),Ys(t,e.child,null,n),(e=Fa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Va(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ks(e.return,t,n)}function Ba(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ba(e,t,r.children,n),0!==(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Va(e,n,t);else if(19===e.tag)Va(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(ao,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ba(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ba(t,!0,n,null,s);break;case"together":Ba(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ha(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),jl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ka(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ga(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ga(t),null;case 1:case 17:return Ri(t.type)&&Di(),Ga(t),null;case 3:return r=t.stateNode,io(),Ti(Ii),Ti(xi),uo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Da(e,t),Ga(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Oa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ga(t),null}if(e=no($s.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Fr(Lr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":Y(r,o),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fr("invalid",r);break;case"textarea":ie(r,o),Fr("invalid",r)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":K(r),$(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Ra(e,t,!1,!1),t.stateNode=e;e:{switch(l=_e(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Fr(Lr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":Y(e,r),i=X(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(o in ye(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?me(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Fr("scroll",e):null!=u&&_(e,o,u,l))}switch(n){case"input":K(e),$(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ga(t),null;case 6:if(e&&null!=t.stateNode)La(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no($s.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ga(t),null;case 13:if(Ti(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ga(t),o=!1}else null!==ss&&(ac(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Ll&&(Ll=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ga(t),null);case 4:return io(),Da(e,t),null===e&&Br(t.stateNode.containerInfo),Ga(t),null;case 10:return Es(t.type._context),Ga(t),null;case 19:if(Ti(ao),null===(o=t.memoizedState))return Ga(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ka(o,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,Ka(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>ql&&(t.flags|=128,r=!0,Ka(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ka(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Ga(t),null}else 2*Je()-o.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Ka(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=ao.current,Ci(ao,r?1&n|2:1&n),t):(Ga(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Ga(t),6&t.subtreeFlags&&(t.flags|=8192)):Ga(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Xa(e,t){switch(ts(t),t.tag){case 1:return Ri(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ti(Ii),Ti(xi),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ti(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(ao),null;case 4:return io(),null;case 10:return Es(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ra=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Da=function(){},Oa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no($s.current);var s,o=null;switch(n){case"input":i=X(e,i),r=X(e,r),o=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},La=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ya=!1,Ja=!1,Za="function"===typeof WeakSet?WeakSet:Set,$a=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tc(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Tc(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[gi],delete t[mi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||el(n,t);case 6:var r=hl,i=dl;hl=null,fl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tl(n,t,o),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Ja&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Tc(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,fl(e,t,n),Ja=r):fl(e,t,n);break;default:fl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Za),t.forEach((function(t){var r=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));pl(o,a,i),hl=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Tc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(m){Tc(e,e.return,m)}try{rl(5,e,e.return)}catch(m){Tc(e,e.return,m)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(m){Tc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(i,o),_e(l,a);var u=_e(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?me(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):_(i,h,d,u)}switch(l){case"input":Z(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(m){Tc(e,e.return,m)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Tc(e,e.return,m)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Tc(e,e.return,m)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bl=Je())),4&r&&gl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(u=Ja)||h,ml(t,e),Ja=u):ml(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for($a=e,h=e.child;null!==h;){for(d=$a=h;null!==$a;){switch(p=(f=$a).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Tc(r,n,m)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){El(d);continue}}null!==p?(p.return=f,$a=p):El(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",a))}catch(m){Tc(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Tc(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),yl(e),4&r&&gl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cl(e,ll(e),o);break;default:throw Error(s(161))}}catch(a){Tc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function _l(e,t,n){$a=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==$a;){var i=$a,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ya;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ja;a=Ya;var c=Ja;if(Ya=o,(Ja=l)&&!c)for($a=i;null!==$a;)l=(o=$a).child,22===o.tag&&null!==o.memoizedState?kl(i):null!==l?(l.return=o,$a=l):kl(i);for(;null!==s;)$a=s,wl(s,t,n),s=s.sibling;$a=i,Ya=a,Ja=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,$a=s):bl(e)}}function bl(e){for(;null!==$a;){var t=$a;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ms(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Us(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Us(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}Ja||512&t.flags&&sl(t)}catch(f){Tc(t,t.return,f)}}if(t===e){$a=null;break}if(null!==(n=t.sibling)){n.return=t.return,$a=n;break}$a=t.return}}function El(e){for(;null!==$a;){var t=$a;if(t===e){$a=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$a=n;break}$a=t.return}}function kl(e){for(;null!==$a;){var t=$a;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Tc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Tc(t,i,l)}}var s=t.return;try{sl(t)}catch(l){Tc(t,s,l)}break;case 5:var o=t.return;try{sl(t)}catch(l){Tc(t,o,l)}}}catch(l){Tc(t,t.return,l)}if(t===e){$a=null;break}var a=t.sibling;if(null!==a){a.return=t.return,$a=a;break}$a=t.return}}var Sl,Tl=Math.ceil,Cl=w.ReactCurrentDispatcher,Al=w.ReactCurrentOwner,xl=w.ReactCurrentBatchConfig,Il=0,Nl=null,Pl=null,Rl=0,Dl=0,Ol=Si(0),Ll=0,Ml=null,jl=0,Ul=0,Fl=0,zl=null,Vl=null,Bl=0,ql=1/0,Wl=null,Hl=!1,Kl=null,Gl=null,Ql=!1,Xl=null,Yl=0,Jl=0,Zl=null,$l=-1,ec=0;function tc(){return 0!==(6&Il)?Je():-1!==$l?$l:$l=Je()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Rl?Rl&-Rl:null!==gs.transition?(0===ec&&(ec=gt()),ec):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<Jl)throw Jl=0,Zl=null,Error(s(185));vt(e,n,r),0!==(2&Il)&&e===Nl||(e===Nl&&(0===(2&Il)&&(Ul|=n),4===Ll&&lc(e,Rl)),ic(e,r),1===n&&0===Il&&0===(1&t.mode)&&(ql=Je()+500,Fi&&Bi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Nl?Rl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Fi=!0,Vi(e)}(cc.bind(null,e)):Vi(cc.bind(null,e)),oi((function(){0===(6&Il)&&Bi()})),n=null;else{switch(wt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if($l=-1,ec=0,0!==(6&Il))throw Error(s(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=dt(e,e===Nl?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=Il;Il|=2;var o=gc();for(Nl===e&&Rl===t||(Wl=null,ql=Je()+500,fc(e,t));;)try{_c();break}catch(l){pc(e,l)}bs(),Cl.current=o,Il=i,null!==Pl?t=0:(Nl=null,Rl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ml,fc(e,0),lc(e,r),ic(e,Je()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ml,fc(e,0),lc(e,r),ic(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Ec(e,Vl,Wl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Bl+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Ec.bind(null,e,Vl,Wl),t);break}Ec(e,Vl,Wl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tl(r/1960))-r)){e.timeoutHandle=ri(Ec.bind(null,e,Vl,Wl),r);break}Ec(e,Vl,Wl);break;default:throw Error(s(329))}}}return ic(e,Je()),e.callbackNode===n?sc.bind(null,e):null}function oc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Vl,Vl=n,null!==t&&ac(t)),e}function ac(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function lc(e,t){for(t&=~Fl,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Il))throw Error(s(327));kc();var t=dt(e,0);if(0===(1&t))return ic(e,Je()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ml,fc(e,0),lc(e,t),ic(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ec(e,Vl,Wl),ic(e,Je()),null}function uc(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&(ql=Je()+500,Fi&&Bi())}}function hc(e){null!==Xl&&0===Xl.tag&&0===(6&Il)&&kc();var t=Il;Il|=1;var n=xl.transition,r=_t;try{if(xl.transition=null,_t=1,e)return e()}finally{_t=r,xl.transition=n,0===(6&(Il=t))&&Bi()}}function dc(){Dl=Ol.current,Ti(Ol)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:io(),Ti(Ii),Ti(xi),uo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ti(ao);break;case 10:Es(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Nl=e,Pl=e=Oc(e.current,null),Rl=Dl=t,Ll=0,Ml=null,Fl=Ul=jl=0,Vl=zl=null,null!==Cs){for(t=0;t<Cs.length;t++)if(null!==(r=(n=Cs[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Cs=null}return e}function pc(e,t){for(;;){var n=Pl;try{if(bs(),ho.current=oa,yo){for(var r=go.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}yo=!1}if(po=0,vo=mo=go=null,_o=!1,wo=0,Al.current=null,null===n||null===n.return){Ll=1,Ml=t,Pl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=va(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ma(o,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){ma(o,u,t),mc();break e}c=Error(s(426))}else if(is&&1&l.mode){var v=va(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ya(v,a,l,0,t),ps(ua(c,l));break e}}o=c=ua(c,l),4!==Ll&&(Ll=2),null===zl?zl=[o]:zl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,pa(0,c,t));break e;case 1:l=c;var y=o.type,_=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Gl||!Gl.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,ga(o,l,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(w){t=w,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function gc(){var e=Cl.current;return Cl.current=oa,null===e?oa:e}function mc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Nl||0===(268435455&jl)&&0===(268435455&Ul)||lc(Nl,Rl)}function vc(e,t){var n=Il;Il|=2;var r=gc();for(Nl===e&&Rl===t||(Wl=null,fc(e,t));;)try{yc();break}catch(i){pc(e,i)}if(bs(),Il=n,Cl.current=r,null!==Pl)throw Error(s(261));return Nl=null,Rl=0,Ll}function yc(){for(;null!==Pl;)wc(Pl)}function _c(){for(;null!==Pl&&!Xe();)wc(Pl)}function wc(e){var t=Sl(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?bc(e):Pl=t,Al.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qa(n,t,Dl)))return void(Pl=n)}else{if(null!==(n=Xa(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Ll=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Ll&&(Ll=5)}function Ec(e,t,n){var r=_t,i=xl.transition;try{xl.transition=null,_t=1,function(e,t,n,r){do{kc()}while(null!==Xl);if(0!==(6&Il))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Nl&&(Pl=Nl=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,Nc(tt,(function(){return kc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=xl.transition,xl.transition=null;var a=_t;_t=1;var l=Il;Il|=4,Al.current=null,function(e,t){if(ei=Wt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,$a=t;null!==$a;)if(e=(t=$a).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$a=e;else for(;null!==$a;){t=$a;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,y=t.stateNode,_=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:ms(t.type,m),v);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(b){Tc(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,$a=e;break}$a=t.return}g=nl,nl=!1}(e,n),vl(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,_l(n,e,i),Ye(),Il=l,_t=a,xl.transition=o}else e.current=n;if(Ql&&(Ql=!1,Xl=e,Yl=i),o=e.pendingLanes,0===o&&(Gl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Kl,Kl=null,e;0!==(1&Yl)&&0!==e.tag&&kc(),o=e.pendingLanes,0!==(1&o)?e===Zl?Jl++:(Jl=0,Zl=e):Jl=0,Bi()}(e,t,n,r)}finally{xl.transition=i,_t=r}return null}function kc(){if(null!==Xl){var e=wt(Yl),t=xl.transition,n=_t;try{if(xl.transition=null,_t=16>e?16:e,null===Xl)var r=!1;else{if(e=Xl,Xl=null,Yl=0,0!==(6&Il))throw Error(s(331));var i=Il;for(Il|=4,$a=e.current;null!==$a;){var o=$a,a=o.child;if(0!==(16&$a.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for($a=u;null!==$a;){var h=$a;switch(h.tag){case 0:case 11:case 15:rl(8,h,o)}var d=h.child;if(null!==d)d.return=h,$a=d;else for(;null!==$a;){var f=(h=$a).sibling,p=h.return;if(ol(h),h===u){$a=null;break}if(null!==f){f.return=p,$a=f;break}$a=p}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}$a=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,$a=a;else e:for(;null!==$a;){if(0!==(2048&(o=$a).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,$a=y;break e}$a=o.return}}var _=e.current;for($a=_;null!==$a;){var w=(a=$a).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,$a=w;else e:for(a=_;null!==$a;){if(0!==(2048&(l=$a).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(E){Tc(l,l.return,E)}if(l===a){$a=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,$a=b;break e}$a=l.return}}if(Il=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{_t=n,xl.transition=t}}return!1}function Sc(e,t,n){e=Os(e,t=pa(0,t=ua(n,t),1),1),t=tc(),null!==e&&(vt(e,1,t),ic(e,t))}function Tc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Os(t,e=ga(t,e=ua(n,e),1),1),e=tc(),null!==t&&(vt(t,1,e),ic(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Nl===e&&(Rl&n)===n&&(4===Ll||3===Ll&&(130023424&Rl)===Rl&&500>Je()-Bl?fc(e,0):Fl|=n),ic(e,t)}function Ac(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Is(e,t))&&(vt(e,t,n),ic(e,n))}function xc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ac(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Ac(e,n)}function Nc(e,t){return Ge(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Pc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Dc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case k:return Mc(n.children,i,o,t);case S:a=8,i|=8;break;case T:return(e=Rc(12,n,t,2|i)).elementType=T,e.lanes=o,e;case I:return(e=Rc(13,n,t,i)).elementType=I,e.lanes=o,e;case N:return(e=Rc(19,n,t,i)).elementType=N,e.lanes=o,e;case D:return jc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:a=10;break e;case A:a=9;break e;case x:a=11;break e;case P:a=14;break e;case R:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Rc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function jc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,s,o,a,l){return e=new zc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Rc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ps(s),e}function Bc(e){if(!e)return Ai;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,s,o,a,l){return(e=Vc(n,r,!0,e,0,s,0,a,l)).context=Bc(null),n=e.current,(s=Ds(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Os(n,s,i),e.current.lanes=i,vt(e,i,r),ic(e,r),e}function Wc(e,t,n,r){var i=t.current,s=tc(),o=nc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ds(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Os(i,t,o))&&(rc(e,i,o,s),Ls(e,i,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ii.current)wa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wa=!1,function(e,t,n){switch(t.tag){case 3:Na(t),fs();break;case 5:so(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(vs,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ua(e,t,n):(Ci(ao,1&ao.current),null!==(e=Ha(e,t,n))?e.sibling:null);Ci(ao,1&ao.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,Ta(e,t,n)}return Ha(e,t,n)}(e,t,n);wa=0!==(131072&e.flags)}else wa=!1,is&&0!==(1048576&t.flags)&&$i(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wa(e,t),e=t.pendingProps;var i=Pi(t,xi.current);Ss(t,n),i=So(null,t,r,e,i,n);var o=To();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ps(t),i.updater=Vs,t.stateNode=i,i._reactInternals=t,Hs(t,r,e,n),t=Ia(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),ba(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===P)return 14}return 2}(r),e=ms(r,e),i){case 0:t=Aa(null,t,r,e,n);break e;case 1:t=xa(null,t,r,e,n);break e;case 11:t=Ea(null,t,r,e,n);break e;case 14:t=ka(null,t,r,ms(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Aa(e,t,r,i=t.elementType===r?i:ms(r,i),n);case 1:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:ms(r,i),n);case 3:e:{if(Na(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Rs(e,t),js(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pa(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Pa(e,t,r,n,i=ua(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Js(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ha(e,t,n);break e}ba(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Ca(e,t),ba(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Ua(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ys(t,null,r,n):ba(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ea(e,t,r,i=t.elementType===r?i:ms(r,i),n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ci(vs,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ii.current){t=Ha(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ds(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),ks(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),ks(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ba(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ss(t,n),r=r(i=Ts(i)),t.flags|=1,ba(e,t,r,n),t.child;case 14:return i=ms(r=t.type,t.pendingProps),ka(e,t,r,i=ms(r.type,i),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ms(r,i),Wa(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Ss(t,n),qs(t,r,i),Hs(t,r,i,n),Ia(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return Ta(e,t,n)}throw Error(s(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Hc(o);a.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Hc(o);s.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),hc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Hc(l);a.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),hc((function(){Wc(t,l,n,r)})),l}(n,t,e,i,r);return Hc(o)}Yc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wc(e,t,null,null)},Yc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Wc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&jt(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),ic(t,Je()),0===(6&Il)&&(ql=Je()+500,Bi()))}break;case 13:hc((function(){var t=Is(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Gc(e,1)}},Et=function(e){if(13===e.tag){var t=Is(e,134217728);if(null!==t)rc(t,e,134217728,tc());Gc(e,134217728)}},kt=function(e){if(13===e.tag){var t=nc(e),n=Is(e,t);if(null!==n)rc(n,e,t,tc());Gc(e,t)}},St=function(){return _t},Tt=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},Ee=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(s(90));G(r),Z(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=uc,Ie=hc;var tu={usingClientEntryPoint:!1,Events:[_i,wi,bi,Ce,Ae,uc]},nu={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(s(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(s(40));return!!e._reactRootContainer&&(hc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:(e,t,n)=>{"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:(e,t,n)=>{"use strict";var r=n(791),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},117:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function _(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=_.prototype=new y;w.constructor=_,g(w,v.prototype),w.isPureReactComponent=!0;var b=Array.isArray,E=Object.prototype.hasOwnProperty,k={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,i)&&!S.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:k.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+x(l,0):s,b(o)?(i="",null!=e&&(i=e.replace(A,"$&/")+"/"),I(o,t,i,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(A,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",b(e))for(var c=0;c<e.length;c++){var u=s+x(a=e[c],c);l+=I(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=I(a=a.value,t,i,u=s+x(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:k};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=_,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)E.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:(e,t,n)=>{"use strict";e.exports=n(117)},184:(e,t,n)=>{"use strict";e.exports=n(374)},813:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function b(e){if(m=!1,w(e),!g)if(null!==r(c))g=!0,D(E);else{var t=r(u);null!==t&&O(b,t.startTime-e)}}function E(e,n){g=!1,m&&(m=!1,y(C),C=-1),p=!0;var s=f;try{for(w(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!I());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),w(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&O(b,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,T=null,C=-1,A=5,x=-1;function I(){return!(t.unstable_now()-x<A)}function N(){if(null!==T){var e=t.unstable_now();x=e;var n=!0;try{n=T(!0,e)}finally{n?k():(S=!1,T=null)}}else S=!1}if("function"===typeof _)k=function(){_(N)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=N,k=function(){R.postMessage(null)}}else k=function(){v(N,0)};function D(e){T=e,S||(S=!0,k())}function O(e,n){C=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,D(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(m?(y(C),C=-1):m=!0,O(b,s-o))):(e.sortIndex=a,n(c,e),g||p||(g=!0,D(E))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},296:(e,t,n)=>{"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.m=e,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".8004f312.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="sec-mobile-commerce:";n.l=(r,i,s,o)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+s){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[i];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/sec-mobile-commerce/",(()=>{var e={179:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,s,o=r[0],a=r[1],l=r[2],c=0;if(o.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<o.length;c++)s=o[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunksec_mobile_commerce=self.webpackChunksec_mobile_commerce||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e=n(791),t=n(250);const r=!1,i=!1,s="${JSCORE_VERSION}",o=function(e,t){if(!e)throw a(t)},a=function(e){return new Error("Firebase Database ("+s+") INTERNAL ASSERT FAILED: "+e)},l=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(l(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new u;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class u extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const h=function(e){const t=l(e);return c.encodeByteArray(t,!0)},d=function(e){return h(e).replace(/\./g,"")},f=function(e){try{return c.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function p(e){return g(void 0,e)}function g(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=g(e[n],t[n]));return e}const m=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,v=()=>{try{return m()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/sec-mobile-commerce",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&f(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},y=e=>{var t,n;return null===(n=null===(t=v())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},_=e=>{const t=y(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},w=()=>{var e;return null===(e=v())||void 0===e?void 0:e.config},b=e=>{var t;return null===(t=v())||void 0===t?void 0:t["_".concat(e)]};class E{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function k(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[d(JSON.stringify({alg:"none",type:"JWT"})),d(JSON.stringify(s)),""].join(".")}function S(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function T(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(S())}function C(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function A(){return!0===r||!0===i}function x(){return!function(){var e;const t=null===(e=v())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function I(){try{return"object"===typeof indexedDB}catch(e){return!1}}class N extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,N.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,P.prototype.create)}}class P{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(R,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new N(n,s,t)}}const R=/\{\$([^}]+)}/g;function D(e){return JSON.parse(e)}function O(e){return JSON.stringify(e)}const L=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=D(f(s[0])||""),n=D(f(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(s){}return{header:t,claims:n,data:r,signature:i}};function M(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function j(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function U(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function F(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function z(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(V(n)&&V(s)){if(!z(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function V(e){return null!==e&&"object"===typeof e}function B(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function q(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function W(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class H{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^o&(a^l),i=1518500249):(r=o^a^l,i=1859775393):u<60?(r=o&a|l&(o|a),i=2400959708):(r=o^a^l,i=3395469782);const e=(s<<5|s>>>27)+r+c+i+n[u]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}class K{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=G),void 0===r.error&&(r.error=G),void 0===r.complete&&(r.complete=G);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function G(){}function Q(e,t){return"".concat(e," failed: ").concat(t," argument ")}const X=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Y(e){return e&&e._delegate?e._delegate:e}class J{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Z="[DEFAULT]";class ${constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new E;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Z})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Z?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;return this.component?this.component.multipleInstances?e:Z:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ee{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new $(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const te=[];var ne;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ne||(ne={}));const re={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},ie=ne.INFO,se={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},oe=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=se[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class ae{constructor(e){this.name=e,this._logLevel=ie,this._logHandler=oe,this._userLogHandler=null,te.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?re[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...t),this._logHandler(this,ne.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...t),this._logHandler(this,ne.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ne.INFO,...t),this._logHandler(this,ne.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ne.WARN,...t),this._logHandler(this,ne.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...t),this._logHandler(this,ne.ERROR,...t)}}const le=(e,t)=>t.some((t=>e instanceof t));let ce,ue;const he=new WeakMap,de=new WeakMap,fe=new WeakMap,pe=new WeakMap,ge=new WeakMap;let me={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return de.get(e);if("objectStoreNames"===t)return e.objectStoreNames||fe.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _e(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ve(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ue||(ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(we(this),n),_e(he.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _e(e.apply(we(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(we(this),t,...r);return fe.set(s,t.sort?t.sort():[t]),_e(s)}}function ye(e){return"function"===typeof e?ve(e):(e instanceof IDBTransaction&&function(e){if(de.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));de.set(e,t)}(e),le(e,ce||(ce=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,me):e)}function _e(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(_e(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&he.set(t,e)})).catch((()=>{})),ge.set(t,e),t}(e);if(pe.has(e))return pe.get(e);const t=ye(e);return t!==e&&(pe.set(e,t),ge.set(t,e)),t}const we=e=>ge.get(e);const be=["get","getKey","getAll","getAllKeys","count"],Ee=["put","add","delete","clear"],ke=new Map;function Se(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(ke.get(t))return ke.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Ee.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!be.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return ke.set(t,s),s}me=(e=>({...e,get:(t,n,r)=>Se(t,n)||e.get(t,n,r),has:(t,n)=>!!Se(t,n)||e.has(t,n)}))(me);class Te{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Ce="@firebase/app",Ae="0.9.26",xe=new ae("@firebase/app"),Ie="[DEFAULT]",Ne={[Ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Pe=new Map,Re=new Map;function De(e,t){try{e.container.addComponent(t)}catch(n){xe.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Oe(e){const t=e.name;if(Re.has(t))return xe.debug("There were multiple attempts to register component ".concat(t,".")),!1;Re.set(t,e);for(const n of Pe.values())De(n,e);return!0}function Le(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Me=new P("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class je{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new J("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Me.create("app-deleted",{appName:this._name})}}const Ue="10.7.2";function Fe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Ie,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Me.create("bad-app-name",{appName:String(i)});if(n||(n=w()),!n)throw Me.create("no-options");const s=Pe.get(i);if(s){if(z(n,s.options)&&z(r,s.config))return s;throw Me.create("duplicate-app",{appName:i})}const o=new ee(i);for(const l of Re.values())o.addComponent(l);const a=new je(n,r,o);return Pe.set(i,a),a}function ze(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie;const t=Pe.get(e);if(!t&&e===Ie&&w())return Fe();if(!t)throw Me.create("no-app",{appName:e});return t}function Ve(e,t,n){var r;let i=null!==(r=Ne[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void xe.warn(e.join(" "))}Oe(new J("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}const Be="firebase-heartbeat-database",qe=1,We="firebase-heartbeat-store";let He=null;function Ke(){return He||(He=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=_e(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(_e(o.result),e.oldVersion,e.newVersion,_e(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(Be,qe,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(We)}catch(n){console.warn(n)}}}).catch((e=>{throw Me.create("idb-open",{originalErrorMessage:e.message})}))),He}async function Ge(e,t){try{const n=(await Ke()).transaction(We,"readwrite"),r=n.objectStore(We);await r.put(t,Qe(e)),await n.done}catch(n){if(n instanceof N)xe.warn(n.message);else{const e=Me.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});xe.warn(e.message)}}}function Qe(e){return"".concat(e.name,"!").concat(e.options.appId)}class Xe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Je(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ye();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Ye(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Ze(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ze(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=d(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Ye(){return(new Date).toISOString().substring(0,10)}class Je{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!I()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(u_){t(u_)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await Ke();return await t.transaction(We).objectStore(We).get(Qe(e))}catch(t){if(t instanceof N)xe.warn(t.message);else{const e=Me.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});xe.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ge(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ge(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Ze(e){return d(JSON.stringify({version:2,heartbeats:e})).length}var $e;$e="",Oe(new J("platform-logger",(e=>new Te(e)),"PRIVATE")),Oe(new J("heartbeat",(e=>new Xe(e)),"PRIVATE")),Ve(Ce,Ae,$e),Ve(Ce,Ae,"esm2017"),Ve("fire-js","");var et,tt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},nt={},rt=rt||{},it=tt||self;function st(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ot(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var at="closure_uid_"+(1e9*Math.random()>>>0),lt=0;function ct(e,t,n){return e.call.apply(e.bind,arguments)}function ut(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ht(e,t,n){return(ht=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ct:ut).apply(null,arguments)}function dt(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ft(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function pt(){this.s=this.s,this.o=this.o}pt.prototype.s=!1,pt.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,at)&&e[at]||(e[at]=++lt))},pt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const gt=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function mt(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function vt(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(st(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function yt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}yt.prototype.h=function(){this.defaultPrevented=!0};var _t=function(){if(!it.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};it.addEventListener("test",e,t),it.removeEventListener("test",e,t)}catch(n){}return e}();function wt(e){return/^[\s\xa0]*$/.test(e)}function bt(){var e=it.navigator;return e&&(e=e.userAgent)?e:""}function Et(e){return-1!=bt().indexOf(e)}function kt(e){return kt[" "](e),e}kt[" "]=function(){};var St,Tt,Ct=Et("Opera"),At=Et("Trident")||Et("MSIE"),xt=Et("Edge"),It=xt||At,Nt=Et("Gecko")&&!(-1!=bt().toLowerCase().indexOf("webkit")&&!Et("Edge"))&&!(Et("Trident")||Et("MSIE"))&&!Et("Edge"),Pt=-1!=bt().toLowerCase().indexOf("webkit")&&!Et("Edge");function Rt(){var e=it.document;return e?e.documentMode:void 0}e:{var Dt="",Ot=function(){var e=bt();return Nt?/rv:([^\);]+)(\)|;)/.exec(e):xt?/Edge\/([\d\.]+)/.exec(e):At?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Pt?/WebKit\/(\S+)/.exec(e):Ct?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Ot&&(Dt=Ot?Ot[1]:""),At){var Lt=Rt();if(null!=Lt&&Lt>parseFloat(Dt)){St=String(Lt);break e}}St=Dt}if(it.document&&At){var Mt=Rt();Tt=Mt||(parseInt(St,10)||void 0)}else Tt=void 0;var jt=Tt;function Ut(e,t){if(yt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Nt){e:{try{kt(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Ft[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ut.$.h.call(this)}}ft(Ut,yt);var Ft={2:"touch",3:"pen",4:"mouse"};Ut.prototype.h=function(){Ut.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var zt="closure_listenable_"+(1e6*Math.random()|0),Vt=0;function Bt(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Vt,this.fa=this.ia=!1}function qt(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Wt(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Ht(e){const t={};for(const n in e)t[n]=e[n];return t}const Kt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Gt(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Kt.length;t++)n=Kt[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Qt(e){this.src=e,this.g={},this.h=0}function Xt(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=gt(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(qt(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Yt(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}Qt.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=Yt(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Bt(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var Jt="closure_lm_"+(1e6*Math.random()|0),Zt={};function $t(e,t,n,r,i){if(r&&r.once)return tn(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)$t(e,t[s],n,r,i);return null}return n=cn(n),e&&e[zt]?e.O(t,n,ot(r)?!!r.capture:!!r,i):en(e,t,n,!1,r,i)}function en(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=ot(i)?!!i.capture:!!i,a=an(e);if(a||(e[Jt]=a=new Qt(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=on;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)_t||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(sn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function tn(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)tn(e,t[s],n,r,i);return null}return n=cn(n),e&&e[zt]?e.P(t,n,ot(r)?!!r.capture:!!r,i):en(e,t,n,!0,r,i)}function nn(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)nn(e,t[s],n,r,i);else r=ot(r)?!!r.capture:!!r,n=cn(n),e&&e[zt]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Yt(s=e.g[t],n,r,i))&&(qt(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=an(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Yt(t,n,r,i)),(n=-1<e?t[e]:null)&&rn(n))}function rn(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[zt])Xt(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(sn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=an(t))?(Xt(n,e),0==n.h&&(n.src=null,t[Jt]=null)):qt(e)}}}function sn(e){return e in Zt?Zt[e]:Zt[e]="on"+e}function on(e,t){if(e.fa)e=!0;else{t=new Ut(t,this);var n=e.listener,r=e.la||e.src;e.ia&&rn(e),e=n.call(r,t)}return e}function an(e){return(e=e[Jt])instanceof Qt?e:null}var ln="__closure_events_fn_"+(1e9*Math.random()>>>0);function cn(e){return"function"===typeof e?e:(e[ln]||(e[ln]=function(t){return e.handleEvent(t)}),e[ln])}function un(){pt.call(this),this.i=new Qt(this),this.S=this,this.J=null}function hn(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new yt(t,e);else if(t instanceof yt)t.target=t.target||e;else{var i=t;Gt(t=new yt(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=dn(o,r,!0,t)&&i}if(i=dn(o=t.g=e,r,!0,t)&&i,i=dn(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=dn(o=t.g=n[s],r,!1,t)&&i}function dn(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Xt(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}ft(un,pt),un.prototype[zt]=!0,un.prototype.removeEventListener=function(e,t,n,r){nn(this,e,t,n,r)},un.prototype.N=function(){if(un.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)qt(n[r]);delete t.g[e],t.h--}}this.J=null},un.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},un.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var fn=it.JSON.stringify;function pn(){var e=bn;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var gn=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new mn),(e=>e.reset()));class mn{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function vn(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function yn(e){it.setTimeout((()=>{throw e}),0)}let _n,wn=!1,bn=new class{constructor(){this.h=this.g=null}add(e,t){const n=gn.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},En=()=>{const e=it.Promise.resolve(void 0);_n=()=>{e.then(kn)}};var kn=()=>{for(var e;e=pn();){try{e.h.call(e.g)}catch(n){yn(n)}var t=gn;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}wn=!1};function Sn(e,t){un.call(this),this.h=e||1,this.g=t||it,this.j=ht(this.qb,this),this.l=Date.now()}function Tn(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Cn(e,t,n){if("function"===typeof e)n&&(e=ht(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ht(e.handleEvent,e)}return 2147483647<Number(t)?-1:it.setTimeout(e,t||0)}function An(e){e.g=Cn((()=>{e.g=null,e.i&&(e.i=!1,An(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}ft(Sn,un),(et=Sn.prototype).ga=!1,et.T=null,et.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),hn(this,"tick"),this.ga&&(Tn(this),this.start()))}},et.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},et.N=function(){Sn.$.N.call(this),Tn(this),delete this.g};class xn extends pt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:An(this)}N(){super.N(),this.g&&(it.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function In(e){pt.call(this),this.h=e,this.g={}}ft(In,pt);var Nn=[];function Pn(e,t,n,r){Array.isArray(n)||(n&&(Nn[0]=n.toString()),n=Nn);for(var i=0;i<n.length;i++){var s=$t(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Rn(e){Wt(e.g,(function(e,t){this.g.hasOwnProperty(t)&&rn(e)}),e),e.g={}}function Dn(){this.g=!0}function On(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return fn(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}In.prototype.N=function(){In.$.N.call(this),Rn(this)},In.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Dn.prototype.Ea=function(){this.g=!1},Dn.prototype.info=function(){};var Ln={},Mn=null;function jn(){return Mn=Mn||new un}function Un(e){yt.call(this,Ln.Ta,e)}function Fn(e){const t=jn();hn(t,new Un(t))}function zn(e,t){yt.call(this,Ln.STAT_EVENT,e),this.stat=t}function Vn(e){const t=jn();hn(t,new zn(t,e))}function Bn(e,t){yt.call(this,Ln.Ua,e),this.size=t}function qn(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return it.setTimeout((function(){e()}),t)}Ln.Ta="serverreachability",ft(Un,yt),Ln.STAT_EVENT="statevent",ft(zn,yt),Ln.Ua="timingevent",ft(Bn,yt);var Wn={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Hn={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Kn(){}function Gn(e){return e.h||(e.h=e.i())}function Qn(){}Kn.prototype.h=null;var Xn,Yn={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Jn(){yt.call(this,"d")}function Zn(){yt.call(this,"c")}function $n(){}function er(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new In(this),this.P=nr,e=It?125:void 0,this.V=new Sn(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new tr}function tr(){this.i=null,this.g="",this.h=!1}ft(Jn,yt),ft(Zn,yt),ft($n,Kn),$n.prototype.g=function(){return new XMLHttpRequest},$n.prototype.i=function(){return{}},Xn=new $n;var nr=45e3,rr={},ir={};function sr(e,t,n){e.L=1,e.A=Sr(_r(t)),e.u=n,e.S=!0,or(e,null)}function or(e,t){e.G=Date.now(),ur(e),e.B=_r(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),jr(n.i,"t",r),e.o=0,n=e.l.J,e.h=new tr,e.g=Ui(e.l,n?t:null,!e.u),0<e.O&&(e.M=new xn(ht(e.Pa,e,e.g),e.O)),Pn(e.U,e.g,"readystatechange",e.nb),t=e.I?Ht(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Fn(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function ar(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function lr(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=cr(e,n),r==ir){4==t&&(e.s=4,Vn(14),i=!1),On(e.j,e.m,null,"[Incomplete Response]");break}if(r==rr){e.s=4,Vn(15),On(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}On(e.j,e.m,r,null),gr(e,r)}ar(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Vn(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ni(t),t.M=!0,Vn(11))):(On(e.j,e.m,n,"[Invalid Chunked Response]"),pr(e),fr(e))}function cr(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?ir:(n=Number(t.substring(n,r)),isNaN(n)?rr:(r+=1)+n>t.length?ir:(t=t.slice(r,r+n),e.o=r+n,t))}function ur(e){e.Y=Date.now()+e.P,hr(e,e.P)}function hr(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=qn(ht(e.lb,e),t)}function dr(e){e.C&&(it.clearTimeout(e.C),e.C=null)}function fr(e){0==e.l.H||e.J||Di(e.l,e)}function pr(e){dr(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Tn(e.V),Rn(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function gr(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Wr(n.i,e)))if(!e.K&&Wr(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Ri(n),Ei(n)}Ii(n),Vn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=qn(ht(n.ib,n),6e3));if(1>=qr(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else Li(n,11)}else if((e.K||n.g==e)&&Ri(n),!wt(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Hr(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,kr(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=ji(r,r.J?r.pa:null,r.Y),o.K){Kr(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(dr(a),ur(a)),r.g=o}else xi(r);0<n.j.length&&Si(n)}else"stop"!=c[0]&&"close"!=c[0]||Li(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Li(n,7):bi(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Fn()}catch(c){}}function mr(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(st(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(st(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(st(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(et=er.prototype).setTimeout=function(e){this.P=e},et.nb=function(e){e=e.target;const t=this.M;t&&3==gi(e)?t.l():this.Pa(e)},et.Pa=function(e){try{if(e==this.g)e:{const u=gi(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||It||this.g&&(this.h.h||this.g.ja()||mi(this.g)))){this.J||4!=u||7==t||Fn(),dr(this);var n=this.g.da();this.ca=n;t:if(ar(this)){var r=mi(this.g);e="";var i=r.length,s=4==gi(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){pr(this),fr(this);var o="";break t}this.h.i=new it.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!wt(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.s=3,Vn(12),pr(this),fr(this);break e}On(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gr(this,n)}this.S?(lr(this,u,o),It&&this.i&&3==u&&(Pn(this.U,this.V,"tick",this.mb),this.V.start())):(On(this.j,this.m,o,null),gr(this,o)),4==u&&pr(this),this.i&&!this.J&&(4==u?Di(this.l,this):(this.i=!1,ur(this)))}else(function(e){const t={};e=(e.g&&2<=gi(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(wt(e[r]))continue;var n=vn(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Vn(12)):(this.s=0,Vn(13)),pr(this),fr(this)}}}catch(u){}},et.mb=function(){if(this.g){var e=gi(this.g),t=this.g.ja();this.o<t.length&&(dr(this),lr(this,e,t),this.i&&4!=e&&ur(this))}},et.cancel=function(){this.J=!0,pr(this)},et.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Fn(),Vn(17)),pr(this),this.s=2,fr(this)):hr(this,this.Y-e)};var vr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yr(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof yr){this.h=e.h,wr(this,e.j),this.s=e.s,this.g=e.g,br(this,e.m),this.l=e.l;var t=e.i,n=new Dr;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Er(this,n),this.o=e.o}else e&&(t=String(e).match(vr))?(this.h=!1,wr(this,t[1]||"",!0),this.s=Tr(t[2]||""),this.g=Tr(t[3]||"",!0),br(this,t[4]),this.l=Tr(t[5]||"",!0),Er(this,t[6]||"",!0),this.o=Tr(t[7]||"")):(this.h=!1,this.i=new Dr(null,this.h))}function _r(e){return new yr(e)}function wr(e,t,n){e.j=n?Tr(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function br(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Er(e,t,n){t instanceof Dr?(e.i=t,function(e,t){t&&!e.j&&(Or(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Lr(this,t),jr(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Cr(t,Pr)),e.i=new Dr(t,e.h))}function kr(e,t,n){e.i.set(t,n)}function Sr(e){return kr(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Tr(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Cr(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Ar),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ar(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}yr.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Cr(t,xr,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Cr(t,xr,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Cr(n,"/"==n.charAt(0)?Nr:Ir,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Cr(n,Rr)),e.join("")};var xr=/[#\/\?@]/g,Ir=/[#\?:]/g,Nr=/[#\?]/g,Pr=/[#\?@]/g,Rr=/#/g;function Dr(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Or(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Lr(e,t){Or(e),t=Ur(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Mr(e,t){return Or(e),t=Ur(e,t),e.g.has(t)}function jr(e,t,n){Lr(e,t),0<n.length&&(e.i=null,e.g.set(Ur(e,t),mt(n)),e.h+=n.length)}function Ur(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(et=Dr.prototype).add=function(e,t){Or(this),this.i=null,e=Ur(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},et.forEach=function(e,t){Or(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},et.ta=function(){Or(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},et.Z=function(e){Or(this);let t=[];if("string"===typeof e)Mr(this,e)&&(t=t.concat(this.g.get(Ur(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},et.set=function(e,t){return Or(this),this.i=null,Mr(this,e=Ur(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},et.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},et.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Fr=class{constructor(e,t){this.g=e,this.map=t}};function zr(e){this.l=e||Vr,it.PerformanceNavigationTiming?e=0<(e=it.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(it.g&&it.g.Ka&&it.g.Ka()&&it.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Vr=10;function Br(e){return!!e.h||!!e.g&&e.g.size>=e.j}function qr(e){return e.h?1:e.g?e.g.size:0}function Wr(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Hr(e,t){e.g?e.g.add(t):e.h=t}function Kr(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Gr(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return mt(e.i)}zr.prototype.cancel=function(){if(this.i=Gr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Qr,Xr=class{stringify(e){return it.JSON.stringify(e,void 0)}parse(e){return it.JSON.parse(e,void 0)}};function Yr(){this.g=new Xr}function Jr(e,t,n){const r=n||"";try{mr(e,(function(e,n){let i=e;ot(e)&&(i=fn(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Zr(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function $r(e){this.l=e.ec||null,this.j=e.ob||!1}function ei(e,t){un.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=ti,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ft($r,Kn),$r.prototype.g=function(){return new ei(this.l,this.j)},$r.prototype.i=(Qr={},function(){return Qr}),ft(ei,un);var ti=0;function ni(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function ri(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ii(e)}function ii(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(et=ei.prototype).open=function(e,t){if(this.readyState!=ti)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ii(this)},et.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||it).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},et.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ri(this)),this.readyState=ti},et.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ii(this)),this.g&&(this.readyState=3,ii(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof it.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ni(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},et.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ri(this):ii(this),3==this.readyState&&ni(this)}},et.Za=function(e){this.g&&(this.response=this.responseText=e,ri(this))},et.Ya=function(e){this.g&&(this.response=e,ri(this))},et.ka=function(){this.g&&ri(this)},et.setRequestHeader=function(e,t){this.v.append(e,t)},et.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},et.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ei.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var si=it.JSON.parse;function oi(e){un.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ai,this.L=this.M=!1}ft(oi,un);var ai="",li=/^https?$/i,ci=["POST","PUT"];function ui(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,hi(e),fi(e)}function hi(e){e.F||(e.F=!0,hn(e,"complete"),hn(e,"error"))}function di(e){if(e.h&&"undefined"!=typeof rt&&(!e.C[1]||4!=gi(e)||2!=e.da()))if(e.v&&4==gi(e))Cn(e.La,0,e);else if(hn(e,"readystatechange"),4==gi(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(vr)[1]||null;!i&&it.self&&it.self.location&&(i=it.self.location.protocol.slice(0,-1)),r=!li.test(i?i.toLowerCase():"")}n=r}if(n)hn(e,"complete"),hn(e,"success");else{e.m=6;try{var s=2<gi(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",hi(e)}}finally{fi(e)}}}function fi(e,t){if(e.g){pi(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||hn(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function pi(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(it.clearTimeout(e.A),e.A=null)}function gi(e){return e.g?e.g.readyState:0}function mi(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case ai:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(ks){return null}}function vi(e){let t="";return Wt(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function yi(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=vi(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):kr(e,t,n))}function _i(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function wi(e){this.Ga=0,this.j=[],this.l=new Dn,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=_i("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=_i("baseRetryDelayMs",5e3,e),this.hb=_i("retryDelaySeedMs",1e4,e),this.eb=_i("forwardChannelMaxRetries",2,e),this.xa=_i("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new zr(e&&e.concurrentRequestLimit),this.Ja=new Yr,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function bi(e){if(ki(e),3==e.H){var t=e.W++,n=_r(e.I);if(kr(n,"SID",e.K),kr(n,"RID",t),kr(n,"TYPE","terminate"),Ci(e,n),(t=new er(e,e.l,t)).L=2,t.A=Sr(_r(n)),n=!1,it.navigator&&it.navigator.sendBeacon)try{n=it.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&it.Image&&((new Image).src=t.A,n=!0),n||(t.g=Ui(t.l,null),t.g.ha(t.A)),t.G=Date.now(),ur(t)}Mi(e)}function Ei(e){e.g&&(Ni(e),e.g.cancel(),e.g=null)}function ki(e){Ei(e),e.u&&(it.clearTimeout(e.u),e.u=null),Ri(e),e.i.cancel(),e.m&&("number"===typeof e.m&&it.clearTimeout(e.m),e.m=null)}function Si(e){if(!Br(e.i)&&!e.m){e.m=!0;var t=e.Na;_n||En(),wn||(_n(),wn=!0),bn.add(t,e),e.C=0}}function Ti(e,t){var n;n=t?t.m:e.W++;const r=_r(e.I);kr(r,"SID",e.K),kr(r,"RID",n),kr(r,"AID",e.V),Ci(e,r),e.o&&e.s&&yi(r,e.o,e.s),n=new er(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Ai(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Hr(e.i,n),sr(n,r,t)}function Ci(e,t){e.na&&Wt(e.na,(function(e,n){kr(t,n,e)})),e.h&&mr({},(function(e,n){kr(t,n,e)}))}function Ai(e,t,n){n=Math.min(e.j.length,n);var r=e.h?ht(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{Jr(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function xi(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;_n||En(),wn||(_n(),wn=!0),bn.add(t,e),e.A=0}}function Ii(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=qn(ht(e.Ma,e),Oi(e,e.A)),e.A++,!0)}function Ni(e){null!=e.B&&(it.clearTimeout(e.B),e.B=null)}function Pi(e){e.g=new er(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=_r(e.wa);kr(t,"RID","rpc"),kr(t,"SID",e.K),kr(t,"AID",e.V),kr(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&kr(t,"TO",e.qa),kr(t,"TYPE","xmlhttp"),Ci(e,t),e.o&&e.s&&yi(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Sr(_r(t)),n.u=null,n.S=!0,or(n,e)}function Ri(e){null!=e.v&&(it.clearTimeout(e.v),e.v=null)}function Di(e,t){var n=null;if(e.g==t){Ri(e),Ni(e),e.g=null;var r=2}else{if(!Wr(e.i,t))return;n=t.F,Kr(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;hn(r=jn(),new Bn(r,n)),Si(e)}else xi(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(qr(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=qn(ht(e.Na,e,t),Oi(e,e.C)),e.C++,!0))}(e,t)||2==r&&Ii(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Li(e,5);break;case 4:Li(e,10);break;case 3:Li(e,6);break;default:Li(e,2)}}function Oi(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Li(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=ht(e.pb,e);n||(n=new yr("//www.google.com/images/cleardot.gif"),it.location&&"http"==it.location.protocol||wr(n,"https"),Sr(n)),function(e,t){const n=new Dn;if(it.Image){const r=new Image;r.onload=dt(Zr,n,r,"TestLoadImage: loaded",!0,t),r.onerror=dt(Zr,n,r,"TestLoadImage: error",!1,t),r.onabort=dt(Zr,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=dt(Zr,n,r,"TestLoadImage: timeout",!1,t),it.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Vn(2);e.H=0,e.h&&e.h.za(t),Mi(e),ki(e)}function Mi(e){if(e.H=0,e.ma=[],e.h){const t=Gr(e.i);0==t.length&&0==e.j.length||(vt(e.ma,t),vt(e.ma,e.j),e.i.i.length=0,mt(e.j),e.j.length=0),e.h.ya()}}function ji(e,t,n){var r=n instanceof yr?_r(n):new yr(n);if(""!=r.g)t&&(r.g=t+"."+r.g),br(r,r.m);else{var i=it.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new yr(null);r&&wr(s,r),t&&(s.g=t),i&&br(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&kr(r,n,t),kr(r,"VER",e.ra),Ci(e,r),r}function Ui(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new oi(new $r({ob:n})):new oi(e.va)).Oa(e.J),t}function Fi(){}function zi(){if(At&&!(10<=Number(jt)))throw Error("Environmental error: no available transport.")}function Vi(e,t){un.call(this),this.g=new wi(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!wt(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!wt(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Wi(this)}function Bi(e){Jn.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function qi(){Zn.call(this),this.status=1}function Wi(e){this.g=e}function Hi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Ki(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Gi(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(et=oi.prototype).Oa=function(e){this.M=e},et.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Xn.g(),this.C=this.u?Gn(this.u):Gn(Xn),this.g.onreadystatechange=ht(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void ui(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=it.FormData&&e instanceof it.FormData,!(0<=gt(ci,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{pi(this),0<this.B&&((this.L=function(e){return At&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ht(this.ua,this)):this.A=Cn(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){ui(this,s)}},et.ua=function(){"undefined"!=typeof rt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,hn(this,"timeout"),this.abort(8))},et.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,hn(this,"complete"),hn(this,"abort"),fi(this))},et.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),fi(this,!0)),oi.$.N.call(this)},et.La=function(){this.s||(this.G||this.v||this.l?di(this):this.kb())},et.kb=function(){di(this)},et.isActive=function(){return!!this.g},et.da=function(){try{return 2<gi(this)?this.g.status:-1}catch(Qr){return-1}},et.ja=function(){try{return this.g?this.g.responseText:""}catch(Qr){return""}},et.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),si(t)}},et.Ia=function(){return this.m},et.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(et=wi.prototype).ra=8,et.H=1,et.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new er(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Ht(s),Gt(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Ai(this,i,t),kr(n=_r(this.I),"RID",e),kr(n,"CVER",22),this.F&&kr(n,"X-HTTP-Session-Id",this.F),Ci(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(vi(s)))+"&"+t:this.o&&yi(n,this.o,s)),Hr(this.i,i),this.bb&&kr(n,"TYPE","init"),this.P?(kr(n,"$req",t),kr(n,"SID","null"),i.aa=!0,sr(i,n,null)):sr(i,n,t),this.H=2}}else 3==this.H&&(e?Ti(this,e):0==this.j.length||Br(this.i)||Ti(this))},et.Ma=function(){if(this.u=null,Pi(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=qn(ht(this.jb,this),e)}},et.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Vn(10),Ei(this),Pi(this))},et.ib=function(){null!=this.v&&(this.v=null,Ei(this),Ii(this),Vn(19))},et.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Vn(2)):(this.l.info("Failed to ping google.com"),Vn(1))},et.isActive=function(){return!!this.h&&this.h.isActive(this)},(et=Fi.prototype).Ba=function(){},et.Aa=function(){},et.za=function(){},et.ya=function(){},et.isActive=function(){return!0},et.Va=function(){},zi.prototype.g=function(e,t){return new Vi(e,t)},ft(Vi,un),Vi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Vn(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=ji(e,null,e.Y),Si(e)},Vi.prototype.close=function(){bi(this.g)},Vi.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=fn(e),e=n);t.j.push(new Fr(t.fb++,e)),3==t.H&&Si(t)},Vi.prototype.N=function(){this.g.h=null,delete this.j,bi(this.g),delete this.g,Vi.$.N.call(this)},ft(Bi,Jn),ft(qi,Zn),ft(Wi,Fi),Wi.prototype.Ba=function(){hn(this.g,"a")},Wi.prototype.Aa=function(e){hn(this.g,new Bi(e))},Wi.prototype.za=function(e){hn(this.g,new qi)},Wi.prototype.ya=function(){hn(this.g,"b")},ft(Hi,(function(){this.blockSize=-1})),Hi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Hi.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)Ki(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){Ki(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){Ki(this,r),i=0;break}}this.h=i,this.i+=t},Hi.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Qi={};function Xi(e){return-128<=e&&128>e?function(e,t){var n=Qi;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Gi([0|e],0>e?-1:0)})):new Gi([0|e],0>e?-1:0)}function Yi(e){if(isNaN(e)||!isFinite(e))return Zi;if(0>e)return rs(Yi(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Ji;return new Gi(t,0)}var Ji=4294967296,Zi=Xi(0),$i=Xi(1),es=Xi(16777216);function ts(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function ns(e){return-1==e.h}function rs(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Gi(n,~e.h).add($i)}function is(e,t){return e.add(rs(t))}function ss(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function os(e,t){this.g=e,this.h=t}function as(e,t){if(ts(t))throw Error("division by zero");if(ts(e))return new os(Zi,Zi);if(ns(e))return t=as(rs(e),t),new os(rs(t.g),rs(t.h));if(ns(t))return t=as(e,rs(t)),new os(rs(t.g),t.h);if(30<e.g.length){if(ns(e)||ns(t))throw Error("slowDivide_ only works with positive integers.");for(var n=$i,r=t;0>=r.X(e);)n=ls(n),r=ls(r);var i=cs(n,1),s=cs(r,1);for(r=cs(r,2),n=cs(n,2);!ts(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=cs(r,1),n=cs(n,1)}return t=is(e,i.R(t)),new os(i,t)}for(i=Zi;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Yi(n)).R(t);ns(o)||0<o.X(e);)o=(s=Yi(n-=r)).R(t);ts(s)&&(s=$i),i=i.add(s),e=is(e,o)}return new os(i,e)}function ls(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Gi(n,e.h)}function cs(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Gi(i,e.h)}(et=Gi.prototype).ea=function(){if(ns(this))return-rs(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Ji+r)*t,t*=Ji}return e},et.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(ts(this))return"0";if(ns(this))return"-"+rs(this).toString(e);for(var t=Yi(Math.pow(e,6)),n=this,r="";;){var i=as(n,t).g,s=((0<(n=is(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(ts(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},et.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},et.X=function(e){return ns(e=is(this,e))?-1:ts(e)?0:1},et.abs=function(){return ns(this)?rs(this):this},et.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Gi(n,-2147483648&n[n.length-1]?-1:0)},et.R=function(e){if(ts(this)||ts(e))return Zi;if(ns(this))return ns(e)?rs(this).R(rs(e)):rs(rs(this).R(e));if(ns(e))return rs(this.R(rs(e)));if(0>this.X(es)&&0>e.X(es))return Yi(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,ss(n,2*r+2*i),n[2*r+2*i+1]+=s*l,ss(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,ss(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,ss(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Gi(n,0)},et.gb=function(e){return as(this,e).h},et.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Gi(n,this.h&e.h)},et.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Gi(n,this.h|e.h)},et.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Gi(n,this.h^e.h)},zi.prototype.createWebChannel=zi.prototype.g,Vi.prototype.send=Vi.prototype.u,Vi.prototype.open=Vi.prototype.m,Vi.prototype.close=Vi.prototype.close,Wn.NO_ERROR=0,Wn.TIMEOUT=8,Wn.HTTP_ERROR=6,Hn.COMPLETE="complete",Qn.EventType=Yn,Yn.OPEN="a",Yn.CLOSE="b",Yn.ERROR="c",Yn.MESSAGE="d",un.prototype.listen=un.prototype.O,oi.prototype.listenOnce=oi.prototype.P,oi.prototype.getLastError=oi.prototype.Sa,oi.prototype.getLastErrorCode=oi.prototype.Ia,oi.prototype.getStatus=oi.prototype.da,oi.prototype.getResponseJson=oi.prototype.Wa,oi.prototype.getResponseText=oi.prototype.ja,oi.prototype.send=oi.prototype.ha,oi.prototype.setWithCredentials=oi.prototype.Oa,Hi.prototype.digest=Hi.prototype.l,Hi.prototype.reset=Hi.prototype.reset,Hi.prototype.update=Hi.prototype.j,Gi.prototype.add=Gi.prototype.add,Gi.prototype.multiply=Gi.prototype.R,Gi.prototype.modulo=Gi.prototype.gb,Gi.prototype.compare=Gi.prototype.X,Gi.prototype.toNumber=Gi.prototype.ea,Gi.prototype.toString=Gi.prototype.toString,Gi.prototype.getBits=Gi.prototype.D,Gi.fromNumber=Yi,Gi.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return rs(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Yi(Math.pow(n,8)),i=Zi,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=Yi(Math.pow(n,o)),i=i.R(o).add(Yi(a))):i=(i=i.R(r)).add(Yi(a))}return i};var us=nt.createWebChannelTransport=function(){return new zi},hs=nt.getStatEventTarget=function(){return jn()},ds=nt.ErrorCode=Wn,fs=nt.EventType=Hn,ps=nt.Event=Ln,gs=nt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ms=(nt.FetchXmlHttpFactory=$r,nt.WebChannel=Qn),vs=nt.XhrIo=oi,ys=nt.Md5=Hi,_s=nt.Integer=Gi;const ws="@firebase/firestore";class bs{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bs.UNAUTHENTICATED=new bs(null),bs.GOOGLE_CREDENTIALS=new bs("google-credentials-uid"),bs.FIRST_PARTY=new bs("first-party-uid"),bs.MOCK_USER=new bs("mock-user");let Es="10.7.2";const ks=new ae("@firebase/firestore");function Ss(){return ks.logLevel}function Ts(e){if(ks.logLevel<=ne.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(xs);ks.debug("Firestore (".concat(Es,"): ").concat(e),...i)}}function Cs(e){if(ks.logLevel<=ne.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(xs);ks.error("Firestore (".concat(Es,"): ").concat(e),...i)}}function As(e){if(ks.logLevel<=ne.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(xs);ks.warn("Firestore (".concat(Es,"): ").concat(e),...i)}}function xs(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Is(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Es,") INTERNAL ASSERTION FAILED: ")+e;throw Cs(t),new Error(t)}function Ns(e,t){e||Is()}function Ps(e,t){return e}const Rs={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ds extends N{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Os{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Ls{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Ms{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(bs.UNAUTHENTICATED)))}shutdown(){}}class js{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Us{constructor(e){this.t=e,this.currentUser=bs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Os;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Os,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Ts("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Ts("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Os)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Ts("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ns("string"==typeof t.accessToken),new Ls(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ns(null===e||"string"==typeof e),new bs(e)}}class Fs{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=bs.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class zs{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Fs(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(bs.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Vs{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Bs{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Ts("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Ts("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Ts("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Ts("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Ns("string"==typeof e.token),this.R=e.token,new Vs(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function qs(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Ws{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=qs(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Hs(e,t){return e<t?-1:e>t?1:0}function Ks(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class Gs{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ds(Rs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ds(Rs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ds(Rs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ds(Rs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Gs.fromMillis(Date.now())}static fromDate(e){return Gs.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Gs(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Hs(this.nanoseconds,e.nanoseconds):Hs(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Qs{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Qs(e)}static min(){return new Qs(new Gs(0,0))}static max(){return new Qs(new Gs(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Xs{constructor(e,t,n){void 0===t?t=0:t>e.length&&Is(),void 0===n?n=e.length-t:n>e.length-t&&Is(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Xs.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xs?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ys extends Xs{construct(e,t,n){return new Ys(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Ds(Rs.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new Ys(e)}static emptyPath(){return new Ys([])}}const Js=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Zs extends Xs{construct(e,t,n){return new Zs(e,t,n)}static isValidIdentifier(e){return Js.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Zs.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Zs(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Ds(Rs.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Ds(Rs.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Ds(Rs.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Ds(Rs.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Zs(t)}static emptyPath(){return new Zs([])}}class $s{constructor(e){this.path=e}static fromPath(e){return new $s(Ys.fromString(e))}static fromName(e){return new $s(Ys.fromString(e).popFirst(5))}static empty(){return new $s(Ys.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ys.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ys.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $s(new Ys(e.slice()))}}class eo{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}eo.UNKNOWN_ID=-1;function to(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Qs.fromTimestamp(1e9===r?new Gs(n+1,0):new Gs(n,r));return new ro(i,$s.empty(),t)}function no(e){return new ro(e.readTime,e.key,-1)}class ro{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ro(Qs.min(),$s.empty(),-1)}static max(){return new ro(Qs.max(),$s.empty(),-1)}}function io(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=$s.comparator(e.documentKey,t.documentKey),0!==n?n:Hs(e.largestBatchId,t.largestBatchId))}const so="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oo{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ao(e){if(e.code!==Rs.FAILED_PRECONDITION||e.message!==so)throw e;Ts("LocalStore","Unexpectedly lost primary lease")}class lo{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Is(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new lo(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof lo?t:lo.resolve(t)}catch(e){return lo.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):lo.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):lo.reject(t)}static resolve(e){return new lo(((t,n)=>{t(e)}))}static reject(e){return new lo(((t,n)=>{n(e)}))}static waitFor(e){return new lo(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=lo.resolve(!1);for(const n of e)t=t.next((e=>e?lo.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new lo(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new lo(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class co{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Os,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new fo(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=yo(t.target.error);this.V.reject(new fo(e,n))}}static open(e,t,n,r){try{return new co(t,e.transaction(r,n))}catch(e){throw new fo(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ts("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new go(t)}}class uo{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===uo.S(S())&&Cs("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ts("SimpleDb","Removing database:",e),mo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!I())return!1;if(uo.C())return!0;const e=S(),t=uo.S(e),n=0<t&&t<10,r=uo.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(Ts("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new fo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Ds(Rs.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Ds(Rs.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new fo(e,r))},r.onupgradeneeded=e=>{Ts("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{Ts("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=co.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),lo.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Ts("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class ho{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return mo(this.k.delete())}}class fo extends Ds{constructor(e,t){super(Rs.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function po(e){return"IndexedDbTransactionError"===e.name}class go{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Ts("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Ts("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),mo(n)}add(e){return Ts("SimpleDb","ADD",this.store.name,e,e),mo(this.store.add(e))}get(e){return mo(this.store.get(e)).next((t=>(void 0===t&&(t=null),Ts("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Ts("SimpleDb","DELETE",this.store.name,e),mo(this.store.delete(e))}count(){return Ts("SimpleDb","COUNT",this.store.name),mo(this.store.count())}W(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new lo(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new lo(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){Ts("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new lo(((n,r)=>{t.onerror=e=>{const t=yo(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new lo(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new ho(i),o=t(i.primaryKey,i.value,s);if(o instanceof lo){const e=o.catch((e=>(s.done(),lo.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>lo.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function mo(e){return new lo(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=yo(e.target.error);n(t)}}))}let vo=!1;function yo(e){const t=uo.S(S());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Ds("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return vo||(vo=!0,setTimeout((()=>{throw e}),0)),e}}return e}class _o{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function wo(e){return null==e}function bo(e){return 0===e&&1/e==-1/0}function Eo(e){return"number"==typeof e&&Number.isInteger(e)&&!bo(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}_o._e=-1;const ko=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],So=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],To=So;function Co(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ao(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function xo(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Io{constructor(e,t){this.comparator=e,this.root=t||Po.EMPTY}insert(e,t){return new Io(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Po.BLACK,null,null))}remove(e){return new Io(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Po.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new No(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new No(this.root,e,this.comparator,!1)}getReverseIterator(){return new No(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new No(this.root,e,this.comparator,!0)}}class No{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Po{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Po.RED,this.left=null!=r?r:Po.EMPTY,this.right=null!=i?i:Po.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Po(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Po.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Po.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Po.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Po.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Is();if(this.right.isRed())throw Is();const e=this.left.check();if(e!==this.right.check())throw Is();return e+(this.isRed()?0:1)}}Po.EMPTY=null,Po.RED=!0,Po.BLACK=!1,Po.EMPTY=new class{constructor(){this.size=0}get key(){throw Is()}get value(){throw Is()}get color(){throw Is()}get left(){throw Is()}get right(){throw Is()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Po(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ro{constructor(e){this.comparator=e,this.data=new Io(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Do(this.data.getIterator())}getIteratorFrom(e){return new Do(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Ro))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ro(this.comparator);return t.data=e,t}}class Do{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Oo{constructor(e){this.fields=e,e.sort(Zs.comparator)}static empty(){return new Oo([])}unionWith(e){let t=new Ro(Zs.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Oo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ks(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Lo extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Mo{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Lo("Invalid base64 string: "+e):e}}(e);return new Mo(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Mo(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Hs(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mo.EMPTY_BYTE_STRING=new Mo("");const jo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Uo(e){if(Ns(!!e),"string"==typeof e){let t=0;const n=jo.exec(e);if(Ns(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Fo(e.seconds),nanos:Fo(e.nanos)}}function Fo(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function zo(e){return"string"==typeof e?Mo.fromBase64String(e):Mo.fromUint8Array(e)}function Vo(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Bo(e){const t=e.mapValue.fields.__previous_value__;return Vo(t)?Bo(t):t}function qo(e){const t=Uo(e.mapValue.fields.__local_write_time__.timestampValue);return new Gs(t.seconds,t.nanos)}class Wo{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class Ho{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ho("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ho&&e.projectId===this.projectId&&e.database===this.database}}const Ko={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Go(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Vo(e)?4:aa(e)?9007199254740991:10:Is()}function Qo(e,t){if(e===t)return!0;const n=Go(e);if(n!==Go(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return qo(e).isEqual(qo(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Uo(e.timestampValue),r=Uo(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return zo(e.bytesValue).isEqual(zo(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Fo(e.geoPointValue.latitude)===Fo(t.geoPointValue.latitude)&&Fo(e.geoPointValue.longitude)===Fo(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Fo(e.integerValue)===Fo(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Fo(e.doubleValue),r=Fo(t.doubleValue);return n===r?bo(n)===bo(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ks(e.arrayValue.values||[],t.arrayValue.values||[],Qo);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Co(n)!==Co(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Qo(n[i],r[i])))return!1;return!0}(e,t);default:return Is()}}function Xo(e,t){return void 0!==(e.values||[]).find((e=>Qo(e,t)))}function Yo(e,t){if(e===t)return 0;const n=Go(e),r=Go(t);if(n!==r)return Hs(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Hs(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Fo(e.integerValue||e.doubleValue),r=Fo(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Jo(e.timestampValue,t.timestampValue);case 4:return Jo(qo(e),qo(t));case 5:return Hs(e.stringValue,t.stringValue);case 6:return function(e,t){const n=zo(e),r=zo(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Hs(n[i],r[i]);if(0!==e)return e}return Hs(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Hs(Fo(e.latitude),Fo(t.latitude));return 0!==n?n:Hs(Fo(e.longitude),Fo(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Yo(n[i],r[i]);if(e)return e}return Hs(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Ko.mapValue&&t===Ko.mapValue)return 0;if(e===Ko.mapValue)return 1;if(t===Ko.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Hs(r[o],s[o]);if(0!==e)return e;const t=Yo(n[r[o]],i[s[o]]);if(0!==t)return t}return Hs(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Is()}}function Jo(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Hs(e,t);const n=Uo(e),r=Uo(t),i=Hs(n.seconds,r.seconds);return 0!==i?i:Hs(n.nanos,r.nanos)}function Zo(e){return $o(e)}function $o(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Uo(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return zo(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return $s.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=$o(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat($o(e.fields[i]));return n+"}"}(e.mapValue):Is()}function ea(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ta(e){return!!e&&"integerValue"in e}function na(e){return!!e&&"arrayValue"in e}function ra(e){return!!e&&"nullValue"in e}function ia(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function sa(e){return!!e&&"mapValue"in e}function oa(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ao(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=oa(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=oa(e.arrayValue.values[n]);return t}return Object.assign({},e)}function aa(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class la{constructor(e){this.value=e}static empty(){return new la({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!sa(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=oa(t)}setAll(e){let t=Zs.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=oa(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());sa(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];sa(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Ao(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new la(oa(this.value))}}function ca(e){const t=[];return Ao(e.fields,((e,n)=>{const r=new Zs([e]);if(sa(n)){const e=ca(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Oo(t)}class ua{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new ua(e,0,Qs.min(),Qs.min(),Qs.min(),la.empty(),0)}static newFoundDocument(e,t,n,r){return new ua(e,1,t,Qs.min(),n,r,0)}static newNoDocument(e,t){return new ua(e,2,t,Qs.min(),Qs.min(),la.empty(),0)}static newUnknownDocument(e,t){return new ua(e,3,t,Qs.min(),Qs.min(),la.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Qs.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=la.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=la.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Qs.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ua&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ua(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class ha{constructor(e,t){this.position=e,this.inclusive=t}}function da(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?$s.comparator($s.fromName(o.referenceValue),n.key):Yo(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function fa(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Qo(e.position[n],t.position[n]))return!1;return!0}class pa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function ga(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class ma{}class va extends ma{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ta(e,t,n):"array-contains"===t?new Ia(e,n):"in"===t?new Na(e,n):"not-in"===t?new Pa(e,n):"array-contains-any"===t?new Ra(e,n):new va(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Ca(e,n):new Aa(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Yo(t,this.value)):null!==t&&Go(this.value)===Go(t)&&this.matchesComparison(Yo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Is()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ya extends ma{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new ya(e,t)}matches(e){return _a(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function _a(e){return"and"===e.op}function wa(e){return ba(e)&&_a(e)}function ba(e){for(const t of e.filters)if(t instanceof ya)return!1;return!0}function Ea(e){if(e instanceof va)return e.field.canonicalString()+e.op.toString()+Zo(e.value);if(wa(e))return e.filters.map((e=>Ea(e))).join(",");{const t=e.filters.map((e=>Ea(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function ka(e,t){return e instanceof va?function(e,t){return t instanceof va&&e.op===t.op&&e.field.isEqual(t.field)&&Qo(e.value,t.value)}(e,t):e instanceof ya?function(e,t){return t instanceof ya&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&ka(n,t.filters[r])),!0)}(e,t):void Is()}function Sa(e){return e instanceof va?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Zo(e.value))}(e):e instanceof ya?function(e){return e.op.toString()+" {"+e.getFilters().map(Sa).join(" ,")+"}"}(e):"Filter"}class Ta extends va{constructor(e,t,n){super(e,t,n),this.key=$s.fromName(n.referenceValue)}matches(e){const t=$s.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ca extends va{constructor(e,t){super(e,"in",t),this.keys=xa("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Aa extends va{constructor(e,t){super(e,"not-in",t),this.keys=xa("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function xa(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>$s.fromName(e.referenceValue)))}class Ia extends va{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return na(t)&&Xo(t.arrayValue,this.value)}}class Na extends va{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Xo(this.value.arrayValue,t)}}class Pa extends va{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Xo(this.value.arrayValue,t)}}class Ra extends va{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!na(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Xo(this.value.arrayValue,e)))}}class Da{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function Oa(e){return new Da(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function La(e){const t=Ps(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Ea(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),wo(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Zo(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Zo(e))).join(",")),t.ce=e}return t.ce}function Ma(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ga(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ka(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!fa(e.startAt,t.startAt)&&fa(e.endAt,t.endAt)}function ja(e){return $s.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Ua{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Fa(e,t,n,r,i,s,o,a){return new Ua(e,t,n,r,i,s,o,a)}function za(e){return new Ua(e)}function Va(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Ba(e){return null!==e.collectionGroup}function qa(e){const t=Ps(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Ro(Zs.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new pa(r,n))})),e.has(Zs.keyField().canonicalString())||t.le.push(new pa(Zs.keyField(),n))}return t.le}function Wa(e){const t=Ps(e);return t.he||(t.he=Ha(t,qa(e))),t.he}function Ha(e,t){if("F"===e.limitType)return Oa(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new pa(e.field,t)}));const n=e.endAt?new ha(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ha(e.startAt.position,e.startAt.inclusive):null;return Oa(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ka(e,t){const n=e.filters.concat([t]);return new Ua(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ga(e,t,n){return new Ua(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Qa(e,t){return Ma(Wa(e),Wa(t))&&e.limitType===t.limitType}function Xa(e){return"".concat(La(Wa(e)),"|lt:").concat(e.limitType)}function Ya(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Sa(e))).join(", "),"]")),wo(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Zo(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Zo(e))).join(",")),"Target(".concat(t,")")}(Wa(e)),"; limitType=").concat(e.limitType,")")}function Ja(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):$s.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of qa(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=da(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,qa(e),t))&&!(e.endAt&&!function(e,t,n){const r=da(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,qa(e),t))}(e,t)}function Za(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function $a(e){return(t,n)=>{let r=!1;for(const i of qa(e)){const e=el(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function el(e,t,n){const r=e.field.isKeyField()?$s.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Yo(r,i):Is()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Is()}}class tl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ao(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return xo(this.inner)}size(){return this.innerSize}}const nl=new Io($s.comparator);function rl(){return nl}const il=new Io($s.comparator);function sl(){let e=il;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function ol(e){let t=il;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function al(){return cl()}function ll(){return cl()}function cl(){return new tl((e=>e.toString()),((e,t)=>e.isEqual(t)))}const ul=new Io($s.comparator),hl=new Ro($s.comparator);function dl(){let e=hl;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const fl=new Ro(Hs);function pl(){return fl}function gl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bo(t)?"-0":t}}function ml(e){return{integerValue:""+e}}function vl(e,t){return Eo(t)?ml(t):gl(e,t)}class yl{constructor(){this._=void 0}}function _l(e,t,n){return e instanceof El?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Vo(t)&&(t=Bo(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof kl?Sl(e,t):e instanceof Tl?Cl(e,t):function(e,t){const n=bl(e,t),r=xl(n)+xl(e.Ie);return ta(n)&&ta(e.Ie)?ml(r):gl(e.serializer,r)}(e,t)}function wl(e,t,n){return e instanceof kl?Sl(e,t):e instanceof Tl?Cl(e,t):n}function bl(e,t){return e instanceof Al?function(e){return ta(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class El extends yl{}class kl extends yl{constructor(e){super(),this.elements=e}}function Sl(e,t){const n=Il(t);for(const r of e.elements)n.some((e=>Qo(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Tl extends yl{constructor(e){super(),this.elements=e}}function Cl(e,t){let n=Il(t);for(const r of e.elements)n=n.filter((e=>!Qo(e,r)));return{arrayValue:{values:n}}}class Al extends yl{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function xl(e){return Fo(e.integerValue||e.doubleValue)}function Il(e){return na(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Nl{constructor(e,t){this.field=e,this.transform=t}}class Pl{constructor(e,t){this.version=e,this.transformResults=t}}class Rl{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Rl}static exists(e){return new Rl(void 0,e)}static updateTime(e){return new Rl(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Dl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Ol{}function Ll(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Hl(e.key,Rl.none()):new zl(e.key,e.data,Rl.none());{const n=e.data,r=la.empty();let i=new Ro(Zs.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Vl(e.key,r,new Oo(i.toArray()),Rl.none())}}function Ml(e,t,n){e instanceof zl?function(e,t,n){const r=e.value.clone(),i=ql(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Vl?function(e,t,n){if(!Dl(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=ql(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Bl(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function jl(e,t,n,r){return e instanceof zl?function(e,t,n,r){if(!Dl(e.precondition,t))return n;const i=e.value.clone(),s=Wl(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Vl?function(e,t,n,r){if(!Dl(e.precondition,t))return n;const i=Wl(e.fieldTransforms,r,t),s=t.data;return s.setAll(Bl(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Dl(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Ul(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=bl(r.transform,e||null);null!=i&&(null===n&&(n=la.empty()),n.set(r.field,i))}return n||null}function Fl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ks(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof kl&&t instanceof kl||e instanceof Tl&&t instanceof Tl?Ks(e.elements,t.elements,Qo):e instanceof Al&&t instanceof Al?Qo(e.Ie,t.Ie):e instanceof El&&t instanceof El}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class zl extends Ol{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Vl extends Ol{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Bl(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function ql(e,t,n){const r=new Map;Ns(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,wl(o,a,n[i]))}return r}function Wl(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,_l(e,s,t))}return r}class Hl extends Ol{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Kl extends Ol{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Gl{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Ml(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=jl(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=jl(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=ll();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Ll(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Qs.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),dl())}isEqual(e){return this.batchId===e.batchId&&Ks(this.mutations,e.mutations,((e,t)=>Fl(e,t)))&&Ks(this.baseMutations,e.baseMutations,((e,t)=>Fl(e,t)))}}class Ql{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ns(e.mutations.length===n.length);let r=ul;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Ql(e,t,n,r)}}class Xl{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Yl{constructor(e,t){this.count=e,this.unchangedNames=t}}var Jl,Zl;function $l(e){switch(e){default:return Is();case Rs.CANCELLED:case Rs.UNKNOWN:case Rs.DEADLINE_EXCEEDED:case Rs.RESOURCE_EXHAUSTED:case Rs.INTERNAL:case Rs.UNAVAILABLE:case Rs.UNAUTHENTICATED:return!1;case Rs.INVALID_ARGUMENT:case Rs.NOT_FOUND:case Rs.ALREADY_EXISTS:case Rs.PERMISSION_DENIED:case Rs.FAILED_PRECONDITION:case Rs.ABORTED:case Rs.OUT_OF_RANGE:case Rs.UNIMPLEMENTED:case Rs.DATA_LOSS:return!0}}function ec(e){if(void 0===e)return Cs("GRPC error has no .code"),Rs.UNKNOWN;switch(e){case Jl.OK:return Rs.OK;case Jl.CANCELLED:return Rs.CANCELLED;case Jl.UNKNOWN:return Rs.UNKNOWN;case Jl.DEADLINE_EXCEEDED:return Rs.DEADLINE_EXCEEDED;case Jl.RESOURCE_EXHAUSTED:return Rs.RESOURCE_EXHAUSTED;case Jl.INTERNAL:return Rs.INTERNAL;case Jl.UNAVAILABLE:return Rs.UNAVAILABLE;case Jl.UNAUTHENTICATED:return Rs.UNAUTHENTICATED;case Jl.INVALID_ARGUMENT:return Rs.INVALID_ARGUMENT;case Jl.NOT_FOUND:return Rs.NOT_FOUND;case Jl.ALREADY_EXISTS:return Rs.ALREADY_EXISTS;case Jl.PERMISSION_DENIED:return Rs.PERMISSION_DENIED;case Jl.FAILED_PRECONDITION:return Rs.FAILED_PRECONDITION;case Jl.ABORTED:return Rs.ABORTED;case Jl.OUT_OF_RANGE:return Rs.OUT_OF_RANGE;case Jl.UNIMPLEMENTED:return Rs.UNIMPLEMENTED;case Jl.DATA_LOSS:return Rs.DATA_LOSS;default:return Is()}}(Zl=Jl||(Jl={}))[Zl.OK=0]="OK",Zl[Zl.CANCELLED=1]="CANCELLED",Zl[Zl.UNKNOWN=2]="UNKNOWN",Zl[Zl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zl[Zl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zl[Zl.NOT_FOUND=5]="NOT_FOUND",Zl[Zl.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zl[Zl.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zl[Zl.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zl[Zl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zl[Zl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zl[Zl.ABORTED=10]="ABORTED",Zl[Zl.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zl[Zl.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zl[Zl.INTERNAL=13]="INTERNAL",Zl[Zl.UNAVAILABLE=14]="UNAVAILABLE",Zl[Zl.DATA_LOSS=15]="DATA_LOSS";let tc=null;function nc(){return new TextEncoder}const rc=new _s([4294967295,4294967295],0);function ic(e){const t=nc().encode(e),n=new ys;return n.update(t),new Uint8Array(n.digest())}function sc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new _s([n,r],0),new _s([i,s],0)]}class oc{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ac("Invalid padding: ".concat(t));if(n<0)throw new ac("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new ac("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new ac("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=_s.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(_s.fromNumber(n)));return 1===r.compare(rc)&&(r=new _s([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=ic(e),[n,r]=sc(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new oc(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=ic(e),[n,r]=sc(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ac extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class lc{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,cc.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new lc(Qs.min(),r,new Io(Hs),rl(),dl())}}class cc{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new cc(n,t,dl(),dl(),dl())}}class uc{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class hc{constructor(e,t){this.targetId=e,this.fe=t}}class dc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Mo.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class fc{constructor(){this.ge=0,this.pe=mc(),this.ye=Mo.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=dl(),t=dl(),n=dl();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Is()}})),new cc(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=mc()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Ns(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class pc{constructor(e){this.Le=e,this.ke=new Map,this.qe=rl(),this.Qe=gc(),this.Ke=new Io(Hs)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:Is()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(ja(i))if(0===n){const e=new $s(i.path);this.We(t,e,ua.newNoDocument(e,Qs.min()))}else Ns(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==tc||tc.tt(function(e,t,n,r,i){var s,o,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Le.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=zo(n).toUint8Array()}catch(e){if(e instanceof Lo)return As("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new oc(s,r,i)}catch(e){return As(e instanceof ac?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&ja(i.target)){const t=new $s(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,ua.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=dl();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new lc(e,t,this.Ke,this.qe,n);return this.qe=rl(),this.Qe=gc(),this.Ke=new Io(Hs),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new fc,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Ro(Hs),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Ts("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new fc),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function gc(){return new Io($s.comparator)}function mc(){return new Io($s.comparator)}const vc={asc:"ASCENDING",desc:"DESCENDING"},yc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_c={and:"AND",or:"OR"};class wc{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function bc(e,t){return e.useProto3Json||wo(t)?t:{value:t}}function Ec(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function kc(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Sc(e,t){return Ec(e,t.toTimestamp())}function Tc(e){return Ns(!!e),Qs.fromTimestamp(function(e){const t=Uo(e);return new Gs(t.seconds,t.nanos)}(e))}function Cc(e,t){return Ac(e,t).canonicalString()}function Ac(e,t){const n=function(e){return new Ys(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function xc(e){const t=Ys.fromString(e);return Ns(Qc(t)),t}function Ic(e,t){return Cc(e.databaseId,t.path)}function Nc(e,t){const n=xc(t);if(n.get(1)!==e.databaseId.projectId)throw new Ds(Rs.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ds(Rs.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new $s(Oc(n))}function Pc(e,t){return Cc(e.databaseId,t)}function Rc(e){const t=xc(e);return 4===t.length?Ys.emptyPath():Oc(t)}function Dc(e){return new Ys(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Oc(e){return Ns(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Lc(e,t,n){return{name:Ic(e,t),fields:n.value.mapValue.fields}}function Mc(e,t){let n;if(t instanceof zl)n={update:Lc(e,t.key,t.value)};else if(t instanceof Hl)n={delete:Ic(e,t.key)};else if(t instanceof Vl)n={update:Lc(e,t.key,t.data),updateMask:Gc(t.fieldMask)};else{if(!(t instanceof Kl))return Is();n={verify:Ic(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof El)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof kl)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Tl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Al)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Is()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Sc(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Is()}(e,t.precondition)),n}function jc(e,t){return{documents:[Pc(e,t.path)]}}function Uc(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Pc(e,i);const s=function(e){if(0!==e.length)return Kc(ya.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Wc(e.field),direction:Vc(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=bc(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:i}}function Fc(e){let t=Rc(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ns(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=zc(e);return t instanceof ya&&wa(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new pa(Hc(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,wo(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new ha(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new ha(n,t)}(n.endAt)),Fa(t,i,o,s,a,"F",l,c)}function zc(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Hc(e.unaryFilter.field);return va.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Hc(e.unaryFilter.field);return va.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Hc(e.unaryFilter.field);return va.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Hc(e.unaryFilter.field);return va.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Is()}}(e):void 0!==e.fieldFilter?function(e){return va.create(Hc(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Is()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ya.create(e.compositeFilter.filters.map((e=>zc(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Is()}}(e.compositeFilter.op))}(e):Is()}function Vc(e){return vc[e]}function Bc(e){return yc[e]}function qc(e){return _c[e]}function Wc(e){return{fieldPath:e.canonicalString()}}function Hc(e){return Zs.fromServerFormat(e.fieldPath)}function Kc(e){return e instanceof va?function(e){if("=="===e.op){if(ia(e.value))return{unaryFilter:{field:Wc(e.field),op:"IS_NAN"}};if(ra(e.value))return{unaryFilter:{field:Wc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ia(e.value))return{unaryFilter:{field:Wc(e.field),op:"IS_NOT_NAN"}};if(ra(e.value))return{unaryFilter:{field:Wc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wc(e.field),op:Bc(e.op),value:e.value}}}(e):e instanceof ya?function(e){const t=e.getFilters().map((e=>Kc(e)));return 1===t.length?t[0]:{compositeFilter:{op:qc(e.op),filters:t}}}(e):Is()}function Gc(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Qc(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Xc{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Qs.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Qs.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Mo.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Xc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Xc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Yc{constructor(e){this.ct=e}}function Jc(e){const t=Fc({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ga(t,t.limit,"L"):t}class Zc{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Fo(e.integerValue));else if("doubleValue"in e){const n=Fo(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),bo(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At("".concat(n.seconds||"")),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(zo(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?aa(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Is()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),$s.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}Zc.bt=new Zc;class $c{constructor(){this._n=new eu}addToCollectionParentIndex(e,t){return this._n.add(t),lo.resolve()}getCollectionParents(e,t){return lo.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return lo.resolve()}deleteFieldIndex(e,t){return lo.resolve()}deleteAllFieldIndexes(e){return lo.resolve()}createTargetIndexes(e,t){return lo.resolve()}getDocumentsMatchingTarget(e,t){return lo.resolve(null)}getIndexType(e,t){return lo.resolve(0)}getFieldIndexes(e,t){return lo.resolve([])}getNextCollectionGroupToUpdate(e){return lo.resolve(null)}getMinOffset(e,t){return lo.resolve(ro.min())}getMinOffsetFromCollectionGroup(e,t){return lo.resolve(ro.min())}updateCollectionGroup(e,t,n){return lo.resolve()}updateIndexEntries(e,t){return lo.resolve()}}class eu{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ro(Ys.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ro(Ys.comparator)).toArray()}}new Uint8Array(0);class tu{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new tu(e,tu.DEFAULT_COLLECTION_PERCENTILE,tu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}tu.DEFAULT_COLLECTION_PERCENTILE=10,tu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tu.DEFAULT=new tu(41943040,tu.DEFAULT_COLLECTION_PERCENTILE,tu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tu.DISABLED=new tu(-1,0,0);class nu{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new nu(0)}static Bn(){return new nu(-1)}}class ru{constructor(){this.changes=new tl((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ua.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?lo.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class iu{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class su{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&jl(n.mutation,e,Oo.empty(),Gs.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,dl()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dl();const r=al();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=sl();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=al();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,dl())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=rl();const s=cl(),o=cl();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Vl)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),jl(o.mutation,t,o.mutation.getFieldMask(),Gs.now())):s.set(t.key,Oo.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new iu(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=cl();let r=new Io(((e,t)=>e-t)),i=dl();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Oo.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||dl()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=ll();l.forEach((e=>{if(!i.has(e)){const r=Ll(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return lo.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return $s.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ba(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):lo.resolve(al());let o=-1,a=i;return s.next((t=>lo.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?lo.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,dl()))).next((e=>({batchId:o,changes:ol(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $s(t)).next((e=>{let t=sl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=sl();return this.indexManager.getCollectionParents(e,i).next((o=>lo.forEach(o,(o=>{const a=function(e,t){return new Ua(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,ua.newInvalidDocument(r)))}));let n=sl();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&jl(s.mutation,r,Oo.empty(),Gs.now()),Ja(t,r)&&(n=n.insert(e,r))})),n}))}}class ou{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return lo.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Tc(e.createTime)}}(t)),lo.resolve()}getNamedQuery(e,t){return lo.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:Jc(e.bundledQuery),readTime:Tc(e.readTime)}}(t)),lo.resolve()}}class au{constructor(){this.overlays=new Io($s.comparator),this.hr=new Map}getOverlay(e,t){return lo.resolve(this.overlays.get(t))}getOverlays(e,t){const n=al();return lo.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),lo.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),lo.resolve()}getOverlaysForCollection(e,t,n){const r=al(),i=t.length+1,s=new $s(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return lo.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Io(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=al(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=al(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return lo.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Xl(t,n));let i=this.hr.get(t);void 0===i&&(i=dl(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class lu{constructor(){this.Pr=new Ro(cu.Ir),this.Tr=new Ro(cu.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new cu(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new cu(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new $s(new Ys([])),n=new cu(t,e),r=new cu(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new $s(new Ys([])),n=new cu(t,e),r=new cu(t,e+1);let i=dl();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new cu(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class cu{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return $s.comparator(e.key,t.key)||Hs(e.pr,t.pr)}static Er(e,t){return Hs(e.pr,t.pr)||$s.comparator(e.key,t.key)}}class uu{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Ro(cu.Ir)}checkEmpty(e){return lo.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Gl(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.wr=this.wr.add(new cu(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return lo.resolve(s)}lookupMutationBatch(e,t){return lo.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return lo.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return lo.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return lo.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new cu(t,0),r=new cu(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),lo.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ro(Hs);return t.forEach((e=>{const t=new cu(e,0),r=new cu(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),lo.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;$s.isDocumentKey(i)||(i=i.child(""));const s=new cu(new $s(i),0);let o=new Ro(Hs);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),s),lo.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Ns(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return lo.forEach(t.mutations,(r=>{const i=new cu(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new cu(t,0),r=this.wr.firstAfterOrEqual(n);return lo.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,lo.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class hu{constructor(e){this.vr=e,this.docs=new Io($s.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return lo.resolve(n?n.document.mutableCopy():ua.newInvalidDocument(t))}getEntries(e,t){let n=rl();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ua.newInvalidDocument(e))})),lo.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=rl();const s=t.path,o=new $s(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||io(no(o),n)<=0||(r.has(o.key)||Ja(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return lo.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Is()}Fr(e,t){return lo.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new du(this)}getSize(e){return lo.resolve(this.size)}}class du extends ru{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),lo.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class fu{constructor(e){this.persistence=e,this.Mr=new tl((e=>La(e)),Ma),this.lastRemoteSnapshotVersion=Qs.min(),this.highestTargetId=0,this.Or=0,this.Nr=new lu,this.targetCount=0,this.Br=nu.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),lo.resolve()}getLastRemoteSnapshotVersion(e){return lo.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return lo.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),lo.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),lo.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new nu(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,lo.resolve()}updateTargetData(e,t){return this.qn(t),lo.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,lo.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),lo.waitFor(i).next((()=>r))}getTargetCount(e){return lo.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return lo.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),lo.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),lo.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),lo.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return lo.resolve(n)}containsKey(e,t){return lo.resolve(this.Nr.containsKey(t))}}class pu{constructor(e,t){this.Lr={},this.overlays={},this.kr=new _o(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new fu(this),this.indexManager=new $c,this.remoteDocumentCache=function(e){return new hu(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new Yc(t),this.$r=new ou(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new au,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Lr[e.toKey()];return n||(n=new uu(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){Ts("MemoryPersistence","Starting transaction:",e);const r=new gu(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return lo.or(Object.values(this.Lr).map((n=>()=>n.containsKey(e,t))))}}class gu extends oo{constructor(e){super(),this.currentSequenceNumber=e}}class mu{constructor(e){this.persistence=e,this.zr=new lu,this.jr=null}static Hr(e){return new mu(e)}get Jr(){if(this.jr)return this.jr;throw Is()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),lo.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),lo.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),lo.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return lo.forEach(this.Jr,(n=>{const r=$s.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,Qs.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return lo.or([()=>lo.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class vu{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=dl(),r=dl();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new vu(e,t.fromCache,n,r)}}class yu{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class _u{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=x()?8:uo.v(S())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new yu;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(Ss()<=ne.DEBUG&&Ts("QueryEngine","SDK will not create cache indexes for query:",Ya(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),lo.resolve()):(Ss()<=ne.DEBUG&&Ts("QueryEngine","Query:",Ya(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(Ss()<=ne.DEBUG&&Ts("QueryEngine","The SDK decides to create cache indexes for query:",Ya(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wa(t))):lo.resolve())}ji(e,t){if(Va(t))return lo.resolve(null);let n=Wa(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Ga(t,null,"F"),n=Wa(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=dl(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,Ga(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return Va(t)||r.isEqual(Qs.min())?lo.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?lo.resolve(null):(Ss()<=ne.DEBUG&&Ts("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ya(t)),this.es(e,s,t,to(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new Ro($a(e));return t.forEach(((t,r)=>{Ja(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return Ss()<=ne.DEBUG&&Ts("QueryEngine","Using full collection scan to execute query:",Ya(t)),this.zi.getDocumentsMatchingQuery(e,t,ro.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class wu{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new Io(Hs),this.rs=new tl((e=>La(e)),Ma),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new su(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function bu(e,t,n,r){return new wu(e,t,n,r)}async function Eu(e,t){const n=Ps(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=dl();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function ku(e){const t=Ps(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function Su(e,t,n){let r=dl(),i=dl();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=rl();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Qs.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Ts("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}function Tu(e,t){const n=Ps(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Cu(e,t){const n=Ps(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,lo.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new Xc(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function Au(e,t,n){const r=Ps(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!po(e))throw e;Ts("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function xu(e,t,n){const r=Ps(e);let i=Qs.min(),s=dl();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Ps(e),i=r.rs.get(n);return void 0!==i?lo.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,Wa(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:Qs.min(),n?s:dl()))).next((e=>(Iu(r,Za(t),e),{documents:e,hs:s})))))}function Iu(e,t,n){let r=e.ss.get(t)||Qs.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}class Nu{constructor(){this.activeTargetIds=pl()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Pu{constructor(){this.no=new Nu,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Nu,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ru{io(e){}shutdown(){}}class Du{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Ts("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Ts("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ou=null;function Lu(){return null===Ou?Ou=268435456+Math.round(2147483648*Math.random()):Ou++,"0x"+Ou.toString(16)}const Mu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ju{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const Uu="WebChannelConnection";class Fu extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po="projects/".concat(n,"/databases/").concat(r),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get wo(){return!1}So(e,t,n,r,i){const s=Lu(),o=this.bo(e,t.toUriEncodedString());Ts("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,r,i),this.Co(e,o,a,n).then((t=>(Ts("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw As("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}vo(e,t,n,r,i,s){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Es,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=Mu[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,r){const i=Lu();return new Promise(((s,o)=>{const a=new vs;a.setWithCredentials(!0),a.listenOnce(fs.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case ds.NO_ERROR:const t=a.getResponseJson();Ts(Uu,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case ds.TIMEOUT:Ts(Uu,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Ds(Rs.DEADLINE_EXCEEDED,"Request time out"));break;case ds.HTTP_ERROR:const n=a.getStatus();if(Ts(Uu,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Rs).indexOf(t)>=0?t:Rs.UNKNOWN}(t.status);o(new Ds(e,t.message))}else o(new Ds(Rs.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Ds(Rs.UNAVAILABLE,"Connection failed."));break;default:Is()}}finally{Ts(Uu,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);Ts(Uu,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}Fo(e,t,n){const r=Lu(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=us(),o=hs(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Ts(Uu,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new ju({lo:t=>{d?Ts(Uu,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Ts(Uu,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),Ts(Uu,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},ho:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,ms.EventType.OPEN,(()=>{d||Ts(Uu,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,ms.EventType.CLOSE,(()=>{d||(d=!0,Ts(Uu,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Vo())})),p(u,ms.EventType.ERROR,(t=>{d||(d=!0,As(Uu,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Vo(new Ds(Rs.UNAVAILABLE,"The operation could not be completed")))})),p(u,ms.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Ns(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Ts(Uu,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Jl[e];if(void 0!==t)return ec(t)}(t),i=o.message;void 0===n&&(n=Rs.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Vo(new Ds(n,i)),u.close()}else Ts(Uu,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.mo(i)}})),p(o,ps.STAT_EVENT,(t=>{t.stat===gs.PROXY?Ts(Uu,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===gs.NOPROXY&&Ts(Uu,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ro()}),0),f}}function zu(){return"undefined"!=typeof document?document:null}function Vu(e){return new wc(e,!0)}class Bu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),r=Math.max(0,t-n);r>0&&Ts("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Bo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Lo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class qu{constructor(e,t,n,r,i,s,o,a){this.oi=e,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Bu(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===Rs.RESOURCE_EXHAUSTED?(Cs(t.toString()),Cs("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===Rs.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Wo===t&&this.o_(n,r)}),(t=>{e((()=>{const e=new Ds(Rs.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return Ts("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(Ts("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Wu extends qu{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Is()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Ns(void 0===t||"string"==typeof t),Mo.fromBase64String(t||"")):(Ns(void 0===t||t instanceof Uint8Array),Mo.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Rs.UNKNOWN:ec(e.code);return new Ds(t,e.message||"")}(o);n=new dc(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Nc(e,r.document.name),s=Tc(r.document.updateTime),o=r.document.createTime?Tc(r.document.createTime):Qs.min(),a=new la({mapValue:{fields:r.document.fields}}),l=ua.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new uc(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Nc(e,r.document),s=r.readTime?Tc(r.readTime):Qs.min(),o=ua.newNoDocument(i,s),a=r.removedTargetIds||[];n=new uc([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Nc(e,r.document),s=r.removedTargetIds||[];n=new uc([],s,i,null)}else{if(!("filter"in t))return Is();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Yl(r,i),o=e.targetId;n=new hc(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Qs.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Qs.min():t.readTime?Tc(t.readTime):Qs.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=Dc(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=ja(r)?{documents:jc(e,r)}:{query:Uc(e,r).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=kc(e,t.resumeToken);const r=bc(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Qs.min())>0){n.readTime=Ec(e,t.snapshotVersion.toTimestamp());const r=bc(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Is()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=Dc(this.serializer),t.removeTarget=e,this.t_(t)}}class Hu extends qu{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(Ns(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(Ns(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Tc(e.updateTime):Tc(t);return n.isEqual(Qs.min())&&(n=Tc(t)),new Pl(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Tc(e.commitTime);return this.listener.T_(n,t)}return Ns(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Dc(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Mc(this.serializer,e)))};this.t_(t)}}class Ku extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new Ds(Rs.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.So(e,Ac(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Rs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ds(Rs.UNKNOWN,e.toString())}))}vo(e,t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.vo(e,Ac(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Rs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ds(Rs.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class Gu{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(Cs(t),this.g_=!1):Ts("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class Qu{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{n.enqueueAndForget((async()=>{rh(this)&&(Ts("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Ps(e);t.v_.add(4),await Yu(t),t.x_.set("Unknown"),t.v_.delete(4),await Xu(t)}(this))}))})),this.x_=new Gu(n,r)}}async function Xu(e){if(rh(e))for(const t of e.F_)await t(!0)}async function Yu(e){for(const t of e.F_)await t(!1)}function Ju(e,t){const n=Ps(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),nh(n)?th(n):bh(n).Jo()&&$u(n,t))}function Zu(e,t){const n=Ps(e),r=bh(n);n.C_.delete(t),r.Jo()&&eh(n,t),0===n.C_.size&&(r.Jo()?r.Xo():rh(n)&&n.x_.set("Unknown"))}function $u(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Qs.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}bh(e).c_(t)}function eh(e,t){e.O_.Oe(t),bh(e).l_(t)}function th(e){e.O_=new pc({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),bh(e).start(),e.x_.p_()}function nh(e){return rh(e)&&!bh(e).Ho()&&e.C_.size>0}function rh(e){return 0===Ps(e).v_.size}function ih(e){e.O_=void 0}async function sh(e){e.C_.forEach(((t,n)=>{$u(e,t)}))}async function oh(e,t){ih(e),nh(e)?(e.x_.S_(t),th(e)):e.x_.set("Unknown")}async function ah(e,t,n){if(e.x_.set("Online"),t instanceof dc&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.C_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.C_.delete(r),e.O_.removeTarget(r))}(e,t)}catch(n){Ts("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await lh(e,n)}else if(t instanceof uc?e.O_.$e(t):t instanceof hc?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(Qs.min()))try{const t=await ku(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.C_.get(t);if(!r)return;e.C_.set(t,r.withResumeToken(Mo.EMPTY_BYTE_STRING,r.snapshotVersion)),eh(e,t);const i=new Xc(r.target,t,n,r.sequenceNumber);$u(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ts("RemoteStore","Failed to raise snapshot:",t),await lh(e,t)}}async function lh(e,t,n){if(!po(t))throw t;e.v_.add(1),await Yu(e),e.x_.set("Offline"),n||(n=()=>ku(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Ts("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await Xu(e)}))}function ch(e,t){return t().catch((n=>lh(e,n,t)))}async function uh(e){const t=Ps(e),n=Eh(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;hh(t);)try{const e=await Tu(t.localStore,r);if(null===e){0===t.D_.length&&n.Xo();break}r=e.batchId,dh(t,e)}catch(e){await lh(t,e)}fh(t)&&ph(t)}function hh(e){return rh(e)&&e.D_.length<10}function dh(e,t){e.D_.push(t);const n=Eh(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function fh(e){return rh(e)&&!Eh(e).Ho()&&e.D_.length>0}function ph(e){Eh(e).start()}async function gh(e){Eh(e).d_()}async function mh(e){const t=Eh(e);for(const n of e.D_)t.I_(n.mutations)}async function vh(e,t,n){const r=e.D_.shift(),i=Ql.from(r,t,n);await ch(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await uh(e)}async function yh(e,t){t&&Eh(e).P_&&await async function(e,t){if(function(e){return $l(e)&&e!==Rs.ABORTED}(t.code)){const n=e.D_.shift();Eh(e).Zo(),await ch(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await uh(e)}}(e,t),fh(e)&&ph(e)}async function _h(e,t){const n=Ps(e);n.asyncQueue.verifyOperationInProgress(),Ts("RemoteStore","RemoteStore received new credentials");const r=rh(n);n.v_.add(3),await Yu(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await Xu(n)}async function wh(e,t){const n=Ps(e);t?(n.v_.delete(2),await Xu(n)):t||(n.v_.add(2),await Yu(n),n.x_.set("Unknown"))}function bh(e){return e.N_||(e.N_=function(e,t,n){const r=Ps(e);return r.R_(),new Wu(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:sh.bind(null,e),To:oh.bind(null,e),u_:ah.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),nh(e)?th(e):e.x_.set("Unknown")):(await e.N_.stop(),ih(e))}))),e.N_}function Eh(e){return e.B_||(e.B_=function(e,t,n){const r=Ps(e);return r.R_(),new Hu(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:gh.bind(null,e),To:yh.bind(null,e),E_:mh.bind(null,e),T_:vh.bind(null,e)}),e.F_.push((async t=>{t?(e.B_.Zo(),await uh(e)):(await e.B_.stop(),e.D_.length>0&&(Ts("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]))}))),e.B_}class kh{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Os,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new kh(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ds(Rs.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sh(e,t){if(Cs("AsyncQueue","".concat(t,": ").concat(e)),po(e))return new Ds(Rs.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Th{constructor(e){this.comparator=e?(t,n)=>e(t,n)||$s.comparator(t.key,n.key):(e,t)=>$s.comparator(e.key,t.key),this.keyedMap=sl(),this.sortedSet=new Io(this.comparator)}static emptySet(e){return new Th(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Th))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Th;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Ch{constructor(){this.L_=new Io($s.comparator)}track(e){const t=e.doc.key,n=this.L_.get(t);n?0!==e.type&&3===n.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==n.type?this.L_=this.L_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.L_=this.L_.remove(t):1===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):Is():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Ah{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Ah(e,t,Th.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qa(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class xh{constructor(){this.q_=void 0,this.Q_=[]}}class Ih{constructor(){this.queries=new tl((e=>Xa(e)),Qa),this.onlineState="Unknown",this.K_=new Set}}async function Nh(e,t){const n=Ps(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new xh),i)try{s.q_=await n.onListen(r)}catch(e){const n=Sh(e,"Initialization of query '".concat(Ya(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.Q_.push(t),t.U_(n.onlineState),s.q_&&t.W_(s.q_)&&Oh(n)}async function Ph(e,t){const n=Ps(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.Q_.indexOf(t);e>=0&&(s.Q_.splice(e,1),i=0===s.Q_.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Rh(e,t){const n=Ps(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Q_)e.W_(i)&&(r=!0);t.q_=i}}r&&Oh(n)}function Dh(e,t,n){const r=Ps(e),i=r.queries.get(t);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(t)}function Oh(e){e.K_.forEach((e=>{e.next()}))}class Lh{constructor(e,t,n){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Ah(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){if(e.docChanges.length>0)return!0;const t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Y_(e){e=Ah.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class Mh{constructor(e){this.key=e}}class jh{constructor(e){this.key=e}}class Uh{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=dl(),this.mutatedKeys=dl(),this.ua=$a(e),this.ca=new Th(this.ua)}get la(){return this.oa}ha(e,t){const n=t?t.Pa:new Ch,r=t?t.ca:this.ca;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=Ja(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Ia(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.ua(u,a)>0||l&&this.ua(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ca:s,Pa:n,Xi:o,mutatedKeys:i}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.k_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Is()}};return n(e)-n(t)}(e.type,t.type)||this.ua(e.doc,t.doc))),this.Ta(n),r=null!=r&&r;const o=t&&!r?this.Ea():[],a=0===this.aa.size&&this.current&&!r?1:0,l=a!==this._a;return this._a=a,0!==s.length||l?{snapshot:new Ah(this.query,e.ca,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:o}:{da:o}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Ch,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach((e=>this.oa=this.oa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.oa=this.oa.delete(e))),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=dl(),this.ca.forEach((e=>{this.Aa(e.key)&&(this.aa=this.aa.add(e.key))}));const t=[];return e.forEach((e=>{this.aa.has(e)||t.push(new jh(e))})),this.aa.forEach((n=>{e.has(n)||t.push(new Mh(n))})),t}Ra(e){this.oa=e.hs,this.aa=dl();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return Ah.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class Fh{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class zh{constructor(e){this.key=e,this.ma=!1}}class Vh{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new tl((e=>Xa(e)),Qa),this.pa=new Map,this.ya=new Set,this.wa=new Io($s.comparator),this.Sa=new Map,this.ba=new lu,this.Da={},this.Ca=new Map,this.va=nu.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}async function Bh(e,t){const n=od(e);let r,i;const s=n.ga.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const e=await Cu(n.localStore,Wa(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await qh(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&Ju(n.remoteStore,e)}return i}async function qh(e,t,n,r,i){e.Ma=(t,n,r)=>async function(e,t,n,r){let i=t.view.ha(n);i.Xi&&(i=await xu(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ha(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return ed(e,t.targetId,a.da),a.snapshot}(e,t,n,r);const s=await xu(e.localStore,t,!0),o=new Uh(t,s.hs),a=o.ha(s.documents),l=cc.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);ed(e,n,c.da);const u=new Fh(t,n,o);return e.ga.set(t,u),e.pa.has(n)?e.pa.get(n).push(t):e.pa.set(n,[t]),c.snapshot}async function Wh(e,t){const n=Ps(e),r=n.ga.get(t),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter((e=>!Qa(e,t)))),void n.ga.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Au(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Zu(n.remoteStore,r.targetId),Zh(n,r.targetId)})).catch(ao)):(Zh(n,r.targetId),await Au(n.localStore,r.targetId,!0))}async function Hh(e,t){const n=Ps(e);try{const e=await function(e,t){const n=Ps(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Mo.EMPTY_BYTE_STRING,Qs.min()).withLastLimboFreeSnapshotVersion(Qs.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.Qr.updateTargetData(e,c))}));let a=rl(),l=dl();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Su(e,s,t.documentUpdates).next((e=>{a=e.cs,l=e.ls}))),!r.isEqual(Qs.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return lo.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Sa.get(t);r&&(Ns(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.ma=!0:e.modifiedDocuments.size>0?Ns(r.ma):e.removedDocuments.size>0&&(Ns(r.ma),r.ma=!1))})),await rd(n,e,t)}catch(e){await ao(e)}}function Kh(e,t,n){const r=Ps(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ga.forEach(((n,r)=>{const i=r.view.U_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Ps(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Q_)i.U_(t)&&(r=!0)})),r&&Oh(n)}(r.eventManager,t),e.length&&r.fa.u_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Gh(e,t,n){const r=Ps(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Sa.get(t),s=i&&i.key;if(s){let e=new Io($s.comparator);e=e.insert(s,ua.newNoDocument(s,Qs.min()));const n=dl().add(s),i=new lc(Qs.min(),new Map,new Io(Hs),e,n);await Hh(r,i),r.wa=r.wa.remove(s),r.Sa.delete(t),nd(r)}else await Au(r.localStore,t,!1).then((()=>Zh(r,t,n))).catch(ao)}async function Qh(e,t){const n=Ps(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Ps(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=lo.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Ns(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=dl();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Jh(n,r,null),Yh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await rd(n,e)}catch(e){await ao(e)}}async function Xh(e,t,n){const r=Ps(e);try{const e=await function(e,t){const n=Ps(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Ns(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Jh(r,t,n),Yh(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await rd(r,e)}catch(n){await ao(n)}}function Yh(e,t){(e.Ca.get(t)||[]).forEach((e=>{e.resolve()})),e.Ca.delete(t)}function Jh(e,t,n){const r=Ps(e);let i=r.Da[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}function Zh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.pa.get(t))e.ga.delete(r),n&&e.fa.xa(r,n);e.pa.delete(t),e.isPrimaryClient&&e.ba.Vr(t).forEach((t=>{e.ba.containsKey(t)||$h(e,t)}))}function $h(e,t){e.ya.delete(t.path.canonicalString());const n=e.wa.get(t);null!==n&&(Zu(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),nd(e))}function ed(e,t,n){for(const r of n)r instanceof Mh?(e.ba.addReference(r.key,t),td(e,r)):r instanceof jh?(Ts("SyncEngine","Document no longer in limbo: "+r.key),e.ba.removeReference(r.key,t),e.ba.containsKey(r.key)||$h(e,r.key)):Is()}function td(e,t){const n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(Ts("SyncEngine","New document in limbo: "+n),e.ya.add(r),nd(e))}function nd(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){const t=e.ya.values().next().value;e.ya.delete(t);const n=new $s(Ys.fromString(t)),r=e.va.next();e.Sa.set(r,new zh(n)),e.wa=e.wa.insert(n,r),Ju(e.remoteStore,new Xc(Wa(za(n.path)),r,"TargetPurposeLimboResolution",_o._e))}}async function rd(e,t,n){const r=Ps(e),i=[],s=[],o=[];r.ga.isEmpty()||(r.ga.forEach(((e,a)=>{o.push(r.Ma(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=vu.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.fa.u_(i),await async function(e,t){const n=Ps(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>lo.forEach(t,(t=>lo.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>lo.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!po(e))throw e;Ts("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,s))}async function id(e,t){const n=Ps(e);if(!n.currentUser.isEqual(t)){Ts("SyncEngine","User change. New user:",t.toKey());const e=await Eu(n.localStore,t);n.currentUser=t,function(e,t){e.Ca.forEach((e=>{e.forEach((e=>{e.reject(new Ds(Rs.CANCELLED,t))}))})),e.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await rd(n,e.us)}}function sd(e,t){const n=Ps(e),r=n.Sa.get(t);if(r&&r.ma)return dl().add(r.key);{let e=dl();const r=n.pa.get(t);if(!r)return e;for(const t of r){const r=n.ga.get(t);e=e.unionWith(r.view.la)}return e}}function od(e){const t=Ps(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Hh.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=sd.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Gh.bind(null,t),t.fa.u_=Rh.bind(null,t.eventManager),t.fa.xa=Dh.bind(null,t.eventManager),t}function ad(e){const t=Ps(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Qh.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Xh.bind(null,t),t}class ld{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Vu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return bu(this.persistence,new _u,e.initialUser,this.serializer)}createPersistence(e){return new pu(mu.Hr,this.serializer)}createSharedClientState(e){return new Pu}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class cd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Kh(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=id.bind(null,this.syncEngine),await wh(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ih}createDatastore(e){const t=Vu(e.databaseInfo.databaseId),n=function(e){return new Fu(e)}(e.databaseInfo);return function(e,t,n,r){return new Ku(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Qu(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Kh(this.syncEngine,e,0)),Du.D()?new Du:new Ru)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Vh(e,t,n,r,i,s);return o&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Ps(e);Ts("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await Yu(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}class ud{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Cs("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class hd{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=bs.UNAUTHENTICATED,this.clientId=Ws.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Ts("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Ts("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ds(Rs.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Os;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Sh(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function dd(e,t){e.asyncQueue.verifyOperationInProgress(),Ts("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Eu(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function fd(e,t){e.asyncQueue.verifyOperationInProgress();const n=await gd(e);Ts("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>_h(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>_h(t.remoteStore,n))),e._onlineComponents=t}function pd(e){return"FirebaseError"===e.name?e.code===Rs.FAILED_PRECONDITION||e.code===Rs.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function gd(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ts("FirestoreClient","Using user provided OfflineComponentProvider");try{await dd(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!pd(n))throw n;As("Error using user provided cache. Falling back to memory cache: "+n),await dd(e,new ld)}}else Ts("FirestoreClient","Using default OfflineComponentProvider"),await dd(e,new ld);return e._offlineComponents}async function md(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ts("FirestoreClient","Using user provided OnlineComponentProvider"),await fd(e,e._uninitializedComponentsProvider._online)):(Ts("FirestoreClient","Using default OnlineComponentProvider"),await fd(e,new cd))),e._onlineComponents}function vd(e){return md(e).then((e=>e.syncEngine))}async function yd(e){const t=await md(e),n=t.eventManager;return n.onListen=Bh.bind(null,t.syncEngine),n.onUnlisten=Wh.bind(null,t.syncEngine),n}function _d(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Os;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new ud({next:n=>{t.enqueueAndForget((()=>Ph(e,o))),n.fromCache&&"server"===r.source?i.reject(new Ds(Rs.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Lh(n,s,{includeMetadataChanges:!0,Z_:!0});return Nh(e,o)}(await yd(e),e.asyncQueue,t,n,r))),r.promise}function wd(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const bd=new Map;function Ed(e,t,n){if(!n)throw new Ds(Rs.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function kd(e){if(!$s.isDocumentKey(e))throw new Ds(Rs.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Sd(e){if($s.isDocumentKey(e))throw new Ds(Rs.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Td(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Is()}function Cd(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ds(Rs.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Td(e);throw new Ds(Rs.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class Ad{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Ds(Rs.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ds(Rs.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Ds(Rs.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wd(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Ds(Rs.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Ds(Rs.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Ds(Rs.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xd{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ad({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ds(Rs.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ds(Rs.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ad(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ms;switch(e.type){case"firstParty":return new zs(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ds(Rs.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=bd.get(e);t&&(Ts("ComponentProvider","Removing Datastore"),bd.delete(e),t.terminate())}(this),Promise.resolve()}}class Id{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Id(this.firestore,e,this._query)}}class Nd{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pd(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nd(this.firestore,e,this._key)}}class Pd extends Id{constructor(e,t,n){super(e,t,za(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nd(this.firestore,null,new $s(e))}withConverter(e){return new Pd(this.firestore,e,this._path)}}function Rd(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Y(e),Ed("collection","path",t),e instanceof xd){const n=Ys.fromString(t,...r);return Sd(n),new Pd(e,null,n)}{if(!(e instanceof Nd||e instanceof Pd))throw new Ds(Rs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ys.fromString(t,...r));return Sd(n),new Pd(e.firestore,null,n)}}function Dd(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Y(e),1===arguments.length&&(t=Ws.newId()),Ed("doc","path",t),e instanceof xd){const n=Ys.fromString(t,...r);return kd(n),new Nd(e,null,new $s(n))}{if(!(e instanceof Nd||e instanceof Pd))throw new Ds(Rs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ys.fromString(t,...r));return kd(n),new Nd(e.firestore,e instanceof Pd?e.converter:null,new $s(n))}}class Od{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new Bu(this,"async_queue_retry"),this._u=()=>{const e=zu();e&&Ts("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=zu();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=zu();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise((()=>{}));const t=new Os;return this.uu((()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.eu.push(e),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!po(e))throw e;Ts("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(e){const t=this.Xa.then((()=>(this.iu=!0,e().catch((e=>{this.ru=e,this.iu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Cs("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.iu=!1,e))))));return this.Xa=t,t}enqueueAfterDelay(e,t,n){this.au(),this.ou.indexOf(e)>-1&&(t=0);const r=kh.createAndSchedule(this,e,t,n,(e=>this.lu(e)));return this.nu.push(r),r}au(){this.ru&&Is()}verifyOperationInProgress(){}async hu(){let e;do{e=this.Xa,await e}while(e!==this.Xa)}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then((()=>{this.nu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()}))}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}function Ld(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Md extends xd{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Od,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ud(this),this._firestoreClient.terminate()}}function jd(e){return e._firestoreClient||Ud(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Ud(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Wo(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,wd(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new hd(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class Fd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fd(Mo.fromBase64String(e))}catch(e){throw new Ds(Rs.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Fd(Mo.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class zd{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Ds(Rs.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zs(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Vd{constructor(e){this._methodName=e}}class Bd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ds(Rs.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ds(Rs.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Hs(this._lat,e._lat)||Hs(this._long,e._long)}}const qd=/^__.*__$/;class Wd{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Vl(e,this.data,this.fieldMask,t,this.fieldTransforms):new zl(e,this.data,t,this.fieldTransforms)}}class Hd{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Vl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Kd(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Is()}}class Gd{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new Gd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.mu(e),r}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.Eu(),r}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return ff(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(Kd(this.du)&&qd.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class Qd{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Vu(e)}Su(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Gd({du:e,methodName:t,wu:n,path:Zs.emptyPath(),Vu:!1,yu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xd(e){const t=e._freezeSettings(),n=Vu(e._databaseId);return new Qd(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Yd(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Su(s.merge||s.mergeFields?2:0,t,n,i);cf("Data must be an object, but it was:",o,r);const a=af(r,o);let l,c;if(s.merge)l=new Oo(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=uf(t,r,n);if(!o.contains(i))throw new Ds(Rs.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));pf(e,i)||e.push(i)}l=new Oo(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new Wd(new la(a),l,c)}class Jd extends Vd{_toFieldTransform(e){if(2!==e.du)throw 1===e.du?e.pu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.pu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jd}}function Zd(e,t,n){return new Gd({du:3,wu:t.settings.wu,methodName:e._methodName,Vu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class $d extends Vd{_toFieldTransform(e){return new Nl(e.path,new El)}isEqual(e){return e instanceof $d}}class ef extends Vd{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=Zd(this,e,!0),n=this.bu.map((e=>of(e,t))),r=new kl(n);return new Nl(e.path,r)}isEqual(e){return e instanceof ef&&z(this.bu,e.bu)}}class tf extends Vd{constructor(e,t){super(e),this.Du=t}_toFieldTransform(e){const t=new Al(e.serializer,vl(e.serializer,this.Du));return new Nl(e.path,t)}isEqual(e){return e instanceof tf&&this.Du===e.Du}}function nf(e,t,n,r){const i=e.Su(1,t,n);cf("Data must be an object, but it was:",i,r);const s=[],o=la.empty();Ao(r,((e,r)=>{const a=df(t,e,n);r=Y(r);const l=i.fu(a);if(r instanceof Jd)s.push(a);else{const e=of(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new Oo(s);return new Hd(o,a,i.fieldTransforms)}function rf(e,t,n,r,i,s){const o=e.Su(1,t,n),a=[uf(t,r,n)],l=[i];if(s.length%2!=0)throw new Ds(Rs.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(uf(t,s[d])),l.push(s[d+1]);const c=[],u=la.empty();for(let d=a.length-1;d>=0;--d)if(!pf(c,a[d])){const e=a[d];let t=l[d];t=Y(t);const n=o.fu(e);if(t instanceof Jd)c.push(e);else{const r=of(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new Oo(c);return new Hd(u,h,o.fieldTransforms)}function sf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return of(n,e.Su(r?4:3,t))}function of(e,t){if(lf(e=Y(e)))return cf("Unsupported field value:",t,e),af(e,t);if(e instanceof Vd)return function(e,t){if(!Kd(t.du))throw t.pu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.pu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Vu&&4!==t.du)throw t.pu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=of(i,t.gu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Y(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return vl(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Gs.fromDate(e);return{timestampValue:Ec(t.serializer,n)}}if(e instanceof Gs){const n=new Gs(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ec(t.serializer,n)}}if(e instanceof Bd)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Fd)return{bytesValue:kc(t.serializer,e._byteString)};if(e instanceof Nd){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.pu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Cc(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.pu("Unsupported field value: ".concat(Td(e)))}(e,t)}function af(e,t){const n={};return xo(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ao(e,((e,r)=>{const i=of(r,t.Ru(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function lf(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Gs||e instanceof Bd||e instanceof Fd||e instanceof Nd||e instanceof Vd)}function cf(e,t,n){if(!lf(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Td(n);throw"an object"===r?t.pu(e+" a custom object"):t.pu(e+" "+r)}}function uf(e,t,n){if((t=Y(t))instanceof zd)return t._internalPath;if("string"==typeof t)return df(e,t);throw ff("Field path arguments must be of type string or ",e,!1,void 0,n)}const hf=new RegExp("[~\\*/\\[\\]]");function df(e,t,n){if(t.search(hf)>=0)throw ff("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new zd(...t.split("."))._internalPath}catch(ft){throw ff("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function ff(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new Ds(Rs.INVALID_ARGUMENT,a+e+l)}function pf(e,t){return e.some((e=>e.isEqual(t)))}class gf{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Nd(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new mf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class mf extends gf{data(){return super.data()}}function vf(e,t){return"string"==typeof t?df(e,t):t instanceof zd?t._internalPath:t._delegate._internalPath}function yf(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Ds(Rs.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _f{}class wf extends _f{}function bf(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof _f&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof Sf)).length,n=e.filter((e=>e instanceof Ef)).length;if(t>1||t>0&&n>0)throw new Ds(Rs.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Ef extends wf{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Ef(e,t,n)}_apply(e){const t=this._parse(e);return Af(e._query,t),new Id(e.firestore,e.converter,Ka(e._query,t))}_parse(e){const t=Xd(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Ds(Rs.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Cf(o,s);const t=[];for(const n of o)t.push(Tf(r,e,n));a={arrayValue:{values:t}}}else a=Tf(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Cf(o,s),a=sf(n,t,o,"in"===s||"not-in"===s);return va.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function kf(e,t,n){const r=t,i=vf("where",e);return Ef._create(i,r,n)}class Sf extends _f{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Sf(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:ya.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Af(n,i),n=Ka(n,i)}(e._query,t),new Id(e.firestore,e.converter,Ka(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function Tf(e,t,n){if("string"==typeof(n=Y(n))){if(""===n)throw new Ds(Rs.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ba(t)&&-1!==n.indexOf("/"))throw new Ds(Rs.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Ys.fromString(n));if(!$s.isDocumentKey(r))throw new Ds(Rs.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return ea(e,new $s(r))}if(n instanceof Nd)return ea(e,n._key);throw new Ds(Rs.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Td(n),"."))}function Cf(e,t){if(!Array.isArray(e)||0===e.length)throw new Ds(Rs.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Af(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Ds(Rs.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Ds(Rs.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class xf{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Go(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fo(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Is()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Ao(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Bd(Fo(e.latitude),Fo(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Bo(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(qo(e));default:return null}}convertTimestamp(e){const t=Uo(e);return new Gs(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ys.fromString(e);Ns(Qc(n));const r=new Ho(n.get(1),n.get(3)),i=new $s(n.popFirst(5));return r.isEqual(t)||Cs("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function If(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Nf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Pf extends gf{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Rf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(vf("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Rf extends Pf{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Df{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Nf(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Rf(this._firestore,this._userDataWriter,n.key,n,new Nf(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ds(Rs.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Rf(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Nf(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Rf(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Nf(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Of(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Of(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Is()}}class Lf extends xf{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nd(this.firestore,null,t)}}function Mf(e){e=Cd(e,Id);const t=Cd(e.firestore,Md),n=jd(t),r=new Lf(t);return yf(e._query),_d(n,e._query).then((n=>new Df(t,r,e,n)))}function jf(e,t,n){e=Cd(e,Nd);const r=Cd(e.firestore,Md),i=Xd(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=Y(t))||t instanceof zd?rf(i,"updateDoc",e._key,t,n,a):nf(i,"updateDoc",e._key,t),zf(r,[s.toMutation(e._key,Rl.exists(!0))])}function Uf(e,t){const n=Cd(e.firestore,Md),r=Dd(e),i=If(e.converter,t);return zf(n,[Yd(Xd(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Rl.exists(!1))]).then((()=>r))}function Ff(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=Y(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||Ld(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges};if(Ld(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof Nd)h=Cd(e.firestore,Md),d=za(e._key.path),u={next:t=>{n[l]&&n[l](Vf(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Cd(e,Id);h=Cd(t.firestore,Md),d=t._query;const r=new Lf(h);u={next:e=>{n[l]&&n[l](new Df(h,r,t,e))},error:n[l+1],complete:n[l+2]},yf(e._query)}return function(e,t,n,r){const i=new ud(r),s=new Lh(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Nh(await yd(e),s))),()=>{i.La(),e.asyncQueue.enqueueAndForget((async()=>Ph(await yd(e),s)))}}(jd(h),d,c,u)}function zf(e,t){return function(e,t){const n=new Os;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=ad(e);try{const e=await function(e,t){const n=Ps(e),r=Gs.now(),i=t.reduce(((e,t)=>e.add(t.key)),dl());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=rl(),l=dl();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Ul(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Vl(e.key,t,ca(t.value.mapValue),Rl.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:ol(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Da[e.currentUser.toKey()];r||(r=new Io(Hs)),r=r.insert(t,n),e.Da[e.currentUser.toKey()]=r}(r,e.batchId,n),await rd(r,e.changes),await uh(r.remoteStore)}catch(e){const t=Sh(e,"Failed to persist write");n.reject(t)}}(await vd(e),t,n))),n.promise}(jd(e),t)}function Vf(e,t,n){const r=n.docs.get(t._key),i=new Lf(e);return new Pf(e,i,t._key,r,new Nf(n.hasPendingWrites,n.fromCache),t.converter)}function Bf(){return new $d("serverTimestamp")}function qf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ef("arrayUnion",t)}function Wf(e){return new tf("increment",e)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Es=e}(Ue),Oe(new J("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Md(new Us(e.getProvider("auth-internal")),new Bs(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ds(Rs.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ho(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Ve(ws,"4.4.1",e),Ve(ws,"4.4.1","esm2017")}();Ve("firebase","10.7.2","app");function Hf(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Kf(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Gf=Kf,Qf=new P("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xf=new ae("@firebase/auth");function Yf(e){if(Xf.logLevel<=ne.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Xf.error("Auth (".concat(Ue,"): ").concat(e),...n)}}function Jf(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw tp(e,...n)}function Zf(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return tp(e,...n)}function $f(e,t,n){const r=Object.assign(Object.assign({},Gf()),{[t]:n});return new P("auth","Firebase",r).create(t,{appName:e.name})}function ep(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Jf(e,"argument-error"),$f(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function tp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Qf.create(e,...n)}function np(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw tp(t,...r)}}function rp(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Yf(t),new Error(t)}function ip(e,t){e||rp(t)}function sp(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function op(){return"http:"===ap()||"https:"===ap()}function ap(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function lp(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(op()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class cp{constructor(e,t){this.shortDelay=e,this.longDelay=t,ip(t>e,"Short delay should be less than long delay!"),this.isMobile=T()||C()}get(){return lp()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function up(e,t){ip(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class hp{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void rp("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void rp("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void rp("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const dp={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},fp=new cp(3e4,6e4);function pp(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function gp(e,t,n,r){return mp(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=B(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),hp.fetch()(yp(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function mp(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},dp),t);try{const t=new wp(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw bp(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw bp(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw bp(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw bp(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw $f(e,a,o);Jf(e,a)}}catch(i){if(i instanceof N)throw i;Jf(e,"network-request-failed",{message:String(i)})}}async function vp(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await gp(e,t,n,r,i);return"mfaPendingCredential"in s&&Jf(e,"multi-factor-auth-required",{_serverResponse:s}),s}function yp(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?up(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function _p(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class wp{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Zf(this.auth,"network-request-failed"))),fp.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function bp(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Zf(e,t,r);return i.customData._tokenResponse=n,i}function Ep(e){return void 0!==e&&void 0!==e.enterprise}class kp{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return _p(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Sp(e,t){return gp(e,"GET","/v2/recaptchaConfig",pp(e,t))}function Tp(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Cp(e){return 1e3*Number(e)}function Ap(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Yf("JWT malformed, contained fewer than 3 sections"),null;try{const e=f(n);return e?JSON.parse(e):(Yf("Failed to decode base64 JWT payload"),null)}catch(i){return Yf("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function xp(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof N&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Ip{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Np{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tp(this.lastLoginAt),this.creationTime=Tp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Pp(e){var t;const n=e.auth,r=await e.getIdToken(),i=await xp(e,async function(e,t){return gp(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));np(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=Hf(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=(l=e.providerData,c=o,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Np(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class Rp{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){np(e.idToken,"internal-error"),np("undefined"!==typeof e.idToken,"internal-error"),np("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=Ap(e);return np(t,"internal-error"),np("undefined"!==typeof t.exp,"internal-error"),np("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return np(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await mp(e,{},(async()=>{const n=B({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=yp(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",hp.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Rp;return n&&(np("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(np("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(np("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Rp,this.toJSON())}_performRefresh(){return rp("not implemented")}}function Dp(e,t){np("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Op{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Hf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ip(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Np(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await xp(this,this.stsTokenManager.getToken(this.auth,e));return np(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Y(e),r=await n.getIdToken(t),i=Ap(r);np(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Tp(Cp(i.auth_time)),issuedAtTime:Tp(Cp(i.iat)),expirationTime:Tp(Cp(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Y(e);await Pp(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(np(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Op(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){np(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Pp(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await xp(this,async function(e,t){return gp(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:_,isAnonymous:w,providerData:b,stsTokenManager:E}=t;np(y&&E,e,"internal-error");const k=Rp.fromJSON(this.name,E);np("string"===typeof y,e,"internal-error"),Dp(u,e.name),Dp(h,e.name),np("boolean"===typeof _,e,"internal-error"),np("boolean"===typeof w,e,"internal-error"),Dp(d,e.name),Dp(f,e.name),Dp(p,e.name),Dp(g,e.name),Dp(m,e.name),Dp(v,e.name);const S=new Op({uid:y,auth:e,email:h,emailVerified:_,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:k,createdAt:m,lastLoginAt:v});return b&&Array.isArray(b)&&(S.providerData=b.map((e=>Object.assign({},e)))),g&&(S._redirectEventId=g),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Rp;r.updateFromServerResponse(t);const i=new Op({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Pp(i),i}}const Lp=new Map;function Mp(e){ip(e instanceof Function,"Expected a class definition");let t=Lp.get(e);return t?(ip(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Lp.set(e,t),t)}class jp{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}jp.type="NONE";const Up=jp;function Fp(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class zp{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Fp(this.userKey,r.apiKey,i),this.fullPersistenceKey=Fp("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Op._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new zp(Mp(Up),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Mp(Up);const s=Fp(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=Op._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new zp(i,e,n)):new zp(i,e,n)}}function Vp(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Hp(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Bp(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Gp(t))return"Blackberry";if(Qp(t))return"Webos";if(qp(t))return"Safari";if((t.includes("chrome/")||Wp(t))&&!t.includes("edge/"))return"Chrome";if(Kp(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Bp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S();return/firefox\//i.test(e)}function qp(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:S()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Wp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S();return/crios\//i.test(e)}function Hp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S();return/iemobile/i.test(e)}function Kp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S();return/android/i.test(e)}function Gp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S();return/blackberry/i.test(e)}function Qp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S();return/webos/i.test(e)}function Xp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Yp(){return function(){const e=S();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Jp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S();return Xp(e)||Kp(e)||Qp(e)||Gp(e)||/windows phone/i.test(e)||Hp(e)}function Zp(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Vp(S());break;case"Worker":t="".concat(Vp(S()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Ue,"/").concat(r)}class $p{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class eg{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class tg{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rg(this),this.idTokenSubscription=new rg(this),this.beforeStateQueue=new $p(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qf,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Mp(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await zp.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return np(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Pp(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?Y(e):null;return t&&np(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&np(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Mp(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return gp(e,"GET","/v2/passwordPolicy",pp(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new eg(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new P("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return gp(e,"POST","/v2/accounts:revokeToken",pp(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Mp(e)||this._popupRedirectResolver;np(t,this,"argument-error"),this.redirectPersistenceManager=await zp.create(this,[Mp(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(np(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return np(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Zp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Xf.logLevel<=ne.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Xf.warn("Auth (".concat(Ue,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function ng(e){return Y(e)}class rg{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new K(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return np(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ig(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Zf("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function sg(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class og{constructor(e){this.type="recaptcha-enterprise",this.auth=ng(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Ep(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Sp(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new kp(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Ep(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));ig("https://www.google.com/recaptcha/enterprise.js?render="+i).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function ag(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new og(e);let s;try{s=await i.verify(n)}catch(u_){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function lg(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ag(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await ag(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function cg(e,t,n){const r=ng(e);np(r._canInitEmulator,r,"emulator-config-failed"),np(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=ug(t),{host:o,port:a}=function(e){const t=ug(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:hg(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:hg(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ug(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function hg(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class dg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return rp("not implemented")}_getIdTokenResponse(e){return rp("not implemented")}_linkToIdToken(e,t){return rp("not implemented")}_getReauthenticationResolver(e){return rp("not implemented")}}async function fg(e,t){return gp(e,"POST","/v1/accounts:signUp",t)}async function pg(e,t){return vp(e,"POST","/v1/accounts:signInWithPassword",pp(e,t))}class gg extends dg{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new gg(e,t,"password")}static _fromEmailAndCode(e,t){return new gg(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return lg(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",pg);case"emailLink":return async function(e,t){return vp(e,"POST","/v1/accounts:signInWithEmailLink",pp(e,t))}(e,{email:this._email,oobCode:this._password});default:Jf(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return lg(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",fg);case"emailLink":return async function(e,t){return vp(e,"POST","/v1/accounts:signInWithEmailLink",pp(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Jf(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function mg(e,t){return vp(e,"POST","/v1/accounts:signInWithIdp",pp(e,t))}class vg extends dg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new vg(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Jf("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Hf(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new vg(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return mg(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,mg(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,mg(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=B(t)}return e}}const yg={USER_NOT_FOUND:"user-not-found"};class _g extends dg{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new _g({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new _g({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return vp(e,"POST","/v1/accounts:signInWithPhoneNumber",pp(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await vp(e,"POST","/v1/accounts:signInWithPhoneNumber",pp(e,t));if(n.temporaryProof)throw bp(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return vp(e,"POST","/v1/accounts:signInWithPhoneNumber",pp(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),yg)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new _g({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class wg{constructor(e){var t,n,r,i,s,o;const a=q(W(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);np(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=q(W(e)).link,n=t?q(W(t)).deep_link_id:null,r=q(W(e)).deep_link_id;return(r?q(W(r)).link:null)||r||n||t||e}(e);try{return new wg(t)}catch(n){return null}}}class bg{constructor(){this.providerId=bg.PROVIDER_ID}static credential(e,t){return gg._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=wg.parseLink(t);return np(n,"argument-error"),gg._fromEmailAndCode(e,n.code,n.tenantId)}}bg.PROVIDER_ID="password",bg.EMAIL_PASSWORD_SIGN_IN_METHOD="password",bg.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Eg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class kg extends Eg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Sg extends kg{constructor(){super("facebook.com")}static credential(e){return vg._fromParams({providerId:Sg.PROVIDER_ID,signInMethod:Sg.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sg.credentialFromTaggedObject(e)}static credentialFromError(e){return Sg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Sg.credential(t.oauthAccessToken)}catch(n){return null}}}Sg.FACEBOOK_SIGN_IN_METHOD="facebook.com",Sg.PROVIDER_ID="facebook.com";class Tg extends kg{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return vg._fromParams({providerId:Tg.PROVIDER_ID,signInMethod:Tg.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Tg.credentialFromTaggedObject(e)}static credentialFromError(e){return Tg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Tg.credential(n,r)}catch(i){return null}}}Tg.GOOGLE_SIGN_IN_METHOD="google.com",Tg.PROVIDER_ID="google.com";class Cg extends kg{constructor(){super("github.com")}static credential(e){return vg._fromParams({providerId:Cg.PROVIDER_ID,signInMethod:Cg.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cg.credentialFromTaggedObject(e)}static credentialFromError(e){return Cg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Cg.credential(t.oauthAccessToken)}catch(n){return null}}}Cg.GITHUB_SIGN_IN_METHOD="github.com",Cg.PROVIDER_ID="github.com";class Ag extends kg{constructor(){super("twitter.com")}static credential(e,t){return vg._fromParams({providerId:Ag.PROVIDER_ID,signInMethod:Ag.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ag.credentialFromTaggedObject(e)}static credentialFromError(e){return Ag.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Ag.credential(n,r)}catch(i){return null}}}async function xg(e,t){return vp(e,"POST","/v1/accounts:signUp",pp(e,t))}Ag.TWITTER_SIGN_IN_METHOD="twitter.com",Ag.PROVIDER_ID="twitter.com";class Ig{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Op._fromIdTokenResponse(e,n,r),s=Ng(n);return new Ig({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ng(n);return new Ig({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ng(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Pg extends N{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Pg.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Pg(e,t,n,r)}}function Rg(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Pg._fromErrorAndOperation(e,n,t,r);throw n}))}async function Dg(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await xp(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ig._forOperation(e,"link",r)}async function Og(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await xp(e,Rg(r,i,t,e),n);np(s.idToken,r,"internal-error");const o=Ap(s.idToken);np(o,r,"internal-error");const{sub:a}=o;return np(e.uid===a,r,"user-mismatch"),Ig._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&Jf(r,"user-mismatch"),s}}async function Lg(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await Rg(e,r,t),s=await Ig._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Mg(e,t){return Lg(ng(e),t)}async function jg(e){const t=ng(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function Ug(e){return Y(e).signOut()}new WeakMap;const Fg="__sak";class zg{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Fg,"1"),this.storage.removeItem(Fg),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Vg extends zg{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=S();return qp(e)||Xp(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Jp(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Yp()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Vg.type="LOCAL";const Bg=Vg;class qg extends zg{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}qg.type="SESSION";const Wg=qg;class Hg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Hg(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Kg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Hg.receivers=[];class Gg{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=Kg("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Qg(){return window}function Xg(){return"undefined"!==typeof Qg().WorkerGlobalScope&&"function"===typeof Qg().importScripts}const Yg="firebaseLocalStorageDb",Jg="firebaseLocalStorage",Zg="fbase_key";class $g{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function em(e,t){return e.transaction([Jg],t?"readwrite":"readonly").objectStore(Jg)}function tm(){const e=indexedDB.open(Yg,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Jg,{keyPath:Zg})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Jg)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Yg);return new $g(e).toPromise()}(),t(await tm()))}))}))}async function nm(e,t,n){const r=em(e,!0).put({[Zg]:t,value:n});return new $g(r).toPromise()}function rm(e,t){const n=em(e,!0).delete(t);return new $g(n).toPromise()}class im{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await tm()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Xg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hg._getInstance(Xg()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Gg(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await tm();return await nm(e,Fg,"1"),await rm(e,Fg),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>nm(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=em(e,!1).get(t),r=await new $g(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>rm(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=em(e,!1).getAll();return new $g(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}im.type="LOCAL";const sm=im;sg("rcb"),new cp(3e4,6e4);const om="recaptcha";async function am(e,t,n){var r;const i=await n.verify();try{let s;if(np("string"===typeof i,e,"argument-error"),np(n.type===om,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){np("enroll"===t.type,e,"internal-error");const n=await function(e,t){return gp(e,"POST","/v2/accounts/mfaEnrollment:start",pp(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{np("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;np(n,e,"missing-multi-factor-info");const o=await function(e,t){return gp(e,"POST","/v2/accounts/mfaSignIn:start",pp(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return gp(e,"POST","/v1/accounts:sendVerificationCode",pp(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class lm{constructor(e){this.providerId=lm.PROVIDER_ID,this.auth=ng(e)}verifyPhoneNumber(e,t){return am(this.auth,e,Y(t))}static credential(e,t){return _g._fromVerification(e,t)}static credentialFromResult(e){const t=e;return lm.credentialFromTaggedObject(t)}static credentialFromError(e){return lm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?_g._fromTokenResponse(n,r):null}}function cm(e,t){return t?Mp(t):(np(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}lm.PROVIDER_ID="phone",lm.PHONE_SIGN_IN_METHOD="phone";class um extends dg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mg(e,this._buildIdpRequest())}_linkToIdToken(e,t){return mg(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return mg(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function hm(e){return Lg(e.auth,new um(e),e.bypassAuthState)}function dm(e){const{auth:t,user:n}=e;return np(n,t,"internal-error"),Og(n,new um(e),e.bypassAuthState)}async function fm(e){const{auth:t,user:n}=e;return np(n,t,"internal-error"),Dg(n,new um(e),e.bypassAuthState)}class pm{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hm;case"linkViaPopup":case"linkViaRedirect":return fm;case"reauthViaPopup":case"reauthViaRedirect":return dm;default:Jf(this.auth,"internal-error")}}resolve(e){ip(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ip(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const gm=new cp(2e3,1e4);class mm extends pm{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,mm.currentPopupAction&&mm.currentPopupAction.cancel(),mm.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return np(e,this.auth,"internal-error"),e}async onExecution(){ip(1===this.filter.length,"Popup operations only handle one event");const e=Kg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Zf(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Zf(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mm.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Zf(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,gm.get())};e()}}mm.currentPopupAction=null;const vm="pendingRedirect",ym=new Map;class _m extends pm{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=ym.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=km(t),r=Em(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}ym.set(this.auth._key(),e)}return this.bypassAuthState||ym.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function wm(e,t){return Em(e)._set(km(t),"true")}function bm(e,t){ym.set(e._key(),t)}function Em(e){return Mp(e._redirectPersistence)}function km(e){return Fp(vm,e.config.apiKey,e.name)}function Sm(e,t,n){return async function(e,t,n){const r=ng(e);ep(e,t,Eg),await r._initializationPromise;const i=cm(r,n);return await wm(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}async function Tm(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=ng(e),i=cm(r,t),s=new _m(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class Cm{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xm(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!xm(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Zf(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Am(e))}saveEventToCache(e){this.cachedEventUids.add(Am(e)),this.lastProcessedEventTime=Date.now()}}function Am(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function xm(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Im=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Nm=/^https?/;async function Pm(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return gp(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Rm(r))return}catch(n){}Jf(e,"unauthorized-domain")}function Rm(e){const t=sp(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Nm.test(n))return!1;if(Im.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Dm=new cp(3e4,6e4);function Om(){const e=Qg().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Lm=null;function Mm(e){return Lm=Lm||function(e){return new Promise(((t,n)=>{var r,i,s;function o(){Om(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Om(),n(Zf(e,"network-request-failed"))},timeout:Dm.get()})}if(null===(i=null===(r=Qg().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Qg().gapi)||void 0===s?void 0:s.load)){const t=sg("iframefcb");return Qg()[t]=()=>{gapi.load?o():n(Zf(e,"network-request-failed"))},ig("https://apis.google.com/js/api.js?onload=".concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw Lm=null,e}))}(e),Lm}const jm=new cp(5e3,15e3),Um="__/auth/iframe",Fm="emulator/auth/iframe",zm={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Vm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Bm(e){const t=e.config;np(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?up(t,Fm):"https://".concat(e.config.authDomain,"/").concat(Um),r={apiKey:t.apiKey,appName:e.name,v:Ue},i=Vm.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(B(r).slice(1))}const qm={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Wm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Hm(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},qm),{width:r.toString(),height:i.toString(),top:s,left:o}),c=S().toLowerCase();n&&(a=Wp(c)?"_blank":n),Bp(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Xp(arguments.length>0&&void 0!==arguments[0]?arguments[0]:S())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Wm(null);const h=window.open(t||"",a,u);np(h,e,"popup-blocked");try{h.focus()}catch(d){}return new Wm(h)}const Km="__/auth/handler",Gm="emulator/auth/handler",Qm=encodeURIComponent("fac");async function Xm(e,t,n,r,i,s){np(e.config.authDomain,e,"auth-domain-config-required"),np(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ue,eventId:i};if(t instanceof Eg){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",U(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof kg){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Qm,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Km);return up(t,Gm)}(e),"?").concat(B(a).slice(1)).concat(c)}const Ym="webStorageSupport";const Jm=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Wg,this._completeRedirectFn=Tm,this._overrideRedirectResult=bm}async _openPopup(e,t,n,r){var i;ip(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Hm(e,await Xm(e,t,n,sp(),r),Kg())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Qg().location.href=e}(await Xm(e,t,n,sp(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(ip(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await Mm(e),n=Qg().gapi;return np(n,e,"internal-error"),t.open({where:document.body,url:Bm(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zm,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Zf(e,"network-request-failed"),s=Qg().setTimeout((()=>{r(i)}),jm.get());function o(){Qg().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new Cm(e);return t.register("authEvent",(t=>{np(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ym,{type:Ym},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Ym];void 0!==i&&t(!!i),Jf(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Pm(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Jp()||qp()||Xp()}};var Zm="@firebase/auth",$m="1.5.1";class ev{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){np(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const tv=b("authIdTokenMaxAge")||300;let nv=null;var rv;rv="Browser",Oe(new J("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;np(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:rv,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zp(rv)},c=new tg(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Mp);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Oe(new J("auth-internal",(e=>(e=>new ev(e))(ng(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Ve(Zm,$m,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(rv)),Ve(Zm,$m,"esm2017");const iv="firebasestorage.googleapis.com",sv="storageBucket";class ov extends N{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(cv(e),"Firebase Storage: ".concat(t," (").concat(cv(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ov.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return cv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var av,lv;function cv(e){return"storage/"+e}function uv(){return new ov(av.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function hv(){return new ov(av.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dv(){return new ov(av.CANCELED,"User canceled the upload/download.")}function fv(){return new ov(av.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function pv(e){return new ov(av.INVALID_ARGUMENT,e)}function gv(){return new ov(av.APP_DELETED,"The Firebase app was deleted.")}function mv(e,t){return new ov(av.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function vv(e){throw new ov(av.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(av||(av={}));class yv{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=yv.makeFromUrl(e,t)}catch(i){return new yv(e,"")}if(""===n.path)return n;throw r=e,new ov(av.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===iv?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new yv(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new ov(av.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class _v{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function wv(e){return"string"===typeof e||e instanceof String}function bv(e){return Ev()&&e instanceof Blob}function Ev(){return"undefined"!==typeof Blob}function kv(e,t,n,r){if(r<t)throw pv("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw pv("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Sv(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Tv(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function Cv(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(lv||(lv={}));class Av{constructor(e,t,n,r,i,s,o,a,l,c,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new xv(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===lv.NO_ERROR,i=n.getStatus();if(!t||Cv(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===lv.ABORT;return void e(!1,new xv(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new xv(s,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(s){r(s)}else if(null!==i){const e=uv();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?gv():dv())}else{r(hv())}};this.canceled_?t(0,new xv(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((()=>{i=null,e(f,l())}),t)}function d(){s&&clearTimeout(s)}function f(e){if(c)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void u.call(null,e,...n);if(l()||o)return d(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===a?(a=2,s=0):s=1e3*(r+Math.random()),h(s)}let p=!1;function g(e){p||(p=!0,d(),c||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout((()=>{o=!0,g(!0)}),n),g}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class xv{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Iv(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Nv(){const e=Iv();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(Ev())return new Blob(n);throw new ov(av.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function Pv(e){if("undefined"===typeof atob)throw t="base-64",new ov(av.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const Rv={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Dv{constructor(e,t){this.data=e,this.contentType=t||null}}function Ov(e,t){switch(e){case Rv.RAW:return new Dv(Lv(t));case Rv.BASE64:case Rv.BASE64URL:return new Dv(Mv(e,t));case Rv.DATA_URL:return new Dv(function(e){const t=new jv(e);return t.base64?Mv(Rv.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw mv(Rv.DATA_URL,"Malformed data URL.")}return Lv(t)}(t.rest)}(t),new jv(t).contentType)}throw uv()}function Lv(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Mv(e,t){switch(e){case Rv.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw mv(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case Rv.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw mv(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Pv(t)}catch(i){if(i.message.includes("polyfill"))throw i;throw mv(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class jv{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw mv(Rv.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class Uv{constructor(e,t){let n=0,r="";bv(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(bv(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new Uv(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Uv(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Ev()){const e=t.map((e=>e instanceof Uv?e.data_:e));return new Uv(Nv.apply(null,e))}{const e=t.map((e=>wv(e)?Ov(Rv.RAW,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new Uv(r,!0)}}uploadData(){return this.data_}}function Fv(e){let t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function zv(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Vv(e,t){return t}class Bv{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Vv}}let qv=null;function Wv(){if(qv)return qv;const e=[];e.push(new Bv("bucket")),e.push(new Bv("generation")),e.push(new Bv("metageneration")),e.push(new Bv("name","fullPath",!0));const t=new Bv("name");t.xform=function(e,t){return function(e){return!wv(e)||e.length<2?e:zv(e)}(t)},e.push(t);const n=new Bv("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Bv("timeCreated")),e.push(new Bv("updated")),e.push(new Bv("md5Hash",null,!0)),e.push(new Bv("cacheControl",null,!0)),e.push(new Bv("contentDisposition",null,!0)),e.push(new Bv("contentEncoding",null,!0)),e.push(new Bv("contentLanguage",null,!0)),e.push(new Bv("contentType",null,!0)),e.push(new Bv("metadata","customMetadata",!0)),qv=e,qv}function Hv(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new yv(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Kv(e,t,n){const r=Fv(t);if(null===r)return null;return Hv(e,r,n)}function Gv(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class Qv{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Xv(e){if(!e)throw uv()}function Yv(e,t){return function(n,r){const i=Kv(e,r,t);return Xv(null!==i),i}}function Jv(e,t){return function(n,r){const i=Kv(e,r,t);return Xv(null!==i),function(e,t,n,r){const i=Fv(t);if(null===i)return null;if(!wv(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map((t=>{const i=e.bucket,s=e.fullPath;return Sv("/b/"+o(i)+"/o/"+o(s),n,r)+Tv({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function Zv(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new ov(av.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new ov(av.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new ov(av.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new ov(av.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function $v(e){const t=Zv(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new ov(av.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function ey(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function ty(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const l=ey(t,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Gv(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",h=Uv.getBlob(c,r,u);if(null===h)throw fv();const d={name:l.fullPath},f=Sv(s,e.host,e._protocol),p=e.maxUploadRetryTime,g=new Qv(f,"POST",Yv(e,n),p);return g.urlParams=d,g.headers=o,g.body=h.uploadData(),g.errorHandler=Zv(t),g}let ny=null;class ry{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=lv.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=lv.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=lv.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw vv("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw vv("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw vv("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw vv("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw vv("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class iy extends ry{initXhr(){this.xhr_.responseType="text"}}function sy(){return ny?ny():new iy}class oy{constructor(e,t){this._service=e,this._location=t instanceof yv?t:yv.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new oy(e,t)}get root(){const e=new yv(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zv(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new yv(this._location.bucket,e);return new oy(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new ov(av.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function ay(e,t,n){e._throwIfRoot("uploadBytes");const r=ty(e.storage,e._location,Wv(),new Uv(t,!0),n);return e.storage.makeRequestWithTokens(r,sy).then((t=>({metadata:t,ref:e})))}function ly(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=Sv(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new Qv(r,"GET",Jv(e,n),i);return s.errorHandler=$v(t),s}(e.storage,e._location,Wv());return e.storage.makeRequestWithTokens(t,sy).then((e=>{if(null===e)throw new ov(av.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function cy(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new yv(e._location.bucket,n);return new oy(e.storage,r)}function uy(e,t){if(e instanceof fy){const n=e;if(null==n._bucket)throw new ov(av.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+sv+"' property when initializing the app?");const r=new oy(n,n._bucket);return null!=t?uy(r,t):r}return void 0!==t?cy(e,t):e}function hy(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof fy)return new oy(e,t);throw pv("To use ref(service, url), the first argument must be a Storage instance.")}return uy(e,t)}function dy(e,t){const n=null===t||void 0===t?void 0:t[sv];return null==n?null:yv.makeFromBucketSpec(n,e)}class fy{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=iv,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?yv.makeFromBucketSpec(r,this._host):dy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=yv.makeFromBucketSpec(this._url,e):this._bucket=dy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){kv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){kv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new oy(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new _v(gv());{const s=function(e,t,n,r,i,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=Tv(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new Av(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const py="@firebase/storage",gy="0.12.0",my="storage";function vy(e,t,n){return ay(e=Y(e),t,n)}function yy(e){return ly(e=Y(e))}function _y(e,t){return hy(e=Y(e),t)}function wy(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new fy(r,i,s,n,Ue)}Oe(new J(my,wy,"PUBLIC").setMultipleInstances(!0)),Ve(py,gy,""),Ve(py,gy,"esm2017");const by=Fe({apiKey:"AIzaSyBjGAwbonjw943oPMLlgw2v7hgWUym_9DM",authDomain:"sec-mobile-commerce-1.firebaseapp.com",projectId:"sec-mobile-commerce-1",storageBucket:"sec-mobile-commerce-1.appspot.com",messagingSenderId:"268999632005",appId:"1:268999632005:web:a22f6016310898a63375ec"}),Ey=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze();const t=Le(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Le(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(z(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Jf(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Jm,persistence:[sm,Bg,Wg]}),r=b("authTokenSyncURL");if(r){const e=(i=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>tv)return;const r=null===t||void 0===t?void 0:t.token;nv!==r&&(nv=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){Y(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(e,t,n,r){Y(e).onIdTokenChanged(t,n,r)}(n,(t=>e(t)))}var i;const s=y("auth");return s&&cg(n,"http://".concat(s)),n}(by),ky=function(e,t){const n="string"==typeof e?e:t||"(default)",r=Le("object"==typeof e?e:ze(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=_("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Cd(e,xd))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&As("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=bs.MOCK_USER;else{t=k(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Ds(Rs.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new bs(s)}e._authCredentials=new js(new Ls(t,n))}}(r,...e)}return r}(by),Sy=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze(),t=arguments.length>1?arguments[1]:void 0;e=Y(e);const n=Le(e,my).getImmediate({identifier:t}),r=_("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:k(i,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}(by,"gs://sec-mobile-commerce-1.appspot.com"),Ty=n.p+"static/media/like.9c6dbc91827ca868350b.png",Cy=n.p+"static/media/comment.32ee47ae5636df13cf2a.png",Ay="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAACAASURBVHic7d17jGb3WR/w73lnZmd3vY4T4sQkhpBCiUOI1CgKLbVJbJM0F7MutDRCRaKFQqnUQtNWtP2jCFWAqlIqhYSUlFJA4AoEcvoPJJSokCagUpFEJVSlvnBxa+LL2kuceO8z857+4V377O5c3znn/Z3L5/OXvYl3Hlu77/PMc87z3SoAQL99pr5hZT1vravcVdX52rrKlyV5WepspMrZKnmgrvM/Zyv58Obn87G8qdrY66esllA2AHBQf1h/6WwzJ+sq91bJ3UmO7vOffCpV3jdfyQfyFdXnd/o/GQAAoC8err96tpWTVZV76+T2HK5PP1nV+Z6t11b3b/c/GgAAoJTP1DesHM1fqZOTSb4hyRe3/jXqvH9+W/5Jqmqr+cMGAABYpsVX+wu76Zn8zudO5K58dXXpyo+tdv1FAWDS6nqWh/KmWZ17U+VktvKGVMv7DvwlTyUvfjp/+eiJ/O7jyRuu/LgNAAC07dH62Or53DGf595U+eYkt5Yo43Lzf96zL8m/PXVn9U8TAwAAtKPAan831zb/JNlayfwLL8qr/+zO6lGPAABgUc239rdye6pUffjOervmnyQrW5mtb+ank7y9D3UCwDAs4639Q9qp+V+xtZL5peRGGwAA2M0f1i9f2co76yonU+dddXKidEk72av5J89tATZemu+1AQCApmvf2m+8Od9n+2n+V5w7kd8zAABAT97aX9RBmn+SXDyWZwwAAExTz97aX9RBm3+SbK5mywAAwHS0m7Vf3CLNP0nmK6kH/S8OALsawFv7i1q0+SdJXYkCBmBsBvTW/qIO0/yTZGslmwYAAIZtm6z9Oknq0oV147DNP0nmqznnEQAAwzPwt/YX1UbzT5KzN+aTNgAADEPzrf1zuXueHB32K3wH01bzT5J6NR+d0H86AAZnZG/tL6rV5l8lZ2/OLTYAAPTHtav9eW5NNdrH+fvSZvNPkotHc+rJO6pTBgAAymq+tX8u75onJ6b5ff712m7+SbK5lt9InAECUMI1f4xunVST/jZ/G100/yTZnOW9yUSfpQCwZBN9a39RXTX/S0dy/tF7quOJDQAAXbHaX0hXzT9JNtbzySt/bQAAoD1W+4fSZfNPko31/MyVvzaLAbA4q/3WdN38t1Yyf+Rk1lJV88QGAICDstpvXdfNP0kuHsvDV5p/YgAAYD+s9juzjOafJPO13N/8ewMAANcTyLMUy2r+dZVkNe9v/pgBAIDnWO0v1bKaf/JC+l/zxwwAAFNmtV/EMpt/8kL6X5MBAGBKrPaLW3bzT15I/2uy3AEYu+Zqv867kpwoXdJUlWj+zfS/JhsAgDGy2u+dEs0/uTr9r8kAADAGVvu9Vqr5J1en/zV5BAAwVFb7g1Cy+V+b/tdkAwAwJFb7g1Ky+SfXp/81GQAA+sxqf7BKN//k+vS/JgMAQN8I5Bm8PjT/7dL/mgwAAH1gtT8afWj+yfbpf00GAIASrPZHqS/NP9k+/a/JAACwLFb7o9an5p9sn/7X5JceQJeaq/3k9vjcHaW+Nf+d0v+abAAA2mS1Pzl9a/7Jzul/TQYAgMOy2p+sPjb/ZOf0vya/RAEWYbU/eX1t/rul/zXZAADsh9U+DX1t/snu6X9NBgCAnVjts40+N/9k9/S/JgMAQJNAHnbR9+a/V/pfkwEAmDarffap780/2Tv9r8kAAEyP1T4HNITmn+yd/tdkAACmwWqfBQ2l+Sd7p/81mXmBcbp2tZ/cWrokhmdIzX8/6X9NNgDAeFjt06IhNf9kf+l/TQYAYNis9unA0Jp/sr/0vyazMTAsVvt0bIjNf7/pf002AED/We2zJENs/sn+0/+aDABAP1nts2RDbf7J/tP/mgwAQD8I5KGgITf/g6T/NRkAgHKs9umBITf/5GDpf00GAGC5rPbpkaE3/+Rg6X9NBgCgW1b79NQYmn9ysPS/Jss2oH3N1X6ddyU5UbokaBpL8z9o+l+TDQDQDqt9BmIszT85ePpfkwEAWIzVPgM0puafHDz9r8kjAGD/rPYZsLE1/0XS/5psAIDdWe0zAmNr/sli6X9NBgDgalb7jMwYm3+yWPpfkwEAEMjDaI21+S+a/tdkAICpstpn5Mba/JPF0/+aDAAwFVb7TMiYm3+yePpfkwEAxsxqnwkae/NPFk//a/JRAGPTXO0nt8fvcyZkCs3/MOl/TTYAMHRW+5BkGs0/OVz6X5MBAIbIah+uMpXmnxwu/a/JRwYMhdU+bGtKzf+w6X9NNgDQV1b7sKcpNf/k8Ol/TQYA6BOrfdi3qTX/5PDpf00GAChNIA8c2BSbfxvpf00GAFg2q304lCk2/6Sd9L8mAwAsg9U+tGKqzT9pJ/2vyQAAXbHah1ZNufkn7aT/NfkeBNpy7Wo/ubV0STAWU2/+baX/NdkAwGFY7UPnpt78k/bS/5oMAHBQVvuwNJr/c9pK/2vyvQrsxWofitD8n9Nm+l+TDQBsx2ofitL8X9Bm+l+TAQCusNqHXtD8r9Zm+l+TAYDpEsgDvaP5X63t9L8mAwDTYrUPvaX5X6/t9L8mAwDjZ7UPvaf5b6/t9L8mAwDjY7UPg6L576zt9L8my0/Gobnar/OuJCdKlwTsTfPfWRfpf002AAyX1T4Mmua/uy7S/5oMAAyH1T6Mhua/ty7S/5o8AqDfrPZhdDT/vXWV/tdkA0D/WO3DaGn++9NV+l+TAYDyrPZhEjT//esq/a/JAEAZAnlgUjT//esy/a/JAMDyWO3DJGn+B9Nl+l+TAYDuWO3D5Gn+B9dl+l+TAYB2We0Dl2n+i+ky/a/JRzOH11ztJ7fHryuYPM1/MV2n/zXZAHBwVvvALjT/xXWd/tdkAGB/rPaBfdD8D6fr9L8mH+HszGofOADN/3CWkf7XZAPAC6z2gQVp/oe3jPS/JgPA1FntA4ek+bdjGel/TQaAKRLIA7RE82/HstL/mgwAU2C1D3RA82/PstL/mgwAY2W1D3RI82/XstL/mgwAY2K1DyyB5t++ZaX/NfmecMiuXe0nt5YuCRg3zb99y0z/a7IBGBqrfaAQzb8by0z/azIADIHVPlCY5t+dZab/NfnesY+s9oEe0fy7s+z0vyYbgL6w2gd6SPPv1rLT/5oMACVZ7QM9pvl3b9npf00GgGUSyAMMhObfvRLpf00GgK5Z7QMDo/kvR4n0vyYDQBes9oGB0vyXp0T6X5MBoA1W+8AIaP7LVSL9r8kyelHN1X6ddyU5UbokgEVp/stVKv2vyQbgIKz2gRHS/JevVPpfkwFgN1b7wMhp/mWUSv9r8gjgWlb7wERo/mWUTP9rsgFIrPaBydH8yymZ/tc0zQHAah+YMM2/rJLpf03TGQAE8gBo/oWVTv9rGvcAYLUP8DzNv7zS6X9N4xoArPYBtqX590Pp9L+m4Q8AVvsAu9L8+6N0+l/TMFtlc7Wf3J6h/nsAdEzz748+pP81DWMDYLUPcGCaf7/0If2vqb8DgNU+wMI0//7pQ/pfU79aqtU+wKFp/v3Tl/S/prIbgLpeWX0wb5kn35Iq35h5vthqH2Bxmn8/9SX9r6nMAPAH9etns/zdPJR3z6u8okgNACOj+ffX/Eg+VLqGay1vAKjr2erD+fqtOu+pkm+I9T5AazT//qqrJCt5X+k6rtV9E67rauXh/LW6zg8n+arOvx7AxGj+/XbhWE599h3VLaXruFa3G4CH6ztXHsqP1Mlf6vTrAEyU5t9/m+v9Sf9r6mYA+P36JbP1/OvM891e6APohuY/DJvpT/pfU+uPAFYeqN9dV/lAkpe3/XMD8BzNfxj6lv7X1N4G4NH62Ox8PlDX+Tut/ZwAXEfzH46+pf81tTMAPFDfNjuf+1Pn9a38fABsS/Mflr6l/zUd+hHAysP1vfU8v5DkRAv1ALADzX9YLqf/HUlVbZWuZTuzw/zDKw/Wf7ue5z9H8wfolOY/PJfT/3rZ/JNDDACzh+rvr5OfTek4YYCR0/yHqY/pf00LNe/ZQ/X3p84PtV0MAFfT/Iepr+l/TQfeAMwerL9H8wfonuY/XBeP5tSTd1SnStexmwMNACsP1t+W5P0d1QLAZZr/sPU1/a9p/wPAw/Ub6+Qn4w/xAeiU5j98fU3/a9pfM//j+pbZRj6V5Eu6LQdg2jT/4etz+l/T3huAup6tbOSXo/kDdErzH4eNo/1N/2vacwCYPZjvq5O3LKMYgKnS/Mdj40h/0/+adn8E8HD9utk8n05ydDnlAEyP5j8el9P/1lJV89K17GXnDUBdr8y2cl80f4DOaP7jcjn9r/fNP9llAFh5ON+ZKm9cZjEAU6L5j898LfeXrmG/tn8E8EB946zKQ0m+eLnlAEyD5j8+dZWcvTm39D0A6IptNwCzWf5FNH+ATmj+4zSE9L+m6weA/11/Uer8gwK1AIye5j9em2v9T/9rum4AmK3mPfHH+wK0TvMft81Z/9P/mq5+B+Az9Q2zo3kkyc1FqgEYKc1/3IaS/td01QZgtp5vi+YP0CrNf/yGkv7XdNUAUFX59kJ1AIyS5j8NQ0n/a3rhEcAD9W2zKg8UrAVgVDT/aRhS+l/T8xuAme/+AVqj+U/HkNL/mpqPAP5qsSoARkTzn5Yhpf81PTcA/FH9qiSvK1sKwPBp/tNSV0lW8/7SdSxiliSzzZwsXQjA0Gn+0zO09L+mWZLUdb6+dCEAQ6b5T9Pm+rDS/5pmSVIlX1O6EICh0vynazPDSv9rqvJw/bLZPINcXwCUpvlP1xDT/5pmK3Pf/QMsQvOfto314aX/Nc3q5LWliwAYGs2fjfXhpf81zVLny0oXATAkmj9bK5mfviP3la7jMGZ1ZQAA2C/Nn2S46X9Nsyp5VekiAIZA8+eK+ZF8qHQNhzVL8pLSRQD0nebPFXWVZCXvK13HYc2SDPaEAWAZNH+ahpz+12QAANiF5s+1NteGm/7XNEtyrHQRAH2k+bOdzdX8WOka2jBLslm6CIC+0fzZzqUjOX/6LdXvlq6jDbNUOVe6CIA+0fzZydDT/5pmqXO2dBEAfaH5s5uhp/81zZKcKV0EQB9o/uzmcvrffypdR1tmdfKnpYsAKE3zZy+X0/+2StfRllmVPFK6CICSNH/2Y76W+0vX0KZZqvzf0kUAlKL5sx91lWQ17y9dR5tmVZ2HSxcBUILmz36NJf2vaba1kk+XLgJg2TR/DmIs6X9Ns3xF/ijJ6dKFACyL5s9Bbc7y3tI1tG2WqqrrKp8qXQjAMmj+HNSlIzl/+q5qNAFAV8ySpKrzidKFAHRN82cRG0fHk/7XNEuSeZ1fLV0IQJc0fxa1cWQ86X9N1ZW/mD1Y/0mSV5crBaAbmj+L2lrJ/JGTWUtVzUvX0rZZ468/UqwKgI5o/hzG5fS/0TX/pDEAzGfjyTcGSDR/Dm9s6X9NL2wAvrL6nSR/UK4UgPZo/hzWGNP/mmbX/P0oX3QApkXzpw1jTP9rumoAmCc/l+RsoVoADk3zpy2b6+NL/2u6egNwW/V0qvxUoVoADkXzp02bGV/6X1N13Y/8Qf2K2Ur+OMnR5ZcDsBjNnzZdOpLzj95THS9dR5eufQcgeV31eKr8bIFaABai+dO2sab/NV0/ACSZz/Ivkzyz3FIADk7zpwtjTf9r2nYAyJ+vTiX5weWWAnAwmj9d2FrJ/PQdua90HV3bfgBIMn82H0jyf5ZYC8C+af50Zczpf007DgB5U7Uxr/O3kmwsrxyAvWn+dGnM6X9NOw8ASfLa6lOp8yNLqgVgT5o/XRp7+l/T7gNAkvmZ/GBV5dPLKAZgN5o/XRt7+l/TngNA3lRtbG3lbyR5qvtyALan+bMMm2vjTv9r2nsASJKvqh6ZJ9+c5FK35QBcT/NnWTZn407/a9rfAJAkt1W/leQfd1cKwPU0f5bl0pGcP31XNfoAoCv2PwAkmd9W/USq/FBXxQA0af4s08b6+NP/mg40ACTJ/DXVD6RyGQB0S/Nn2TbWx5/+13T9Hwa0H3VdzR7Mj6XKP2y5HgDNn6XbWsn8kZM5kqraKl3Lshx4A5Akqap6/trqPanzj5KMPi0JWB7NnxIup/9Npvkniw4Al81fW72vSr490gKBFmj+lDKV9L+mQw0ASbJ1W3XfPHlrks+2UA8wUZo/pUwp/a/p0ANAkuS26rfmyRvq5L+08vMBk6L5U9KU0v+a2hkAkuS26un6NfmGVPlnqXOutZ8XGDXNn9I216eT/tfU3gCQJFU1n7+m+tF58vq6zkdb/bmB0dH86YPNTCf9r2mxM8B9Wnmo/pt1nR9O8uVdfh1geDR/+uDSkZx/9J7qeOk6Smh3A3CNrddUvzh/Nq+tqvy9JI91+bWA4dD86Yuppf81dToAJHnuTxN8TfUf5jfmKy8PAv+r868J9JbmT59srOVnS9dQSqePAHay+kB99/y5YeBkkhtK1AAsn+ZPn0wx/a+pyADwvMfq4ytfyD11lXcneVeSG4vWA3RG86dvzp3Ig4+/rXpt6TpKWS361V9ZndtK7k9yf+p6JQ/kDbNZ7q2qnKzrvDGlBxSgFZo/fTTF9L+m/jbYP65vWdnIO+oqJ1Pn7UluKl0ScHCaP31UV8nZm3PLFAOArujvANBkOwCDpPnTVxeO5dRn31HdUrqOkobZRG0HoPc0f/rszIvyi09+ffWtpesoaZgDQJPtAPSO5k/fPfPi/MXTd1WTzQBIxtgobQegKM2fvpty+l/T+AaAJtsBWCrNnyE4e2M+8cRbqztL11HatJqh7QB0RvNnKJ65Od9++uuqnytdR2nTGgCabAegNZo/Q3E5/W8tVTUvXUtpGt4VtgOwEM2fIZl6+l9T2STAPvny6smt5OeT/LztAOyP5s/QTD39r0lT2w/bAbiO5s/QSP+7mgHgoGwHQPNnkKT/XU3jOizbASZG82eopP9dzQDQJtsBRk7zZ8ik/11Nc+qS7QAjovkzZNL/rmcAWBbbAQZM82fopP9dTwMqxXaAgdD8GQPpf9czAPSB7QA9pfkzBtL/tqfJ9JHtAD2g+TMW0v+2Jwmwj6QSUpjmz5hI/9ueRjI0tgN0TPNnTKT/7cwAMGS2A7RM82dspP/tTLMYE9sBDkHzZ4yk/+3MADBWtgMcgObPWEn/25mGMBW2A+xA82espP/tzgAwRbYDXKb5M2bS/3bnQx/bgYnS/Bk76X+7MwBwNduBSdD8GTvpf3vzwc7ubAdGR/NnCqT/7U0SILuTSjgqmj9TIf1vbz68WZztwKBo/kyF9L/9MQDQDtuBXtP8mRLpf/vjA5pu2A70hubP1Ej/2x8DAN2zHShG82eKpP/tjw9hls92YCk0f6ZI+t/+GQAoy3agE5o/UyX9b/980NIvtgOHpvkzZdL/9s8AQH/ZDhyY5s+USf87GB+mDIftwK40f6ZO+t/BSAJkOKQS7kjzB+l/BzXZD0xGZsLbAc0fpP8twgDA+ExoO6D5w3Ok/x3cKD8U4Soj3Q5o/vAC6X8HZwBgWkayHdD84WrS/w5ucB980KoBbgc0f7ia9L/FGADgigFsBzR/uJ70v8X06sMNeqVn2wHNH7Yn/W8xBgDYj8LbAc0ftif9b3EGAFjEErcDmj/sTPrf4iQBwiKWlEqo+cPupP8tzgYA2tbSdkDzh91J/zscAwB0acHtgOYPe5P+dzgGAFimfWwHNH/YH+l/h2MAgFK22Q685KlUmj/sj/S/wzEAQE+c+B/13bc8kd8sXQcMgfS/w5uVLgB4zpmvrT62sZaLpeuAIdhYj+/8D8kAAD1y6Wh+v3QNMAQb6/mZ0jUMnQEAemR+JL9Uugbou62VzE/fkftK1zF0BgDokdVn8sH5SurSdUCfXTyWh0X/Hp4BAHrksXurc5fW80TpOqDPpP+1wwAAPbO5lt8oXQP0VV0lWc37S9cxBgYA6JnNyocb7OTi0ZwS/dsOAwD0zOm7qk86B4Tt2ZC1xwAAPeQcELa3Oct7S9cwFgYA6CHngHC9S0dyXvRvewwA0EPOAeF60v/aZQCAHnIOCNeT/tcuAwD0lJed4AXS/9pnAICecg4IL5D+1z4DAPSUc0B4gfS/9hkAoMecA4L0v64YAKDHnAOC9L+uGACgx5wDghdiu2IAgB5zDgjS/7piAICe890PUyb9rzsGAOg554BMmfS/7hgAoOecAzJl0v+6YwCAAXAOyBRJ/+uWAQAGwDkgUyT9r1sGABgA54BMkfS/bhkAYACcAzI10v+6ZwCAgXAOyJRI/+ueAQAGwjkgU2Lg7Z4BAAbCOSBTIv2vewYAGBDngEyB9L/lMADAgDgHZAqk/y2HAQAGxDkgUyD9bzmq0gUAB3PrR+vHjp7LK0rXAV3YWsn8kZNZEwDUPRsAGBhvRzNm0v+WxwAAA+MckDGT/rc8BgAYGOeAjJX0v+UyAMAAOQdkjKT/LZcBAAbIOSBj5P2W5TIAwAA5B2SMpP8tlzNAGCjngIzJpSM5/+g91fHSdUyJDQAMlHUpYyL9b/kMADBQzgEZE+l/y+cRAAzYqz5cX1jbyHrpOuAwpP+VYQMAA+YckDGQ/leGAQAGzDkgYyD9rwwDAAyYc0CGTvpfOQYAGLDH7q3OXVrPE6XrgEVJ/yvHAAAD5xyQIfPrtxwDAAycc0CGTPpfOc4AYQScAzJE0v/KsgGAEXAOyBBJ/yvLAAAj4ByQIZL+V5ZHADACr/yV+vh6cma25fc0wyD9rzwbABgB54AMjfS/8gwAMBLOqRgS6X/lGQBgJJwDMhTS//rB80IYEeeADMGFYzn12XdUt5SuY+psAGBEnAMyBB5X9YMBAEbEOSBDIP2vHzwCgBFxDkjfSf/rDxsAGBHngPSd9L/+MADAyHi+Sp9J/+sPAwCMjHNA+mprJfPTd+S+0nXwHAMAjMzpu6pPbqzlYuk64FrS//rFAAAj5ByQPpL+1y8GABgh54D0jfS//jEAwAitPpMPzldSl64Drrh4NKeevKM6VboOXmAAgBFyDkjfuE7pHwMAjJQPXPpE+l//GABgpJwD0heXjuT86bsqAUA9YwCAkXIOSF9I/+snAwCMmHNA+kD6Xz8ZAGDEnANSmvS//jIAwIg5B6Q06X/9ZQCAEXMOSGnS//rLAAAj5xyQUqT/9ZsBAEbOOSClSP/rNwMAjJxzQEqxfeo3AwBMgHNASpD+128GAJgA54Asm/S//jMAwAQ4B2TZpP/1nwEAJsA5IMsm/a//DAAwEV7IYlmk/w2DAQAmwjkgyyL9bxgMADARzgFZFul/w2AAgAlxDkjXpP8NhwEAJsQ5IF2T/jccBgCYEOeAdM3LpsNhAIAJcQ5I16T/DYcBACbGd2h0RfrfsBgAYGKcA9IV6X/DYgCAiXEOSFek/w2LAQAmyDkgbZP+NzwGAJgg54C0Tfrf8BgAYIKcA9I26X/DYwCACXIOSJuk/w2TAQAmyjkgbZH+N0wGAJgo54C0xTA5TAYAmCjngLRF+t8wGQBgwpwDcljS/4bLAAAT5hyQw5L+N1wGAJiw1WfywfnMOSCLk/43XFXpAoCybv1o/djRc3lF6ToYnq2VzB85mTUBQMNkAwAT5w1uFiX9b9gMADBxzgFZlPS/YTMAwMQ5B2QR0v+GzwAAOAfkwKT/DZ8BAHAOyIF5d2T4DACAc0AOTPrf8DkDBJI4B2T/Lh3J+UfvqY6XroPDsQEAkljpsn/S/8bBAAAkcQ7I/kn/GwePAIDnverD9YW1jayXroP+kv43HjYAwPOcA7IX6X/jYQAAnucckL1I/xsPAwDwPOeA7Eb637gYAIDnPXZvde7S0TxRug76SfrfuBgAgKs4B2Qnfm2MiwEAuIpzQHYi/W9cnAEC13EOyLWk/42PDQBwHeeAXEv63/gYAIDrOAfkWtL/xscjAOA6r/yV+vh6nTOzuc8IpP+NlQ0AcB3ngDRJ/xsnAwCwLSdfXCH9b5wMAMC2nAOSSP8bM8/3gB05B+TCsZz67DuqW0rXQftsAIAdOQfEo6DxMgAAO3IOiPS/8fIIANiRc8Bpk/43bjYAwI6cA06b9L9xMwAAu/IMeLqk/42bAQDYlXPAadpayfz0HbmvdB10xwAA7Or0XdUnN9ZysXQdLJf0v/EzAAB7cg44PdL/xs8AAOzJOeC0SP+bBgMAsKfVZ/LB+Sx16TpYjotHc+rJO6pTpeugWwYAYE/OAafF5cc0GACAfdEUpkP63zQYAIB9cQ44DZeO5PzpuyoBQBNgAAD2xTngNEj/mw4DALBvzgHHT/rfdBgAgH1zDjhu0v+mxQAA7JtzwHGT/jctBgBg35wDjpv0v2kxAAAH4hxwnKT/TY8BADgQ54DjJP1vegwAwIE4Bxwnm53pMQAAB+YccHyk/02PAQA4MOeA4yL9b5oMAMCBOQccF+l/02QAAA7MOeC4SP+bJgMAsBAvjY2D9L/pMgAAC3EOOA7S/6bLAAAsxDngOEj/my4DALAw54DDJv1v2gwAwMKcAw6b9L9pMwAAC3MOOGxe5Jw2AwCwMOeAwyb9b9oMAMCh+C5ymKT/YQAADsU54DBJ/8MAAByKc8Bhkv6HAQA4NOeAwyL9j8QAALTAOeCwSP8jMQAALXAOOCzS/0gMAEALnAMOh/Q/rjAAAK1wDjgM0v+4wgAAtMI54DAY1LjCAAC0wjngMEj/4woDANAa54D9Jv2PJgMA0BrngP0m/Y8mAwDQGueA/Sb9j6aqdAHAuNz60fqxo+fyitJ1cLWtlcwfOZk1AUBcYQMAtMpb5v0k/Y9rGQCAVjkH7Cfpf1zLAAC0yjlg/0j/YzsGAKB1zgH7Rfof2zEAAK1zDtgv3stgOwYAoHX1Zn7SOWB/SP9jOwYAoHVP3V2d8acD9oP0P3ZiAAA6Ye3cD9L/2IkBAOiEc8B+kP7HTiQBAp151YfrC2sbWS9dx1RJ/2M3NgBAZ5wDliX9j90YAIDOOAcsS/ofuzEAAJ1xDliO9D/2YgAAOuMcsBzpBTD6PgAABKZJREFUf+zFAAB0yjlgGf67sxcDANAp54BlSP9jL84Agc45B1yuS0dy/tF7quOl66DfbACAzjkHXC7pf+yHAQDonHPA5ZL+x354BAB07mUfq0+ceDZfmM195nRN+h/7ZQMAdO6pu6szF4/lT0vXMQUXj+UBzZ/9MAAAS7EllW4pNo/k35eugWEwAABLce5E/tXcA4BOba5m66mtfLB0HQyDAQBYimffVD198ajHAF26eCyfyd3VZuk6GAYDALA0m8fzY6VrGLPNtfxA6RoYDgs5YKle9ZH6/NqlHC1dx9hcOJanPvuO6uWl62A4bACApbp4LB8qXcMYba7brnAwNgDAUt34qfrmlz6eJ1e2fAPSlo31XPh/78wNzv84CL8BgaV69k3V0xdutAVo04Ub8m80fw7KBgBYulf+Sn18bSXPrF7KWulahu7S0Xz+0XdWLy5dB8NjAwAs3WP3VufOH89/LF3HGJw/ln9eugaGyQYAKOZLfr1+ev18Xlq6jqE6dyIPPf626rbSdTBMNgBAMWdvyDdJB1zM1krm59byztJ1MFwGAKCYz31d9dvnX5QPl65jiM7fmPd9/s7qT0rXwXCZvYGyPlav3rqRx4+ey82lSxmK88fzyGNvr/5c6ToYNhsAoKy7q80LJ/LmzdVslS5lCDbWc+HZL8rXlK6D4TMAAMWdvr164MxNeU9tJ7mr+Sz1meP5xmffVD1duhaGzwAA9MLpN1f/7uyL8oHSdfRVXSXnbsoP/Nmd1UdL18I4mLeBXnnFb9a/fvwLeXvpOvrmzE356Sfvrr6rdB2MhwEA6J1X/Nf6946fyV8oXUdfnL0pH37i7upk6ToYF48AgN55/G3VG86eyG+XrqMPzt6UX9X86YIBAOilJ95WvfnsTfm10nWUdPam3P/E3dW9petgnAwAQG89cXd1z9mb8ktTuw6oq+TMi/PeJ+6u3l26FsZrYr+tgCF66X+r//6Nz+bHV7bG/03L5mq2ztyU7zj95uq+0rUwbgYAYBBu/kR957Gz+ciRizleupauXDyaz51/UW4/fXv1QOlaGL/RT9PAODz9lurjK0fz0rM35dfG9kigrpKzN+XX/nQ9L9f8WZaR/TYCpuDmT9TfdfxMPrB2Keulazmsi+s5c/bGfMvnvq76SOlamBYDADBIr/5YffR88lPHzuRbh/huwNZK5udP5BeeTL4jd1ebpethegwAwKB90Sfq1x3ZyC8dP5PXV3XpavY2n6U+d0P+e31DvvnU11ZPlq6H6TIAAKNweRD4iWNn85bZvH+fbVsrmV84nt86n3zn599a/VHpeqB3v0kADuNlH6+/cnUrP7p2Pu9c2yj/jsClo/nCpaP50Pkj+b4v3F79Wel64AoDADBaN3+i/q7VS/ne9Yt53epGVpf1dTeO5MLF9Xx6YzU/6E/vo68MAMAkvPTj9V9f28p3r2zkjWuX8tI2XxzcPJKNjbU8Pl/LxzeSHz99V/XJtn5u6IoBAJikmz9R37mylW+a1Xld5vnS2VZevrqZG5PMZvOsVPNUVZ3MV1LXSV2vZGteZWO+kmfmK3lyPssjWcknL2zklz3TZ4j+P+vDIIU3t9PzAAAAAElFTkSuQmCC";var xy=n(184);const Iy=t=>{let{postID:n,notun_data:r}=t;const[i,s]=(0,e.useState)(""),[o,a]=(0,e.useState)([]),[l,c]=(0,e.useState)(!1),u=Rd(ky,"postContainer/".concat(n,"/Comments")),h=Dd(ky,"/postContainer",n);return(0,e.useEffect)((()=>{Ff(u,(e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));a((()=>t))}))}),[]),(0,xy.jsxs)("div",{className:"my-2 max-h-56 overflow-y-auto",children:[(0,xy.jsx)("div",{children:o.map((e=>(0,xy.jsxs)("div",{className:"flex",children:[(0,xy.jsx)("img",{src:e.image,alt:e.name,className:"w-8 h-8 rounded-full m-1"}),(0,xy.jsxs)("div",{className:"Comment bg-gray-700 p-2 m-1 rounded-xl",children:[(0,xy.jsx)("div",{className:"font-semibold",children:e.name}),(0,xy.jsx)("div",{className:"text-gray-300",children:e.text})]})]},e.id)))}),(0,xy.jsx)("section",{className:"sticky bottom-0 w-full bg-gray-800 p-2",children:(0,xy.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{c(!0),await Uf(u,{text:i,user_id:r.id,image:r.photo,name:r.name,time:Bf()}),await jf(h,{commentCount:Wf(1)}),s("")}catch(u_){console.log("error to upload comment")}finally{c(!1)}},className:"flex mt-2 space-x-2",children:[(0,xy.jsx)("img",{src:r.photo,alt:r.name,className:"h-8 w-8 rounded-full m-auto"}),(0,xy.jsx)("input",{type:"text",placeholder:"Add a comment...",value:i,onChange:e=>s(e.target.value),className:"w-full p-2 bg-gray-700 text-gray-200 rounded-full focus:outline-none",disabled:l}),(0,xy.jsx)("button",{type:"submit",className:"bg-cyan-500 text-white p-2 rounded-lg ".concat(l&&"cursor-not-allowed opacity-50"),disabled:l,children:l?"Posting...":"Post"})]})})]})};function Ny(t){let{notun_data:n,unknown:r}=t;const i=Rd(ky,"/postContainer"),[s,o]=(0,e.useState)(null),[a,l]=(0,e.useState)([]);(0,e.useEffect)((()=>{const e=Ff(i,(e=>{const t=e.docs.map((e=>({...e.data(),post_ID:e.id})));if("Profile"===r){const e=t.filter((e=>e.uid===n.id));l(e)}else l(t)}));return()=>e()}),[]);return(0,e.useEffect)((()=>{console.log("Updated Data:",a)}),[a]),(0,xy.jsx)("div",{className:"py-6  login-form",children:a.map((e=>(0,xy.jsx)("div",{className:"bg-gray-800 text-white mx-5 rounded-lg  my-6",children:(0,xy.jsxs)("div",{className:"",children:[(0,xy.jsxs)("div",{className:"p-4",children:[(0,xy.jsxs)("div",{className:"flex items-center",children:[(0,xy.jsx)("img",{src:e.user_image,alt:"User Avatar",className:"w-10 h-10 mr-1 rounded-full"}),(0,xy.jsxs)("div",{className:"",children:[(0,xy.jsx)("div",{className:"px-1 font-medium text-gray-300",children:e.user_name}),(0,xy.jsx)("div",{className:"px-1 text-gray-400 text-sm",children:"3d."})]})]}),(0,xy.jsx)("div",{className:"mt-2",children:e.postText})]}),(0,xy.jsx)("div",{className:"my-3",children:e.post_image?(0,xy.jsx)("img",{src:e.post_image,alt:"",className:"w-full"}):(0,xy.jsx)("span",{})}),(0,xy.jsxs)("div",{className:"my-2 ml-4 flex flex-row space-x-2",children:[(0,xy.jsx)("div",{className:"w-5 h-5 rounded-full",children:(0,xy.jsx)("img",{src:Ty,alt:"Like",className:"bg-cyan-500 rounded-full p-1"})}),(0,xy.jsx)("div",{className:"",children:e.like_count})]}),(0,xy.jsx)("hr",{className:"border-solid border-gray-700 my-4"}),(0,xy.jsxs)("div",{className:"flex ",children:[(0,xy.jsx)("button",{className:"".concat(e.liked_by&&e.liked_by.includes(n.id)?"bg-cyan-300 bg-opacity-80 hover:bg-cyan-400 hover:bg-opacity-50":" bg-gray-600 hover:bg-gray-700"," flex-1 space-x-1 flex my-2   mx-4 rounded-md p-1 justify-center content-center"),title:"Like",onClick:()=>(async(e,t,r)=>{const i=Dd(ky,"/postContainer",e);try{t.includes(n.id)?await jf(i,{like_count:r-1,liked_by:t.filter((e=>e!==n.id))}):await jf(i,{like_count:Wf(1),liked_by:qf(n.id)})}catch(u_){console.log("Error:",u_)}})(e.post_ID,e.liked_by,e.like_count),children:(0,xy.jsx)("div",{className:"flex",children:(0,xy.jsx)("img",{src:Ty,alt:"Like",className:"w-6 h-6 bg-cyan-500 rounded-full p-1"})})}),(0,xy.jsxs)("button",{className:"".concat(s==e.post_ID?"bg-cyan-300 bg-opacity-80 hover:bg-cyan-400 hover:bg-opacity-50":" bg-gray-600 hover:bg-gray-700"," flex-1 space-x-1 flex my-2  mx-4 rounded-md p-1 justify-center content-center"),title:"Comment",onClick:()=>o(e.post_ID),children:[(0,xy.jsx)("div",{className:"flex",children:(0,xy.jsx)("img",{src:Cy,alt:"Comment",className:"w-6 h-6"})}),(0,xy.jsxs)("p",{className:"m-auto px-1",children:[" ",e.commentCount?e.commentCount:""," "]})]}),(0,xy.jsx)("button",{className:"flex-1 space-x-1 flex my-2 bg-gray-700 hover:bg-gray-600 mx-4 rounded-md p-1 justify-center content-center ",title:"Share",children:(0,xy.jsx)("div",{className:"flex",children:(0,xy.jsx)("img",{src:Ay,alt:"Like",className:"w-6 h-6"})})})]}),(0,xy.jsx)("div",{className:"".concat(s==e.post_ID?"p-2 px-4":"hidden"," max-h-60"),children:(0,xy.jsx)(Iy,{postID:e.post_ID,notun_data:n})})]})})))})}const Py=e=>{let{userDatabase:t,userId:n}=e;const r=t[0]?t.find((e=>e.id===n)):null,i=r&&r.friends?t.filter((e=>!0===r.friends[e.id])):[];return console.log(i),(0,xy.jsx)("div",{className:"py-6  login-form",children:(0,xy.jsx)("div",{children:i.length>0?i.map((e=>(0,xy.jsxs)("div",{className:"bg-gray-800 p-1 my-2 flex items-center space-x-2 hover:transform hover:scale-110 transition-transform duration-300 rounded-md",children:[(0,xy.jsx)("img",{src:e.photo,alt:e.name,className:"w-8 h-8 p-1 rounded-full"}),(0,xy.jsx)("div",{className:"text-sm font-sans p-1",children:e.name})]},e.id))):(0,xy.jsx)("div",{className:"",children:"No friends"})})})};const Ry=n.p+"static/media/up.d6ea8d6b5f71f0a293b5e81dcebb21ae.svg";const Dy=n.p+"static/media/image.5e28bdb2bd63a64061bf10aed46dc3f8.svg";const Oy=n.p+"static/media/upload.83ae2a8702f1fea1b3310e377586ac7d.svg";const Ly=n.p+"static/media/close.f8cce9d8e61785e46719dbc1d4bf0915.svg";var My,jy=n(763),Uy=new Uint8Array(16);function Fy(){if(!My&&!(My="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return My(Uy)}const zy=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const Vy=function(e){return"string"===typeof e&&zy.test(e)};for(var By=[],qy=0;qy<256;++qy)By.push((qy+256).toString(16).substr(1));const Wy=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(By[e[t+0]]+By[e[t+1]]+By[e[t+2]]+By[e[t+3]]+"-"+By[e[t+4]]+By[e[t+5]]+"-"+By[e[t+6]]+By[e[t+7]]+"-"+By[e[t+8]]+By[e[t+9]]+"-"+By[e[t+10]]+By[e[t+11]]+By[e[t+12]]+By[e[t+13]]+By[e[t+14]]+By[e[t+15]]).toLowerCase();if(!Vy(n))throw TypeError("Stringified UUID is invalid");return n};const Hy=function(e,t,n){var r=(e=e||{}).random||(e.rng||Fy)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return Wy(r)},Ky="@firebase/database",Gy="1.0.2";let Qy="";function Xy(e){Qy=e}class Yy{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),O(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:D(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Jy{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return M(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Zy=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Yy(t)}}catch(t){}return new Jy},$y=Zy("localStorage"),e_=Zy("sessionStorage"),t_=new ae("@firebase/database"),n_=function(){let e=1;return function(){return e++}}(),r_=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,o(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new H;n.update(t);const r=n.digest();return c.encodeByteArray(r)},i_=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=i_.apply(null,n):e+="object"===typeof n?O(n):n,e+=" "}return e};let s_=null,o_=!0;const a_=function(e,t){o(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(t_.logLevel=ne.VERBOSE,s_=t_.log.bind(t_),t&&e_.set("logging_enabled",!0)):"function"===typeof e?s_=e:(s_=null,e_.remove("logging_enabled"))},l_=function(){if(!0===o_&&(o_=!1,null===s_&&!0===e_.get("logging_enabled")&&a_(!0)),s_){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=i_.apply(null,t);s_(r)}},c_=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];l_(e,...n)}},u_=function(){const e="FIREBASE INTERNAL ERROR: "+i_(...arguments);t_.error(e)},h_=function(){const e="FIREBASE FATAL ERROR: ".concat(i_(...arguments));throw t_.error(e),new Error(e)},d_=function(){const e="FIREBASE WARNING: "+i_(...arguments);t_.warn(e)},f_=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},p_="[MIN_NAME]",g_="[MAX_NAME]",m_=function(e,t){if(e===t)return 0;if(e===p_||t===g_)return-1;if(t===p_||e===g_)return 1;{const n=S_(e),r=S_(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},v_=function(e,t){return e===t?0:e<t?-1:1},y_=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+O(t))},__=function(e){if("object"!==typeof e||null===e)return O(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=O(t[r]),n+=":",n+=__(e[t[r]]);return n+="}",n},w_=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function b_(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const E_=function(e){o(!f_(e),"Invalid JSON number");const t=1023;let n,r,i,s,a;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=s+t,i=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const l=[];for(a=52;a;a-=1)l.push(i%2?1:0),i=Math.floor(i/2);for(a=11;a;a-=1)l.push(r%2?1:0),r=Math.floor(r/2);l.push(n?1:0),l.reverse();const c=l.join("");let u="";for(a=0;a<64;a+=8){let e=parseInt(c.substr(a,8),2).toString(16);1===e.length&&(e="0"+e),u+=e}return u.toLowerCase()};const k_=new RegExp("^-?(0*)\\d{1,10}$"),S_=function(e){if(k_.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},T_=function(e){try{e()}catch(t){setTimeout((()=>{const e=t.stack||"";throw d_("Exception was thrown by user callback.",e),t}),Math.floor(0))}},C_=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class A_{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){d_('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class x_{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(l_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',d_(e)}}class I_{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}I_.OWNER="owner";const N_="5",P_=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,R_="ac",D_="websocket",O_="long_polling";class L_{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=$y.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&$y.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function M_(e,t,n){let r;if(o("string"===typeof t,"typeof type must == string"),o("object"===typeof n,"typeof params must == object"),t===D_)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==O_)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return b_(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class j_{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;M(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return p(this.counters_)}}const U_={},F_={};function z_(e){const t=e.toString();return U_[t]||(U_[t]=new j_),U_[t]}class V_{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&T_((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const B_="start";class q_{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=c_(e),this.stats_=z_(t),this.urlFn=e=>(this.appCheckToken&&(e[R_]=this.appCheckToken),M_(t,O_,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new V_(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(A()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new W_((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s,o,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===B_)n.id=s,n.password=o;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[B_]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=N_,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[R_]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&P_.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){q_.forceAllow_=!0}static forceDisallow(){q_.forceDisallow_=!0}static isAvailable(){return!A()&&(!!q_.forceAllow_||!q_.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=O(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=h(t),r=w_(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(A())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=O(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class W_{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,A())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=n_(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=W_.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(i){l_("frame writing exception"),i.stack&&l_(i.stack),l_(i)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||l_("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){A()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{l_("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(n){}}),Math.floor(1))}}let H_=null;"undefined"!==typeof MozWebSocket?H_=MozWebSocket:"undefined"!==typeof WebSocket&&(H_=WebSocket);class K_{constructor(e,t,n,r,i,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=c_(this.connId),this.stats_=z_(t),this.connURL=K_.connectionURL_(t,s,o,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={};return s.v=N_,!A()&&"undefined"!==typeof location&&location.hostname&&P_.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s[R_]=r),i&&(s.p=i),M_(e,D_,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,$y.set("previous_websocket_failure",!0);try{let e;if(A()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":"Firebase/".concat(N_,"/").concat(Qy,"/").concat(process.platform,"/").concat(t),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"/sec-mobile-commerce",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new H_(this.connURL,[],e)}catch(n){this.log_("Error instantiating WebSocket.");const e=n.message||n.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){K_.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==H_&&!K_.forceDisallow_}static previouslyFailed(){return $y.isInMemoryStorage||!0===$y.get("previous_websocket_failure")}markConnectionHealthy(){$y.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=D(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(o(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=O(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=w_(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}K_.responsesRequiredToBeHealthy=2,K_.healthyTimeout=3e4;class G_{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[q_,K_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=K_&&K_.isAvailable();let n=t&&!K_.previouslyFailed();if(e.webSocketOnly&&(t||d_("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[K_];else{const e=this.transports_=[];for(const t of G_.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);G_.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}G_.globalTransportInitialized_=!1;class Q_{constructor(e,t,n,r,i,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=c_("c:"+this.id+":"),this.transportManager_=new G_(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=C_((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=y_("t",e),n=y_("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=y_("t",e),n=y_("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=y_("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?u_("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):u_("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),N_!==n&&d_("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),C_((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):C_((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&($y.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class X_{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class Y_{constructor(e){this.allowedEvents_=e,this.listeners_={},o(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){o(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class J_ extends Y_{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||T()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new J_}getInitialEvent(e){return o("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const Z_=32,$_=768;class ew{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function tw(){return new ew("")}function nw(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function rw(e){return e.pieces_.length-e.pieceNum_}function iw(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new ew(e.pieces_,t)}function sw(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function ow(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function aw(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new ew(t,0)}function lw(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof ew)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new ew(n,0)}function cw(e){return e.pieceNum_>=e.pieces_.length}function uw(e,t){const n=nw(e),r=nw(t);if(null===n)return t;if(n===r)return uw(iw(e),iw(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function hw(e,t){if(rw(e)!==rw(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function dw(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(rw(e)>rw(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class fw{constructor(e,t){this.errorPrefix_=t,this.parts_=ow(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=X(this.parts_[n]);pw(this)}}function pw(e){if(e.byteLength_>$_)throw new Error(e.errorPrefix_+"has a key path longer than "+$_+" bytes ("+e.byteLength_+").");if(e.parts_.length>Z_)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Z_+") or object contains a cycle "+gw(e))}function gw(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class mw extends Y_{constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new mw}getInitialEvent(e){return o("visible"===e,"Unknown event type: "+e),[this.visible_]}}const vw=1e3;class yw extends X_{constructor(e,t,n,r,i,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=yw.nextPersistentConnectionId_++,this.log_=c_("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=vw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!A())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");mw.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&J_.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(O(i)),o(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new E,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),o(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),o(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const s=i.d,o=i.s;yw.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==o&&this.removeListen_(n,r),e.onComplete&&e.onComplete(o,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&M(e,"w")){const n=j(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();d_("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=L(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=L(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),o(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+O(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):u_("Unrecognized action received from server: "+O(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){o(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=vw,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=vw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=vw),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+yw.nextConnectionId_++,i=this.lastSessionId;let s=!1,a=null;const l=function(){a?a.close():(s=!0,n())},c=function(e){o(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(e)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[o,l]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);s?l_("getToken() completed but was canceled"):(l_("getToken() completed. Creating connection."),this.authToken_=o&&o.accessToken,this.appCheckToken_=l&&l.token,a=new Q_(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{d_(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(u_){this.log_("Failed to get token: "+u_),s||(this.repoInfo_.nodeAdmin&&d_(u_),l())}}}interrupt(e){l_("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){l_("Resuming connection for reason: "+e),delete this.interruptReasons_[e],U(this.interruptReasons_)&&(this.reconnectDelay_=vw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>__(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new ew(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){l_("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){l_("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";A()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Qy.replace(/\./g,"-")]=1,T()?e["framework.cordova"]=1:C()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=J_.getInstance().currentlyOnline();return U(this.interruptReasons_)&&e}}yw.nextPersistentConnectionId_=0,yw.nextConnectionId_=0;class _w{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new _w(e,t)}}class ww{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new _w(p_,e),r=new _w(p_,t);return 0!==this.compare(n,r)}minPost(){return _w.MIN}}let bw;class Ew extends ww{static get __EMPTY_NODE(){return bw}static set __EMPTY_NODE(e){bw=e}compare(e,t){return m_(e.name,t.name)}isDefinedOn(e){throw a("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return _w.MIN}maxPost(){return new _w(g_,bw)}makePost(e,t){return o("string"===typeof e,"KeyIndex indexValue must always be a string."),new _w(e,bw)}toString(){return".key"}}const kw=new Ew;class Sw{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Tw{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Tw.RED,this.left=null!=r?r:Cw.EMPTY_NODE,this.right=null!=i?i:Cw.EMPTY_NODE}copy(e,t,n,r,i){return new Tw(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Cw.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Cw.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Tw.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Tw.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Tw.RED=!0,Tw.BLACK=!1;class Cw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cw.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new Cw(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Tw.BLACK,null,null))}remove(e){return new Cw(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Tw.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Sw(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Sw(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Sw(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Sw(this.root_,null,this.comparator_,!0,e)}}function Aw(e,t){return m_(e.name,t.name)}function xw(e,t){return m_(e,t)}let Iw;Cw.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new Tw(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Nw=function(e){return"number"===typeof e?"number:"+E_(e):"string:"+e},Pw=function(e){if(e.isLeafNode()){const t=e.val();o("string"===typeof t||"number"===typeof t||"object"===typeof t&&M(t,".sv"),"Priority must be a string or number.")}else o(e===Iw||e.isEmpty(),"priority of unexpected type.");o(e===Iw||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Rw,Dw,Ow;class Lw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lw.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,o(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Pw(this.priorityNode_)}static set __childrenNodeConstructor(e){Rw=e}static get __childrenNodeConstructor(){return Rw}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Lw(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:Lw.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return cw(e)?this:".priority"===nw(e)?this.priorityNode_:Lw.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:Lw.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=nw(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(o(".priority"!==n||1===rw(e),".priority must be the last token in a path"),this.updateImmediateChild(n,Lw.__childrenNodeConstructor.EMPTY_NODE.updateChild(iw(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Nw(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?E_(this.value_):this.value_,this.lazyHash_=r_(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Lw.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Lw.__childrenNodeConstructor?-1:(o(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=Lw.VALUE_TYPE_ORDER.indexOf(t),i=Lw.VALUE_TYPE_ORDER.indexOf(n);return o(r>=0,"Unknown leaf type: "+t),o(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}Lw.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Mw=new class extends ww{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?m_(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return _w.MIN}maxPost(){return new _w(g_,new Lw("[PRIORITY-POST]",Ow))}makePost(e,t){const n=Dw(e);return new _w(t,new Lw("[PRIORITY-POST]",n))}toString(){return".priority"}},jw=Math.log(2);class Uw{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/jw,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Fw=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new Tw(a,o.node,Tw.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=i(t,l),u=i(l+1,r);return o=e[l],a=n?n(o):o,new Tw(a,o.node,Tw.BLACK,c,u)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const c=i(s+1,a),u=e[s],h=n?n(u):u;l(new Tw(h,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,Tw.BLACK):(a(r,Tw.BLACK),a(r,Tw.RED))}return s}(new Uw(e.length));return new Cw(r||t,s)};let zw;const Vw={};class Bw{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return o(Vw&&Mw,"ChildrenNode.ts has not been loaded"),zw=zw||new Bw({".priority":Vw},{".priority":Mw}),zw}get(e){const t=j(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Cw?t:null}hasIndex(e){return M(this.indexSet_,e.toString())}addIndex(e,t){o(e!==kw,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(_w.Wrap);let s,a=i.getNext();for(;a;)r=r||e.isDefinedOn(a.node),n.push(a),a=i.getNext();s=r?Fw(n,e.getCompare()):Vw;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=s,new Bw(u,c)}addToIndexes(e,t){const n=F(this.indexes_,((n,r)=>{const i=j(this.indexSet_,r);if(o(i,"Missing index implementation for "+r),n===Vw){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(_w.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),Fw(n,i.getCompare())}return Vw}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new _w(e.name,r))),i.insert(e,e.node)}}));return new Bw(n,this.indexSet_)}removeFromIndexes(e,t){const n=F(this.indexes_,(n=>{if(n===Vw)return n;{const r=t.get(e.name);return r?n.remove(new _w(e.name,r)):n}}));return new Bw(n,this.indexSet_)}}let qw;class Ww{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Pw(this.priorityNode_),this.children_.isEmpty()&&o(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return qw||(qw=new Ww(new Cw(xw),null,Bw.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||qw}updatePriority(e){return this.children_.isEmpty()?this:new Ww(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?qw:t}}getChild(e){const t=nw(e);return null===t?this:this.getImmediateChild(t).getChild(iw(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(o(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new _w(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?qw:this.priorityNode_;return new Ww(r,s,i)}}updateChild(e,t){const n=nw(e);if(null===n)return t;{o(".priority"!==nw(e)||1===rw(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(iw(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(Mw,((s,o)=>{t[s]=o.val(e),n++,i&&Ww.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Nw(this.getPriority().val())+":"),this.forEachChild(Mw,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":r_(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new _w(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new _w(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new _w(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,_w.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,_w.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Hw?-1:0}withIndex(e){if(e===kw||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Ww(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===kw||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(Mw),n=t.getIterator(Mw);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===kw?null:this.indexMap_.get(e.toString())}}Ww.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const Hw=new class extends Ww{constructor(){super(new Cw(xw),Ww.EMPTY_NODE,Bw.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ww.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(_w,{MIN:{value:new _w(p_,Ww.EMPTY_NODE)},MAX:{value:new _w(g_,Hw)}}),Ew.__EMPTY_NODE=Ww.EMPTY_NODE,Lw.__childrenNodeConstructor=Ww,Iw=Hw,function(e){Ow=e}(Hw);const Kw=!0;function Gw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Ww.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),o(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new Lw(e,Gw(t))}if(e instanceof Array||!Kw){let n=Ww.EMPTY_NODE;return b_(e,((t,r)=>{if(M(e,t)&&"."!==t.substring(0,1)){const e=Gw(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(Gw(t))}{const n=[];let r=!1;if(b_(e,((e,t)=>{if("."!==e.substring(0,1)){const i=Gw(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new _w(e,i)))}})),0===n.length)return Ww.EMPTY_NODE;const i=Fw(n,Aw,(e=>e.name),xw);if(r){const e=Fw(n,Mw.getCompare());return new Ww(i,Gw(t),new Bw({".priority":e},{".priority":Mw}))}return new Ww(i,Gw(t),Bw.Default)}}!function(e){Dw=e}(Gw);class Qw extends ww{constructor(e){super(),this.indexPath_=e,o(!cw(e)&&".priority"!==nw(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?m_(e.name,t.name):i}makePost(e,t){const n=Gw(e),r=Ww.EMPTY_NODE.updateChild(this.indexPath_,n);return new _w(t,r)}maxPost(){const e=Ww.EMPTY_NODE.updateChild(this.indexPath_,Hw);return new _w(g_,e)}toString(){return ow(this.indexPath_,0).join("/")}}const Xw=new class extends ww{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?m_(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return _w.MIN}maxPost(){return _w.MAX}makePost(e,t){const n=Gw(e);return new _w(t,n)}toString(){return".value"}};function Yw(e){return{type:"value",snapshotNode:e}}function Jw(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Zw(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function $w(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class eb{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Mw}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return o(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return o(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:p_}hasEnd(){return this.endSet_}getIndexEndValue(){return o(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return o(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:g_}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return o(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Mw}copy(){const e=new eb;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function tb(e){const t={};if(e.isDefault())return t;let n;if(e.index_===Mw?n="$priority":e.index_===Xw?n="$value":e.index_===kw?n="$key":(o(e.index_ instanceof Qw,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=O(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=O(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+O(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=O(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+O(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function nb(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Mw&&(t.i=e.index_.toString()),t}class rb extends X_{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=c_("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(o(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=rb.getListenId_(e,n),o={};this.listens_[s]=o;const a=tb(e._queryParams);this.restRequest_(i+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),j(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=rb.getListenId_(e,t);delete this.listens_[n]}get(e){const t=tb(e._queryParams),n=e._path.toString(),r=new E;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,s]=r;i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+B(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let t=null;if(a.status>=200&&a.status<300){try{t=D(a.responseText)}catch(e){d_("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,t)}else 401!==a.status&&404!==a.status&&d_("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()}))}}class ib{constructor(){this.rootNode_=Ww.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function sb(){return{value:null,children:new Map}}function ob(e,t,n){if(cw(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=nw(t);e.children.has(r)||e.children.set(r,sb());ob(e.children.get(r),t=iw(t),n)}}function ab(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{ab(r,new ew(t.toString()+"/"+e),n)}))}class lb{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&b_(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class cb{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new lb(e);const n=1e4+2e4*Math.random();C_(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;b_(e,((e,r)=>{r>0&&M(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),C_(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ub;function hb(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ub||(ub={}));class db{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=ub.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(cw(this.path)){if(null!=this.affectedTree.value)return o(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ew(e));return new db(tw(),t,this.revert)}}return o(nw(this.path)===e,"operationForChild called for unrelated child."),new db(iw(this.path),this.affectedTree,this.revert)}}class fb{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=ub.OVERWRITE}operationForChild(e){return cw(this.path)?new fb(this.source,tw(),this.snap.getImmediateChild(e)):new fb(this.source,iw(this.path),this.snap)}}class pb{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=ub.MERGE}operationForChild(e){if(cw(this.path)){const t=this.children.subtree(new ew(e));return t.isEmpty()?null:t.value?new fb(this.source,tw(),t.value):new pb(this.source,tw(),t)}return o(nw(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new pb(this.source,iw(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class gb{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(cw(e))return this.isFullyInitialized()&&!this.filtered_;const t=nw(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function mb(e,t,n,r,i,s){const o=r.filter((e=>e.type===n));o.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw a("Should only compare child_ events.");const r=new _w(t.childName,t.snapshotNode),i=new _w(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),o.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function vb(e,t){return{eventCache:e,serverCache:t}}function yb(e,t,n,r){return vb(new gb(t,n,r),e.serverCache)}function _b(e,t,n,r){return vb(e.eventCache,new gb(t,n,r))}function wb(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function bb(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Eb;class kb{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Eb||(Eb=new Cw(v_)),Eb);this.value=e,this.children=t}static fromObject(e){let t=new kb(null);return b_(e,((e,n)=>{t=t.set(new ew(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:tw(),value:this.value};if(cw(e))return null;{const n=nw(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(iw(e),t);if(null!=i){return{path:lw(new ew(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(cw(e))return this;{const t=nw(e),n=this.children.get(t);return null!==n?n.subtree(iw(e)):new kb(null)}}set(e,t){if(cw(e))return new kb(t,this.children);{const n=nw(e),r=(this.children.get(n)||new kb(null)).set(iw(e),t),i=this.children.insert(n,r);return new kb(this.value,i)}}remove(e){if(cw(e))return this.children.isEmpty()?new kb(null):new kb(null,this.children);{const t=nw(e),n=this.children.get(t);if(n){const r=n.remove(iw(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new kb(null):new kb(this.value,i)}return this}}get(e){if(cw(e))return this.value;{const t=nw(e),n=this.children.get(t);return n?n.get(iw(e)):null}}setTree(e,t){if(cw(e))return t;{const n=nw(e),r=(this.children.get(n)||new kb(null)).setTree(iw(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new kb(this.value,i)}}fold(e){return this.fold_(tw(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(lw(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,tw(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(cw(e))return null;{const r=nw(e),i=this.children.get(r);return i?i.findOnPath_(iw(e),lw(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,tw(),t)}foreachOnPath_(e,t,n){if(cw(e))return this;{this.value&&n(t,this.value);const r=nw(e),i=this.children.get(r);return i?i.foreachOnPath_(iw(e),lw(t,r),n):new kb(null)}}foreach(e){this.foreach_(tw(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(lw(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class Sb{constructor(e){this.writeTree_=e}static empty(){return new Sb(new kb(null))}}function Tb(e,t,n){if(cw(t))return new Sb(new kb(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=uw(i,t);return s=s.updateChild(o,n),new Sb(e.writeTree_.set(i,s))}{const r=new kb(n),i=e.writeTree_.setTree(t,r);return new Sb(i)}}}function Cb(e,t,n){let r=e;return b_(n,((e,n)=>{r=Tb(r,lw(t,e),n)})),r}function Ab(e,t){if(cw(t))return Sb.empty();{const n=e.writeTree_.setTree(t,new kb(null));return new Sb(n)}}function xb(e,t){return null!=Ib(e,t)}function Ib(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(uw(n.path,t)):null}function Nb(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Mw,((e,n)=>{t.push(new _w(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new _w(e,n.value))})),t}function Pb(e,t){if(cw(t))return e;{const n=Ib(e,t);return new Sb(null!=n?new kb(n):e.writeTree_.subtree(t))}}function Rb(e){return e.writeTree_.isEmpty()}function Db(e,t){return Ob(tw(),e.writeTree_,t)}function Ob(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(o(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Ob(lw(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(lw(e,".priority"),r)),n}}function Lb(e,t){return Qb(t,e)}function Mb(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));o(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,a=e.allWrites.length-1;for(;i&&a>=0;){const t=e.allWrites[a];t.visible&&(a>=n&&jb(t,r.path)?i=!1:dw(r.path,t.path)&&(s=!0)),a--}if(i){if(s)return function(e){e.visibleWrites=Fb(e.allWrites,Ub,tw()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=Ab(e.visibleWrites,r.path);else{b_(r.children,(t=>{e.visibleWrites=Ab(e.visibleWrites,lw(r.path,t))}))}return!0}return!1}function jb(e,t){if(e.snap)return dw(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&dw(lw(e.path,n),t))return!0;return!1}function Ub(e){return e.visible}function Fb(e,t,n){let r=Sb.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)dw(n,e)?(t=uw(n,e),r=Tb(r,t,s.snap)):dw(e,n)&&(t=uw(e,n),r=Tb(r,tw(),s.snap.getChild(t)));else{if(!s.children)throw a("WriteRecord should have .snap or .children");if(dw(n,e))t=uw(n,e),r=Cb(r,t,s.children);else if(dw(e,n))if(t=uw(e,n),cw(t))r=Cb(r,tw(),s.children);else{const e=j(s.children,nw(t));if(e){const n=e.getChild(iw(t));r=Tb(r,tw(),n)}}}}}return r}function zb(e,t,n,r,i){if(r||i){const s=Pb(e.visibleWrites,t);if(!i&&Rb(s))return n;if(i||null!=n||xb(s,tw())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(dw(e.path,t)||dw(t,e.path))};return Db(Fb(e.allWrites,s,t),n||Ww.EMPTY_NODE)}return null}{const r=Ib(e.visibleWrites,t);if(null!=r)return r;{const r=Pb(e.visibleWrites,t);if(Rb(r))return n;if(null!=n||xb(r,tw())){return Db(r,n||Ww.EMPTY_NODE)}return null}}}function Vb(e,t,n,r){return zb(e.writeTree,e.treePath,t,n,r)}function Bb(e,t){return function(e,t,n){let r=Ww.EMPTY_NODE;const i=Ib(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Mw,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=Pb(e.visibleWrites,t);return n.forEachChild(Mw,((e,t)=>{const n=Db(Pb(i,new ew(e)),t);r=r.updateImmediateChild(e,n)})),Nb(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return Nb(Pb(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function qb(e,t,n,r){return function(e,t,n,r,i){o(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=lw(t,n);if(xb(e.visibleWrites,s))return null;{const t=Pb(e.visibleWrites,s);return Rb(t)?i.getChild(n):Db(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function Wb(e,t){return function(e,t){return Ib(e.visibleWrites,t)}(e.writeTree,lw(e.treePath,t))}function Hb(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const l=Pb(e.visibleWrites,t),c=Ib(l,tw());if(null!=c)a=c;else{if(null==n)return[];a=Db(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}function Kb(e,t,n){return function(e,t,n,r){const i=lw(t,n),s=Ib(e.visibleWrites,i);if(null!=s)return s;if(r.isCompleteForChild(n))return Db(Pb(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function Gb(e,t){return Qb(lw(e.treePath,t),e.writeTree)}function Qb(e,t){return{treePath:e,writeTree:t}}class Xb{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;o("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),o(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,$w(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Zw(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Jw(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw a("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,$w(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const Yb=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class Jb{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new gb(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Kb(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:bb(this.viewCache_),i=Hb(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function Zb(e,t,n,r,i){const s=new Xb;let l,c;if(n.type===ub.OVERWRITE){const a=n;a.source.fromUser?l=tE(e,t,a.path,a.snap,r,i,s):(o(a.source.fromServer,"Unknown source."),c=a.source.tagged||t.serverCache.isFiltered()&&!cw(a.path),l=eE(e,t,a.path,a.snap,r,i,c,s))}else if(n.type===ub.MERGE){const a=n;a.source.fromUser?l=function(e,t,n,r,i,s,o){let a=t;return r.foreach(((r,l)=>{const c=lw(n,r);nE(t,nw(c))&&(a=tE(e,a,c,l,i,s,o))})),r.foreach(((r,l)=>{const c=lw(n,r);nE(t,nw(c))||(a=tE(e,a,c,l,i,s,o))})),a}(e,t,a.path,a.children,r,i,s):(o(a.source.fromServer,"Unknown source."),c=a.source.tagged||t.serverCache.isFiltered(),l=iE(e,t,a.path,a.children,r,i,c,s))}else if(n.type===ub.ACK_USER_WRITE){const a=n;l=a.revert?function(e,t,n,r,i,s){let a;if(null!=Wb(r,n))return t;{const l=new Jb(r,t,i),c=t.eventCache.getNode();let u;if(cw(n)||".priority"===nw(n)){let n;if(t.serverCache.isFullyInitialized())n=Vb(r,bb(t));else{const e=t.serverCache.getNode();o(e instanceof Ww,"serverChildren would be complete if leaf node"),n=Bb(r,e)}u=e.filter.updateFullNode(c,n,s)}else{const i=nw(n);let o=Kb(r,i,t.serverCache);null==o&&t.serverCache.isCompleteForChild(i)&&(o=c.getImmediateChild(i)),u=null!=o?e.filter.updateChild(c,i,o,iw(n),l,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(c,i,Ww.EMPTY_NODE,iw(n),l,s):c,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=Vb(r,bb(t)),a.isLeafNode()&&(u=e.filter.updateFullNode(u,a,s)))}return a=t.serverCache.isFullyInitialized()||null!=Wb(r,tw()),yb(t,u,a,e.filter.filtersNodes())}}(e,t,a.path,r,i,s):function(e,t,n,r,i,s,o){if(null!=Wb(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(cw(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return eE(e,t,n,l.getNode().getChild(n),i,s,a,o);if(cw(n)){let r=new kb(null);return l.getNode().forEachChild(kw,((e,t)=>{r=r.set(new ew(e),t)})),iE(e,t,n,r,i,s,a,o)}return t}{let c=new kb(null);return r.foreach(((e,t)=>{const r=lw(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),iE(e,t,n,c,i,s,a,o)}}(e,t,a.path,a.affectedTree,r,i,s)}else{if(n.type!==ub.LISTEN_COMPLETE)throw a("Unknown operation type: "+n.type);l=function(e,t,n,r,i){const s=t.serverCache,o=_b(t,s.getNode(),s.isFullyInitialized()||cw(n),s.isFiltered());return $b(e,o,n,r,Yb,i)}(e,t,n.path,r,s)}const u=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=wb(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Yw(wb(t)))}}(t,l,u),{viewCache:l,changes:u}}function $b(e,t,n,r,i,s){const a=t.eventCache;if(null!=Wb(r,n))return t;{let l,c;if(cw(n))if(o(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=bb(t),i=Bb(r,n instanceof Ww?n:Ww.EMPTY_NODE);l=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=Vb(r,bb(t));l=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const u=nw(n);if(".priority"===u){o(1===rw(n),"Can't have a priority with additional path components");const i=a.getNode();c=t.serverCache.getNode();const s=qb(r,n,i,c);l=null!=s?e.filter.updatePriority(i,s):a.getNode()}else{const o=iw(n);let h;if(a.isCompleteForChild(u)){c=t.serverCache.getNode();const e=qb(r,n,a.getNode(),c);h=null!=e?a.getNode().getImmediateChild(u).updateChild(o,e):a.getNode().getImmediateChild(u)}else h=Kb(r,u,t.serverCache);l=null!=h?e.filter.updateChild(a.getNode(),u,h,o,i,s):a.getNode()}}return yb(t,l,a.isFullyInitialized()||cw(n),e.filter.filtersNodes())}}function eE(e,t,n,r,i,s,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(cw(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=nw(n);if(!l.isCompleteForPath(n)&&rw(n)>1)return t;const i=iw(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,i,Yb,null)}const h=_b(t,c,l.isFullyInitialized()||cw(n),u.filtersNodes());return $b(e,h,n,i,new Jb(i,h,s),a)}function tE(e,t,n,r,i,s,o){const a=t.eventCache;let l,c;const u=new Jb(i,t,s);if(cw(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,o),l=yb(t,c,!0,e.filter.filtersNodes());else{const i=nw(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=yb(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=iw(n),c=a.getNode().getImmediateChild(i);let h;if(cw(s))h=r;else{const e=u.getCompleteChild(i);h=null!=e?".priority"===sw(s)&&e.getChild(aw(s)).isEmpty()?e:e.updateChild(s,r):Ww.EMPTY_NODE}if(c.equals(h))l=t;else{l=yb(t,e.filter.updateChild(a.getNode(),i,h,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function nE(e,t){return e.eventCache.isCompleteForChild(t)}function rE(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function iE(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=cw(n)?r:new kb(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=rE(0,t.serverCache.getNode().getImmediateChild(n),r);c=eE(e,c,new ew(n),l,i,s,o,a)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=rE(0,t.serverCache.getNode().getImmediateChild(n),r);c=eE(e,c,new ew(n),l,i,s,o,a)}})),c}function sE(e,t){const n=bb(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!cw(t)&&!n.getImmediateChild(nw(t)).isEmpty())?n.getChild(t):null}function oE(e,t,n,r){t.type===ub.MERGE&&null!==t.source.queryId&&(o(bb(e.viewCache_),"We should always have a full cache before handling merges"),o(wb(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=Zb(e.processor_,i,t,n,r);var a,l;return a=e.processor_,l=s.viewCache,o(l.eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),o(l.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed"),o(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,aE(e,s.changes,s.viewCache.eventCache.getNode(),null)}function aE(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),mb(e,i,"child_removed",t,r,n),mb(e,i,"child_added",t,r,n),mb(e,i,"child_moved",s,r,n),mb(e,i,"child_changed",t,r,n),mb(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let lE,cE;function uE(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return o(null!=s,"SyncTree gave us an op for an invalid query."),oE(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(oE(s,t,n,r));return i}}function hE(e,t){let n=null;for(const r of e.views.values())n=n||sE(r,t);return n}class dE{constructor(e){this.listenProvider_=e,this.syncPointTree_=new kb(null),this.pendingWriteTree_={visibleWrites:Sb.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function fE(e,t,n,r,i){return function(e,t,n,r,i){o(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Tb(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?yE(e,new fb({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function pE(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(Mb(e.pendingWriteTree_,t)){let t=new kb(null);return null!=r.snap?t=t.set(tw(),!0):b_(r.children,(e=>{t=t.set(new ew(e),!0)})),yE(e,new db(r.path,t,n))}return[]}function gE(e,t,n){return yE(e,new fb({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function mE(e,t,n,r){const i=bE(e,r);if(null!=i){const r=EE(i),s=r.path,o=r.queryId,a=uw(s,t);return kE(e,s,new fb(hb(o),a,n))}return[]}function vE(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=hE(n,uw(e,t));if(r)return r}));return zb(r,t,i,n,!0)}function yE(e,t){return _E(t,e.syncPointTree_,null,Lb(e.pendingWriteTree_,tw()))}function _E(e,t,n,r){if(cw(e.path))return wE(e,t,n,r);{const i=t.get(tw());null==n&&null!=i&&(n=hE(i,tw()));let s=[];const o=nw(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=Gb(r,o);s=s.concat(_E(a,l,e,t))}return i&&(s=s.concat(uE(i,e,r,n))),s}}function wE(e,t,n,r){const i=t.get(tw());null==n&&null!=i&&(n=hE(i,tw()));let s=[];return t.children.inorderTraversal(((t,i)=>{const o=n?n.getImmediateChild(t):null,a=Gb(r,t),l=e.operationForChild(t);l&&(s=s.concat(wE(l,i,o,a)))})),i&&(s=s.concat(uE(i,e,r,n))),s}function bE(e,t){return e.tagToQueryMap.get(t)}function EE(e){const t=e.indexOf("$");return o(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ew(e.substr(0,t))}}function kE(e,t,n){const r=e.syncPointTree_.get(t);o(r,"Missing sync point for query tag that we're tracking");return uE(r,n,Lb(e.pendingWriteTree_,t),null)}class SE{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new SE(t)}node(){return this.node_}}class TE{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=lw(this.path_,e);return new TE(this.syncTree_,t)}node(){return vE(this.syncTree_,this.path_)}}const CE=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},AE=function(e,t,n){return e&&"object"===typeof e?(o(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?xE(e[".sv"],t,n):"object"===typeof e[".sv"]?IE(e[".sv"],t):void o(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},xE=function(e,t,n){if("timestamp"===e)return n.timestamp;o(!1,"Unexpected server value: "+e)},IE=function(e,t,n){e.hasOwnProperty("increment")||o(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&o(!1,"Unexpected increment value: "+r);const i=t.node();if(o(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!==typeof s?r:s+r},NE=function(e,t,n,r){return RE(t,new TE(n,e),r)},PE=function(e,t,n){return RE(e,new SE(t),n)};function RE(e,t,n){const r=e.getPriority().val(),i=AE(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=AE(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new Lw(s,Gw(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new Lw(i))),r.forEachChild(Mw,((e,r)=>{const i=RE(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))})),s}}class DE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function OE(e,t){let n=t instanceof ew?t:new ew(t),r=e,i=nw(n);for(;null!==i;){const e=j(r.node.children,i)||{children:{},childCount:0};r=new DE(i,r,e),n=iw(n),i=nw(n)}return r}function LE(e){return e.node.value}function ME(e,t){e.node.value=t,VE(e)}function jE(e){return e.node.childCount>0}function UE(e,t){b_(e.node.children,((n,r)=>{t(new DE(n,e,r))}))}function FE(e,t,n,r){n&&!r&&t(e),UE(e,(e=>{FE(e,t,!0,r)})),n&&r&&t(e)}function zE(e){return new ew(null===e.parent?e.name:zE(e.parent)+"/"+e.name)}function VE(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===LE(e)&&!jE(e)}(n),i=M(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,VE(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,VE(e))}(e.parent,e.name,e)}const BE=/[\[\].#$\/\u0000-\u001F\u007F]/,qE=/[\[\].#$\u0000-\u001F\u007F]/,WE=10485760,HE=function(e){return"string"===typeof e&&0!==e.length&&!BE.test(e)},KE=function(e){return"string"===typeof e&&0!==e.length&&!qE.test(e)},GE=function(e,t,n){const r=n instanceof ew?new fw(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+gw(r));if("function"===typeof t)throw new Error(e+"contains a function "+gw(r)+" with contents = "+t.toString());if(f_(t))throw new Error(e+"contains "+t.toString()+" "+gw(r));if("string"===typeof t&&t.length>WE/3&&X(t)>WE)throw new Error(e+"contains a string greater than "+WE+" utf8 bytes "+gw(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(b_(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!HE(t)))throw new Error(e+" contains an invalid key ("+t+") "+gw(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=X(t),pw(e)}(r,t),GE(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=X(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+gw(r)+" in addition to actual children.")}},QE=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!HE(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),KE(e)}(n))throw new Error(Q(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class XE{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function YE(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||hw(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function JE(e,t,n){YE(e,n),ZE(e,(e=>dw(e,t)||dw(t,e)))}function ZE(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?($E(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function $E(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();s_&&l_("event: "+n.toString()),T_(r)}}}const ek="repo_interrupt",tk=25;class nk{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new XE,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=sb(),this.transactionQueueTree_=new DE,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function rk(e,t,n){if(e.stats_=z_(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new rb(e.repoInfo_,((t,n,r,i)=>{ok(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>ak(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{O(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new yw(e.repoInfo_,t,((t,n,r,i)=>{ok(e,t,n,r,i)}),(t=>{ak(e,t)}),(t=>{!function(e,t){b_(t,((t,n)=>{lk(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return F_[n]||(F_[n]=t()),F_[n]}(e.repoInfo_,(()=>new cb(e.stats_,e.server_))),e.infoData_=new ib,e.infoSyncTree_=new dE({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=gE(e.infoSyncTree_,t._path,o),setTimeout((()=>{i("ok")}),0)),s},stopListening:()=>{}}),lk(e,"connected",!1),e.serverSyncTree_=new dE({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const s=i(n,r);JE(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function ik(e){const t=e.infoData_.getNode(new ew(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function sk(e){return CE({timestamp:ik(e)})}function ok(e,t,n,r,i){e.dataUpdateCount++;const s=new ew(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const t=F(n,(e=>Gw(e)));o=function(e,t,n,r){const i=bE(e,r);if(i){const r=EE(i),s=r.path,o=r.queryId,a=uw(s,t),l=kb.fromObject(n);return kE(e,s,new pb(hb(o),a,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=Gw(n);o=mE(e.serverSyncTree_,s,t,i)}else if(r){const t=F(n,(e=>Gw(e)));o=function(e,t,n){const r=kb.fromObject(n);return yE(e,new pb({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=Gw(n);o=gE(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=pk(e,s)),JE(e.eventQueue_,a,o)}function ak(e,t){lk(e,"connected",t),!1===t&&function(e){hk(e,"onDisconnectEvents");const t=sk(e),n=sb();ab(e.onDisconnect_,tw(),((r,i)=>{const s=NE(r,i,e.serverSyncTree_,t);ob(n,r,s)}));let r=[];ab(n,tw(),((t,n)=>{r=r.concat(gE(e.serverSyncTree_,t,n));const i=_k(e,t);pk(e,i)})),e.onDisconnect_=sb(),JE(e.eventQueue_,tw(),r)}(e)}function lk(e,t,n){const r=new ew("/.info/"+t),i=Gw(n);e.infoData_.updateSnapshot(r,i);const s=gE(e.infoSyncTree_,r,i);JE(e.eventQueue_,r,s)}function ck(e){return e.nextWriteId_++}function uk(e){e.persistentConnection_&&e.persistentConnection_.interrupt(ek)}function hk(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];l_(t,...r)}function dk(e,t,n){return vE(e.serverSyncTree_,t,n)||Ww.EMPTY_NODE}function fk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||yk(e,t),LE(t)){const n=mk(e,t);o(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=dk(e,t,r);let s=i;const a=i.hash();for(let u=0;u<n.length;u++){const e=n[u];o(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=uw(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const l=s.val(!0),c=t;e.server_.put(c.toString(),l,(r=>{hk(e,"transaction put response",{path:c.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(pE(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();yk(e,OE(e.transactionQueueTree_,t)),fk(e,e.transactionQueueTree_),JE(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)T_(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{d_("transaction at "+c.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}pk(e,t)}}),a)}(e,zE(t),n)}else jE(t)&&UE(t,(t=>{fk(e,t)}))}function pk(e,t){const n=gk(e,t),r=zE(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter((e=>0===e.status)),a=s.map((e=>e.currentWriteId));for(let c=0;c<t.length;c++){const s=t[c],u=uw(n,s.path);let h,d=!1;if(o(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)d=!0,h=s.abortReason,i=i.concat(pE(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=tk)d=!0,h="maxretry",i=i.concat(pE(e.serverSyncTree_,s.currentWriteId,!0));else{const n=dk(e,s.path,a);s.currentInputSnapshot=n;const r=t[c].update(n.val());if(void 0!==r){GE("transaction failed: Data returned ",r,s.path);let t=Gw(r);"object"===typeof r&&null!=r&&M(r,".priority")||(t=t.updatePriority(n.getPriority()));const o=s.currentWriteId,l=sk(e),c=PE(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=c,s.currentWriteId=ck(e),a.splice(a.indexOf(o),1),i=i.concat(fE(e.serverSyncTree_,s.path,c,s.currentWriteId,s.applyLocally)),i=i.concat(pE(e.serverSyncTree_,o,!0))}else d=!0,h="nodata",i=i.concat(pE(e.serverSyncTree_,s.currentWriteId,!0))}JE(e.eventQueue_,n,i),i=[],d&&(t[c].status=2,l=t[c].unwatcher,setTimeout(l,Math.floor(0)),t[c].onComplete&&("nodata"===h?r.push((()=>t[c].onComplete(null,!1,t[c].currentInputSnapshot))):r.push((()=>t[c].onComplete(new Error(h),!1,null)))))}var l;yk(e,e.transactionQueueTree_);for(let o=0;o<r.length;o++)T_(r[o]);fk(e,e.transactionQueueTree_)}(e,mk(e,n),r),r}function gk(e,t){let n,r=e.transactionQueueTree_;for(n=nw(t);null!==n&&void 0===LE(r);)r=OE(r,n),n=nw(t=iw(t));return r}function mk(e,t){const n=[];return vk(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function vk(e,t,n){const r=LE(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);UE(t,(t=>{vk(e,t,n)}))}function yk(e,t){const n=LE(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,ME(t,n.length>0?n:void 0)}UE(t,(t=>{yk(e,t)}))}function _k(e,t){const n=zE(gk(e,t)),r=OE(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{wk(e,t)})),wk(e,r),FE(r,(t=>{wk(e,t)})),n}function wk(e,t){const n=LE(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(o(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(o(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(pE(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?ME(t,void 0):n.length=s+1,JE(e.eventQueue_,zE(t),i);for(let e=0;e<r.length;e++)T_(r[e])}}const bk=function(e,t){const n=Ek(e),r=n.namespace;"firebase.com"===n.domain&&h_(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||h_("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&d_("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new L_(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new ew(n.pathString)}},Ek=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(i=function(e){let t="";const n=e.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let e=n[i];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(r){}t+="/"+e}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):d_("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},kk="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){let e=0;const t=[]}();class Sk{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return cw(this._path)?null:sw(this._path)}get ref(){return new Tk(this._repo,this._path)}get _queryIdentifier(){const e=nb(this._queryParams),t=__(e);return"{}"===t?"default":t}get _queryObject(){return nb(this._queryParams)}isEqual(e){if(!((e=Y(e))instanceof Sk))return!1;const t=this._repo===e._repo,n=hw(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class Tk extends Sk{constructor(e,t){super(e,t,new eb,!1)}get parent(){const e=aw(this._path);return null===e?null:new Tk(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}!function(e){o(!lE,"__referenceConstructor has already been defined"),lE=e}(Tk),function(e){o(!cE,"__referenceConstructor has already been defined"),cE=e}(Tk);const Ck="FIREBASE_DATABASE_EMULATOR_HOST",Ak={};let xk=!1;function Ik(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||h_("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),l_("Using default host for project ",e.options.projectId),s="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let o,a,l=bk(s,i),c=l.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"/sec-mobile-commerce",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}[Ck]),a?(o=!0,s="http://".concat(a,"?ns=").concat(c.namespace),l=bk(s,i),c=l.repoInfo):o=!l.repoInfo.secure;const u=i&&o?new I_(I_.OWNER):new x_(e.name,e.options,t);QE("Invalid Firebase Database URL",l),cw(l.path)||h_("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,r){let i=Ak[t.name];i||(i={},Ak[t.name]=i);let s=i[e.toURLString()];s&&h_("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new nk(e,xk,n,r),i[e.toURLString()]=s,s}(c,e,u,new A_(e.name,n));return new Nk(h,e)}class Nk{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(rk(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Tk(this._repo,tw())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=Ak[t];n&&n[e.key]===e||h_("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),uk(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&h_("Cannot call "+e+" on a deleted database.")}}yw.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},yw.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){Xy(Ue),Oe(new J("database",((e,t)=>{let{instanceIdentifier:n}=t;return Ik(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Ve(Ky,Gy,e),Ve(Ky,Gy,"esm2017")}();const Pk=new Tg,Rk=Rd(ky,"/userProfileData"),Dk=async e=>{try{let t={name:e.name,email:e.email,photo:e.photo};await Uf(Rk,t),console.log("user data updated")}catch(u_){console.log("data couldn't updata")}},Ok=async e=>{let{Image:t,acVisited:n,setAcVisited:r,visited:i,setVisited:s,userName:o,userMail:a,userPassword:l,setLogin:c,setValue:u}=e;try{if(n)return;r(!0);let e="https://shorturl.at/anuCW";t&&(e=await(async(e,t,n)=>{try{if(e)return;t(!0);const r=_y(Sy,"userProfileProto/".concat(n.name+Hy()));await vy(r,n);const i=await yy(r);return console.log("photo link created : "+i),i}catch(r){console.log(r),console.log("error when upload photo")}})(i,s,t));const h=await async function(e,t,n){const r=ng(e),i=lg(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xg),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&jg(e),t})),o=await Ig._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(Ey,a,l);h.user;let d={name:o||"User",email:a,photo:e};return await Dk(d),console.log("createAccount called"),c(!0),u("Home"),a}catch(h){alert(h.message)}},Lk=async e=>{let{setValue:t,setLogin:n}=e;try{await Ug(Ey);const e=await async function(e,t,n){const r=ng(e);ep(e,t,Eg);const i=cm(r,n);return new mm(r,"signInViaPopup",t,i).executeNotNull()}(Ey,Pk),r=e.user;console.log(r.email);if(await Mk(r.email))return t("Home"),n(!0),console.log("alrady have account"),console.log(r.email),r.email;const i={name:r.displayName,email:r.email,photo:r.photoURL?r.photoURL:null};return await Dk(i),console.log("google data done"),r.email}catch(u_){console.log("google failed because of : "),console.log(u_.message);const r=(await Sm(Ey,Pk)).user;console.log(r.email);if(await Mk(r.email))return t("Home"),n(!0),console.log("alrady have account"),console.log(r.email),r.email;const i={name:r.displayName,email:r.email,photo:r.photoURL?r.photoURL:null};return await Dk(i),console.log("google data done"),r.email}},Mk=async e=>{const t=function(e){let t=Y(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(const s of r)t=s._apply(t);return t}(Rd(ky,"userProfileData"),kf("email","==",e)),n=(await Mf(t)).docs;return!(0,jy.isEmpty)(n)},jk=async(e,t)=>{try{const n=_y(Sy,"".concat(t,"/").concat(e.name+Hy()));console.log("uploading..."),await vy(n,e),console.log("uploaded");const r=await yy(n);return console.log("Image uploaded for "+t),r}catch(n){console.log("image not uploaded for"+t)}},Uk=async(e,t,n)=>{const r=Dd(ky,"userProfileData",e);try{await function(e,t,n){e=Cd(e,Nd);const r=Cd(e.firestore,Md),i=If(e.converter,t,n);return zf(r,[Yd(Xd(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Rl.none())])}(r,{[t]:[n]},{merge:!0}),console.log("".concat(t," added successfully"))}catch(u_){console.error("Error adding photo or cover:",u_.message)}},Fk=t=>{let{isOpen:n,onClose:r,notun_data:i}=t;const[s,o]=(0,e.useState)(""),[a,l]=(0,e.useState)(null),c=Rd(ky,"/postContainer");let u=null;return console.log(i),(0,xy.jsxs)("div",{className:"fixed inset-0 z-50 ".concat(n?"block":"hidden","  login-form"),children:[(0,xy.jsx)("div",{className:"absolute inset-0 bg-gray-400 opacity-75",onClick:r}),(0,xy.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,xy.jsxs)("div",{className:"bg-gray-600 text-gray-200 p-4 rounded-md",children:[(0,xy.jsxs)("div",{className:"",children:[(0,xy.jsx)("button",{className:"absolute bg-gray-400 hover:bg-gray-300 rounded-full",onClick:r,children:(0,xy.jsx)("img",{src:Ly,alt:"",className:"h-6 w-6 p-1 rounded-full"})}),(0,xy.jsx)("p",{className:"text-center text-2xl font-semibold",children:"Create post"})]}),(0,xy.jsx)("div",{className:"my-2",children:(0,xy.jsx)("hr",{className:"w-full"})}),(0,xy.jsx)("div",{className:"Profile my-1  p-2 hover:bg-gray-700 rounded-lg",children:(0,xy.jsxs)("div",{className:"flex",children:[(0,xy.jsx)("img",{src:i&&i.photo?i.photo:Ry,alt:"",className:"w-8 h-8 rounded-full"}),(0,xy.jsx)("div",{className:"p-1",children:i&&i.name?i.name:"Hive"})]})}),(0,xy.jsx)("div",{className:"",children:(0,xy.jsx)("textarea",{value:s,className:"bg-gray-500 p-2 focus:outline-none rounded-md resize-none overflow-auto",name:"",id:"",cols:"40",rows:"10",placeholder:"What's on your mind ?",onChange:e=>o(e.target.value)})}),(0,xy.jsx)("div",{className:"",children:(0,xy.jsx)("hr",{className:""})}),(0,xy.jsxs)("div",{children:[(0,xy.jsx)("input",{type:"file",id:"fileInput",className:"hidden",onChange:e=>l(e.target.files[0])}),(0,xy.jsx)("label",{htmlFor:"fileInput",className:"".concat(a?" bg-cyan-400 hover:bg-cyan-500":" bg-gray-500 hover:bg-gray-400"," p-1 my-1 flex justify-center content-center hover  rounded-md"),children:a?"Photo selected":"Upload photo"})]}),(0,xy.jsx)("div",{className:"flex justify-center bg-cyan-400 hover:bg-cyan-500 content-center rounded-md",onClick:async()=>{if(a)try{u=await jk(a,"post"),l(null),console.log("uploaded image "+u),console.log("upload success! ")}catch(u_){console.error("image not uploaded ",u_)}try{a||s.length>1?(await Uf(c,{uploadTime:Bf(),uid:i.id,postText:s,post_image:u,user_name:i.name,user_mail:i.email,user_image:i.photo,like_count:0,liked_by:[]}),console.log("data uploaded successfuly!!!"),u=null):alert("Not enough data!")}catch(u_){console.error("not upload post data , because of ",u_)}r()},children:(0,xy.jsx)("button",{className:" text-white px-4 py-2",onClick:e=>e.preventDefault(),children:"Post"})})]})})]})};function zk(t){let{userDatabase:n,userId:r,notun_data:i}=t;const[s,o]=(0,e.useState)(!1);return(0,xy.jsx)("div",{className:"  login-form",children:(0,xy.jsxs)("div",{className:"flex flex-row text-white h-screen fixed w-full bg-gray-700 pb-6",children:[(0,xy.jsxs)("section",{className:"w-full lg:w-9/12 container overflow-auto",children:[(0,xy.jsxs)("div",{className:"bg-gray-800 p-4 mx-5 rounded-lg mt-6",children:[(0,xy.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,xy.jsx)("img",{src:i&&i.photo?i.photo:Ry,alt:"User Avatar",className:"w-8 h-8 rounded-full"}),(0,xy.jsx)("input",{type:"text",placeholder:"What's on your mind?",className:"w-full border-none hover:bg-slate-200 focus:outline-none rounded-lg h-8 px-2",onClick:()=>o(!0)})]}),(0,xy.jsx)("hr",{className:"my-4 "}),(0,xy.jsx)("div",{className:"flex items-center space-x-4",children:(0,xy.jsxs)("button",{className:"flex items-center space-x-2",onClick:()=>o(!0),children:[(0,xy.jsx)("img",{src:Dy,title:"picture icons",alt:"Photos/Videos",className:"h-6 w-6 bg-gray-400 rounded-lg "}),(0,xy.jsx)("span",{className:" font-semibold text-white",children:"Photos/Videos"})]})})]}),(0,xy.jsx)(Fk,{isOpen:s,onClose:()=>o(!1),notun_data:i}),(0,xy.jsx)("div",{className:"mx-auto mb-6 ",children:(0,xy.jsx)(Ny,{notun_data:i,unknown:"Home"})})]}),(0,xy.jsxs)("section",{className:"hidden lg:block text-white font-thin w-3/12 my-5 px-6 overflow-y-scroll sticky right-0 ",children:[(0,xy.jsx)("div",{className:"text-xl font-semibold py-2",children:"Contacts  "}),(0,xy.jsx)(Py,{userDatabase:n,userId:r})]})]})})}const Vk=n.p+"static/media/contact-active.56862d114de0713182d705c4c81a614b.svg";const Bk=n.p+"static/media/home-svgrepo-com.3b52d2f8ca4ccb7b18d20668ef7e0b7b.svg";const qk=n.p+"static/media/text-active.26e0575f42af4b66d5866882c2602057.svg";const Wk=n.p+"static/media/logout.c9fe52df4b14f142226a1b1578f39dd0.svg",Hk=n.p+"static/media/logoHive.8d505ae417ae3634e237.png";const Kk=n.p+"static/media/games.66166c5f76f34c84649e867942a576d3.svg";function Gk(t){let{userDatabase:n,mail:r,setLogin:i,setValue:s,value:o}=t;const[a,l]=(0,e.useState)(!0),c=n[0]?n.filter((e=>e.email===r)):[null];return(0,xy.jsx)("div",{className:"bg-gray-800 text-white py-2 px-5 sticky  top-0 z-50  login-form",children:(0,xy.jsx)("nav",{className:"",children:(0,xy.jsxs)("div",{className:"mx-auto flex justify-between items-center",children:[(0,xy.jsxs)("div",{className:"space-x-2 flex",children:[(0,xy.jsx)("img",{onClick:()=>s("Home"),src:Hk,alt:"",className:"h-11  w-11 p-1 md:ml-6 rounded-full border-2 border-cyan-500 shadow-[0px_1px_15px_rgba(0,_196,_270,_1)]"}),(0,xy.jsx)("div",{className:"hidden md:flex h-auto w-auto text-lg font-semibold text-cyan-300 shadow-[0px_1px_15px_rgba(0,_196,_270,_.7)]  bg-gray-800 rounded-lg p-2",children:c[0]&&c[0].name?c[0].name:"Hive"})]}),(0,xy.jsxs)("div",{className:"space-x-2 md:space-x-4 flex flex-row",children:[(0,xy.jsx)("button",{className:"hidden sm:flex  Home  ".concat("Home"===o?"bg-cyan-400  rounded-full shadow-[0px_1px_15px_rgba(0,_196,_270,_1)] p-1":"cursor-pointer button bg-gray-400 hover:bg-gray-300 shadow-[0px_1px_15px_rgba(0,_196,_270,_1)] p-1 rounded-full "," "),title:"Home",children:(0,xy.jsx)("img",{src:Bk,alt:"Home",className:"h-9 w-9 p-1",onClick:()=>s("Home")})}),(0,xy.jsx)("button",{className:"Games  ".concat("Games"===o?"bg-cyan-400  rounded-full shadow-[0px_1px_15px_rgba(0,_196,_270,_1)] p-1":"cursor-pointer button bg-gray-400 hover:bg-gray-300 shadow-[0px_1px_15px_rgba(0,_196,_270,_1)] p-1 rounded-full "," "),title:"Games",children:(0,xy.jsx)("img",{src:Kk,alt:"Games",className:"h-9 w-9 p-1",onClick:()=>s("Games")})}),(0,xy.jsx)("button",{className:"Contacts  ".concat("Friends"===o?"bg-cyan-400  rounded-full shadow-[0px_1px_15px_rgba(0,_196,_270,_1)] p-1":"cursor-pointer button bg-gray-400 hover:bg-gray-300 shadow-[0px_1px_15px_rgba(0,_196,_270,_1)] p-1 rounded-full "," "),title:"User list",onClick:()=>s("Friends"),children:(0,xy.jsx)("img",{src:Vk,alt:"contacts",className:"h-9 w-9 p-1"})}),(0,xy.jsx)("button",{className:"Chat  ".concat("Chat"===o?"bg-cyan-400  rounded-full shadow-[0px_1px_15px_rgba(0,_196,_270,_1)] p-1":"cursor-pointer button bg-gray-400 hover:bg-gray-300 shadow-[0px_1px_15px_rgba(0,_196,_270,_1)] p-1 rounded-full "," "),title:"Chat list",onClick:()=>s("Chat"),children:(0,xy.jsx)("img",{src:qk,alt:"",className:"h-9 w-9 p-1"})}),(0,xy.jsx)("button",{className:"Profile  ".concat("UserProfile"===o?"bg-cyan-400 p-1  rounded-full shadow-[0px_1px_15px_rgba(0,_196,_270,_1)] ":" bg-gray-400 hover:bg-gray-300 shadow-[0px_1px_15px_rgba(0,_196,_270,_1)] p-1 rounded-full "," "),title:"Profile",onClick:()=>s("UserProfile"),children:(0,xy.jsx)("img",{src:c[0]&&c[0].photo?c[0].photo:Ry,alt:"Profile",className:"h-9 w-9 rounded-full"})}),(0,xy.jsx)("button",{className:"Logout  ".concat("SignUp"===o?"bg-cyan-400  rounded-full shadow-[0px_1px_15px_rgba(0,_196,_270,_1)] p-1":"mx-auto flex justify-between items-center bg-gray-400 hover:bg-gray-300 shadow-[0px_1px_15px_rgba(0,_196,_270,_1)] p-1 rounded-full "," "),title:"LogOut",onClick:async()=>{try{const e=await Ug(Ey);console.log(e),i((()=>e)),s((()=>"SignUp"))}catch(u_){console.log(u_)}},children:(0,xy.jsx)("img",{src:Wk,alt:"Logout",className:"h-9 w-9 "})})]})]})})})}const Qk=n.p+"static/media/img1.f080df638cdc388d593a.jpg";function Xk(t){let{setLogin:n,setValue:r}=t;const[i,s]=(0,e.useState)(""),[o,a]=(0,e.useState)(""),l=async()=>{try{await function(e,t,n){return Mg(Y(e),bg.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&jg(e),t}))}(Ey,i,o);console.log("Welcome to Hive"),n(!0),r("Home")}catch(e){alert(e.message)}};return(0,xy.jsx)("div",{className:"bg-cover bg-center h-full w-full fixed overflow-y-scroll login-form",style:{backgroundImage:"url(".concat(Qk,")")},children:(0,xy.jsxs)("div",{className:"lg:flex xl:flex",children:[(0,xy.jsxs)("section",{className:"section-1 pt-20 flex-col xl:pt-4 lg:pt-4 lg:top-60 lg:absolute lg:left-52 xl:left-60",children:[(0,xy.jsx)("div",{className:"text-teal-400 text-center text-3xl font-bold",children:"Welcome To Hive"}),(0,xy.jsx)("div",{className:"text-teal-700 text-center text-lg mb-8",children:"Let's explore!"})]}),(0,xy.jsx)("section",{className:"section-2 p-5 lg:w-96 xl:w-96 lg:absolute lg:right-36 lg:top-28 xl:right-60 ",children:(0,xy.jsxs)("div",{className:"bg-slate-700 bg-opacity-50 p-8 rounded-xl shadow-[0px_13px_20px_rgba(50,_20,_10,_1)]",children:[(0,xy.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-white",children:"Login"}),(0,xy.jsxs)("form",{children:[(0,xy.jsxs)("div",{className:"mb-4",children:[(0,xy.jsx)("label",{htmlFor:"email",className:"block text-white text-sm font-light mb-2",children:"Email"}),(0,xy.jsx)("input",{type:"email",id:"email",value:i,placeholder:"Email address",className:"border rounded-lg bg-gray-900 bg-opacity-50 text-teal-400 border-cyan-950 w-full px-3 py-2 placeholder:select-none focus:outline-none focus:border-[#222f3e]",onChange:e=>s(e.target.value)})]}),(0,xy.jsxs)("div",{className:"mb-4",children:[(0,xy.jsx)("label",{htmlFor:"password",className:"block text-white text-sm font-light mb-2",children:"Password"}),(0,xy.jsx)("input",{type:"password",id:"password",placeholder:"Password",value:o,className:"border rounded-lg bg-gray-900 bg-opacity-50 text-teal-400 border-cyan-950 w-full px-3 py-2 focus:outline-none focus:border-[#222f3e]",onChange:e=>a(e.target.value)})]}),(0,xy.jsx)("div",{className:"flex items-center justify-center",children:(0,xy.jsx)("button",{type:"button",className:"bg-[#222f3e] text-teal-400 py-2 px-4 rounded-lg hover:bg-[#151e27] focus:outline-none",onClick:()=>l(),children:"Login"})}),(0,xy.jsx)("div",{className:"text-gray-200 text-center text-xs p-2",children:"Don't have an account?"}),(0,xy.jsx)("div",{className:"flex items-center justify-center",children:(0,xy.jsx)("button",{type:"",className:"bg-[#222f3e] text-teal-400 py-2 px-4 rounded-lg hover:bg-[#151e27] focus:outline-none",onClick:()=>r("SignUp"),children:"Sign Up"})})]})]})}),(0,xy.jsx)("section",{className:"section-3"})]})})}const Yk=n.p+"static/media/google.b0667e68f31bdaca7f055dcf05a79dd8.svg";function Jk(t){let{setLogin:n,setValue:r}=t;const[i,s]=(0,e.useState)(""),[o,a]=(0,e.useState)(""),[l,c]=(0,e.useState)(""),[u,h]=(0,e.useState)(null),[d,f]=(0,e.useState)(!1),[p,g]=(0,e.useState)(!1);return(0,xy.jsx)("div",{className:"bg-cover bg-center h-full w-full fixed overflow-y-scroll login-form",style:{backgroundImage:"url(".concat(Qk,")")},children:(0,xy.jsxs)("div",{className:"lg:flex ",children:[(0,xy.jsxs)("section",{className:"section-1  flex-col pt-16 xl:pt-4 lg:pt-4 lg:mt-50 lg:absolute lg:left-20 lg:top-52 xl:left-60",children:[(0,xy.jsx)("div",{className:"text-teal-400 text-center text-3xl font-bold",children:"Welcome To M-Commerce"}),(0,xy.jsx)("div",{className:"text-teal-700 text-center text-lg mb-8",children:"Let's Connect!"}),(0,xy.jsx)("div",{className:"flex items-center justify-center",children:(0,xy.jsx)("button",{type:"",className:" bg-[#222f3e] text-teal-400 py-2 px-4 rounded-lg hover:bg-[#151e27] focus:outline-none",onClick:()=>Lk({setValue:r,setLogin:n}),children:(0,xy.jsxs)("div",{className:"flex",children:[(0,xy.jsx)("img",{src:Yk,alt:"",className:"mr-1 h-6 w-6"}),"Continue with google"]})})})]}),(0,xy.jsx)("section",{className:"section-2 p-4 w-96 mx-auto my-10  xl:w-96 lg:w-96 lg:absolute lg:right-48 xl:right-60",children:(0,xy.jsxs)("div",{className:"bg-slate-800 bg-opacity-50 p-8 rounded-xl shadow-[0px_13px_20px_rgba(50,_20,_10,_1)]",children:[(0,xy.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-white",children:"Sign Up"}),(0,xy.jsxs)("form",{children:[(0,xy.jsxs)("div",{className:"mb-4",children:[(0,xy.jsx)("label",{htmlFor:"Full Name",className:"block text-white text-sm font-light mb-2",children:"Full Name"}),(0,xy.jsx)("input",{type:"userName",id:"userName",value:l,placeholder:"Full name",className:"border rounded-lg bg-gray-900 bg-opacity-50 text-teal-400 border-cyan-950 w-full px-3 py-2 placeholder:select-none focus:outline-none focus:border-[#222f3e]",onChange:e=>c(e.target.value)})]}),(0,xy.jsxs)("div",{className:"mb-4",children:[(0,xy.jsx)("label",{htmlFor:"email",className:"block text-white text-sm font-light mb-2",children:"Email"}),(0,xy.jsx)("input",{type:"email",id:"email",value:i,placeholder:"Email address",className:"border rounded-lg bg-gray-900 bg-opacity-50 text-teal-400 border-cyan-950 w-full px-3 py-2 placeholder:select-none focus:outline-none focus:border-[#222f3e]",onChange:e=>s(e.target.value)})]}),(0,xy.jsxs)("div",{className:"mb-4",children:[(0,xy.jsx)("label",{htmlFor:"password",className:"block text-white text-sm font-light mb-2",children:"Password"}),(0,xy.jsx)("input",{type:"password",id:"password",placeholder:"Password",value:o,className:"border rounded-lg bg-gray-900 bg-opacity-50 text-teal-400 border-cyan-950 w-full px-3 py-2 focus:outline-none focus:border-[#222f3e]",onChange:e=>a(e.target.value)})]}),(0,xy.jsxs)("div",{className:"mt-1 flex p-1 justify-center items-center space-x-4",children:[(0,xy.jsx)("input",{type:"file",id:"fileInput",className:"hidden",onChange:e=>h(e.target.files[0])}),(0,xy.jsx)("label",{htmlFor:"fileInput",className:"bg-[#222f3e] text-teal-400 py-2 px-4 rounded-lg hover:bg-[#151e27] mb-2",children:u?"Photo Selected :)":"Upload Profile photo"})]}),(0,xy.jsx)("div",{className:"flex items-center justify-center",children:(0,xy.jsx)("button",{type:"button",className:"bg-[#222f3e] text-teal-400 py-2 px-4 rounded-lg hover:bg-[#151e27] focus:outline-none",onClick:e=>{Ok({Image:u,acVisited:p,setAcVisited:g,visited:d,setVisited:f,userName:l,userMail:i,userPassword:o,setLogin:n,setValue:r}),e.preventDefault()},children:"Sign Up"})}),(0,xy.jsx)("div",{className:"text-gray-200 text-center text-xs p-2",children:"Already have an account?"}),(0,xy.jsx)("div",{className:"flex items-center justify-center",children:(0,xy.jsx)("button",{type:"button",className:"bg-[#222f3e] text-teal-400 py-2 px-4 rounded-lg hover:bg-[#151e27] focus:outline-none",onClick:()=>{r("Login")},children:"Login"})})]})]})}),(0,xy.jsx)("section",{className:"section-3"})]})})}function Zk(t){let{userDatabase:n,userId:r}=t;const[i,s]=(0,e.useState)("friend"),[o,a]=(0,e.useState)(""),l=n[0]?n.find((e=>e.id===r)):null,c=l&&l.friendRequest?n.filter((e=>!0===l.friendRequest[e.id])):[],u=n[0]?n.filter((e=>e.id!==r&&!(l.friendRequest&&!0===l.friendRequest[e.id])&&!(l.friends&&!0===l.friends[e.id])&&!(l.requested&&!0===l.requested[e.id]))):[null],h=l&&l.requested?n.filter((e=>!0===l.requested[e.id])):[];console.log("userData: ",u);const d=Dd(ky,"/userProfileData",r);return console.log("request: "+c),(0,xy.jsxs)("div",{className:" text-white h-full p-5 bg-gray-700  login-form",children:[(0,xy.jsxs)("div",{className:"Title flex space-x-2",children:[(0,xy.jsx)("div",{className:"".concat("friend"==i?"text-cyan-500":"hover:bg-gray-600"," rounded-full  bg-gray-800 p-2"),onClick:()=>s("friend"),children:"Find friends"}),(0,xy.jsx)("div",{className:"".concat("request"==i?"text-cyan-500":"hover:bg-gray-600"," rounded-full  bg-gray-800 p-2"),onClick:()=>s("request"),children:"Requests"}),(0,xy.jsx)("div",{className:"".concat("requested"==i?"text-cyan-500":"hover:bg-gray-600"," rounded-full  bg-gray-800 p-2"),onClick:()=>s("requested"),children:"Requested"})]}),(0,xy.jsx)("section",{className:"Section-1 ".concat("friend"!==i?"hidden":""," "),children:(0,xy.jsx)("div",{className:"Find-friend box-border md:flex md:flex-wrap md:justify-between",children:u.map(((e,t)=>(0,xy.jsxs)("div",{className:"p-5 text-white rounded-xl bg-gray-800 my-2 w-full md:w-5/12 lg:w-80 ",children:[(0,xy.jsxs)("div",{className:"flex",children:[(0,xy.jsx)("img",{src:e.photo,alt:e.name,className:"rounded-full h-16 w-16"}),(0,xy.jsxs)("div",{className:"ml-2",children:[(0,xy.jsx)("h1",{className:"avatar text-lg font-bold",children:e.name}),(0,xy.jsxs)("div",{className:"mb-2",children:["Connects: ","None"]})]})]}),(0,xy.jsxs)("div",{className:"flex md:justify-end py-2 space-x-2",children:[(0,xy.jsx)("button",{className:"bg-cyan-700 rounded-lg p-2 hover:bg-cyan-600",onClick:t=>{t.preventDefault(),((e,t)=>{const n=Dd(ky,"/userProfileData",t);a("added"),jf(n,{["friendRequest.".concat(e)]:!0}),jf(d,{["requested.".concat(t)]:!0})})(r,e.id)},children:(0,xy.jsx)("div",{className:"",children:e.friendRequest&&e.friendRequest[r]?"Requested":"Add+"})}),(0,xy.jsx)("button",{className:"bg-cyan-700 rounded-lg p-2 hover:bg-cyan-600",onClick:e=>{e.preventDefault()},children:(0,xy.jsx)("div",{className:"",children:"Profile"})}),(0,xy.jsx)("button",{className:"bg-cyan-700 rounded-lg p-2 hover:bg-cyan-600",onClick:e=>{e.preventDefault()},children:(0,xy.jsx)("div",{className:"",children:"Message"})})]})]})))})}),(0,xy.jsx)("section",{className:"Section-2 ".concat("request"!==i?"hidden":""," "),children:(0,xy.jsx)("div",{className:"Find-friend box-border md:flex md:flex-wrap md:justify-between",children:c&&c.map(((e,t)=>(0,xy.jsxs)("div",{className:"p-5 text-white rounded-xl bg-gray-800 my-2 w-full md:w-5/12 lg:w-80 ",children:[(0,xy.jsxs)("div",{className:"flex",children:[(0,xy.jsx)("img",{src:e.photo,alt:e.name,className:"rounded-full h-16 w-16"}),(0,xy.jsxs)("div",{className:"ml-2",children:[(0,xy.jsx)("h1",{className:"avatar text-lg font-bold",children:e.name}),(0,xy.jsxs)("div",{className:"mb-2",children:["Connects: ","None"]})]})]}),(0,xy.jsxs)("div",{className:"flex md:justify-end py-2 space-x-2",children:[(0,xy.jsx)("button",{className:"bg-cyan-700 rounded-lg p-2 hover:bg-cyan-600",onClick:t=>{var n;t.preventDefault(),n=e.id,jf(d,{["friends.".concat(n)]:!0,["friendRequest.".concat(n)]:!1}),jf(Dd(ky,"/userProfileData",n),{["requested.".concat(r)]:!1,["friends.".concat(r)]:!0})},children:(0,xy.jsx)("div",{className:"",children:"Accept"})}),(0,xy.jsx)("button",{className:"bg-cyan-700 rounded-lg p-2 hover:bg-cyan-600",onClick:e=>{e.preventDefault()},children:(0,xy.jsx)("div",{className:"",children:"Profile"})}),(0,xy.jsx)("button",{className:"bg-cyan-700 rounded-lg p-2 hover:bg-cyan-600",onClick:e=>{e.preventDefault()},children:(0,xy.jsx)("div",{className:"",children:"Message"})})]})]})))})}),(0,xy.jsx)("section",{className:"Section-3 ".concat("requested"!==i?"hidden":""," "),children:(0,xy.jsx)("div",{className:"Find-friend box-border md:flex md:flex-wrap md:justify-between",children:h&&h.map(((e,t)=>(0,xy.jsxs)("div",{className:"p-5 text-white rounded-xl bg-gray-800 my-2 w-full md:w-5/12 lg:w-80 ",children:[(0,xy.jsxs)("div",{className:"flex",children:[(0,xy.jsx)("img",{src:e.photo,alt:e.name,className:"rounded-full h-16 w-16"}),(0,xy.jsxs)("div",{className:"ml-2",children:[(0,xy.jsx)("h1",{className:"avatar text-lg font-bold",children:e.name}),(0,xy.jsxs)("div",{className:"mb-2",children:["Connects: ","None"]})]})]}),(0,xy.jsxs)("div",{className:"flex md:justify-end py-2 space-x-2",children:[(0,xy.jsx)("button",{className:"bg-cyan-700 rounded-lg p-2 hover:bg-cyan-600",onClick:t=>{var n;t.preventDefault(),n=e.id,jf(d,{["requested.".concat(n)]:!1}),jf(Dd(ky,"/userProfileData",n),{["friendRequest.".concat(r)]:!1})},children:(0,xy.jsx)("div",{className:"",children:"Cancel Request"})}),(0,xy.jsx)("button",{className:"bg-cyan-700 rounded-lg p-2 hover:bg-cyan-600",onClick:e=>{e.preventDefault()},children:(0,xy.jsx)("div",{className:"",children:"Profile"})}),(0,xy.jsx)("button",{className:"bg-cyan-700 rounded-lg p-2 hover:bg-cyan-600",onClick:e=>{e.preventDefault()},children:(0,xy.jsx)("div",{className:"",children:"Message"})})]})]})))})})]})}n.p;const $k=n.p+"static/media/profile.b50f08b3d3dbd517886edd86bdfe2fbd.svg";const eS=n.p+"static/media/notification.9740fe5003ea59e2e39b5e4a3ee598ec.svg";const tS=n.p+"static/media/search.1bb910fc69099ca5244165ef3a2dcca8.svg",nS=()=>(0,xy.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,xy.jsx)("div",{className:"animate-spin rounded-full border-t-4 border-blue-500 border-solid h-16 w-16"})});function rS(t){let{userDatabase:n,userId:r}=t;const[i,s]=(0,e.useState)(null),o=n[0]?n.find((e=>e.id===r)):null,a=o&&o.friends?n.filter((e=>!0===o.friends[e.id])):[],[l,c]=(0,e.useState)(""),[u,h]=(0,e.useState)([]),[d,f]=(0,e.useState)(!0),[p,g]=(0,e.useState)(!1),m=null!==i?[r,a[i].id].sort():[],v=Rd(ky,"/chatList"),y=bf(v,kf("participants","==",m));return(0,e.useEffect)((()=>{if(a.length>0&&null!==i){const e=[r,a[i].id].sort(),t=Ff(bf(v,kf("participants","==",e)),(e=>{try{if(!e.empty){const t=e.docs[0].data();t&&h(t)}}catch(u_){console.log(u_)}finally{f(!1)}}));return()=>{t()}}}),[i]),(0,xy.jsx)(xy.Fragment,{children:(0,xy.jsxs)("div",{className:" login-form flex flex-row text-white h-screen fixed w-full bg-gray-700 ",children:[(0,xy.jsxs)("div",{className:"section-1 overflow-auto w-2/12 lg:w-3/12 border-r border-gray-800  login-form",children:[(0,xy.jsx)("div",{className:"sticky top-0 p-2 bg-gray-700",children:(0,xy.jsx)("h1",{className:"text-lg font-bold",children:"Chat"})}),(0,xy.jsx)("div",{className:"User_list p-1",children:a.length>0?a.map(((e,t)=>(0,xy.jsxs)("div",{className:"flex flex-col p-1 lg:flex-row items-center justify-center lg:items-start lg:justify-start hover:text-cyan-400 ".concat(i===t?"bg-gray-800 text-cyan-400 rounded-lg":"hover:bg-gray-600 hover:rounded-lg"),onClick:()=>{f((()=>!0)),s((()=>t))},children:[(0,xy.jsx)("section",{className:"h-12 w-12 lg:h-14 lg:w-14",children:(0,xy.jsx)("img",{src:e.photo,alt:e.name,className:"rounded-full h-full w-full p-1"})}),(0,xy.jsxs)("section",{className:"text-center md:text-left lg:text-left lg:p-2 ",children:[(0,xy.jsx)("div",{className:"hidden sm:flex text-xs font-bold font-sans",children:e.name}),(0,xy.jsx)("div",{className:"hidden lg:flex text-xs font-extralight text-gray-300",children:"Hi I'm using Hive."})]})]},e.id))):(0,xy.jsx)("div",{className:"text-cyan-500 text-2xl",children:"No Data!"})})]}),(0,xy.jsx)("div",{className:"section-2 login-form flex-1 overflow-y-auto w-6/12 ",children:null!==i?(0,xy.jsxs)(xy.Fragment,{children:[" ",(0,xy.jsx)("div",{className:"Navbar sticky top-0 bg-gray-700 border-b border-gray-800 w-full",children:(0,xy.jsxs)("div",{className:"Profile-section flex m-1 p-2 hover:text-cyan-500 hover:bg-gray-600 hover:rounded-lg w-1/3",children:[(0,xy.jsx)("img",{src:a[i].photo,alt:a[i].name,className:"h-10 w-10 rounded-full"}),(0,xy.jsx)("div",{className:"py-2 px-1 mx-1 font-sans font-bold",children:a[i].name})]})}),(0,xy.jsx)("div",{className:"profile flex justify-center content-center m-4 p-4",children:(0,xy.jsxs)("div",{className:"photo",children:[(0,xy.jsx)("img",{src:a[i].photo,alt:a[i].name,className:"rounded-full h-36 w-36"}),(0,xy.jsx)("div",{className:"font-bold text-center text-sm p-1",children:a[i].name})]})}),(0,xy.jsxs)("div",{className:"overflow-y-scroll flex-1 pb-36",children:[d&&(0,xy.jsx)(nS,{}),u&&u.messages&&(0,xy.jsx)("div",{className:"",children:u.messages.map(((e,t)=>(0,xy.jsx)("section",{className:"Messages ",children:e.senderId===r?(0,xy.jsxs)("div",{className:"flex justify-end space-x-1 m-1",children:[(0,xy.jsx)("div",{className:" bg-slate-600 rounded-lg p-1",children:e.message}),(0,xy.jsx)("img",{src:o.photo,alt:"",className:"flex justify-end items-end h-8 w-8 rounded-full"})]}):(0,xy.jsxs)("div",{className:"flex justify-start space-x-1 m-1",children:[(0,xy.jsx)("img",{src:a[i].photo,alt:"",className:"flex justify-start items-start h-8 w-8 rounded-full"}),(0,xy.jsx)("div",{className:"bg-slate-600 rounded-lg p-1",children:e.message})]})},t)))})]}),(0,xy.jsx)("div",{className:"flex justify-center content-center",children:(0,xy.jsx)("div",{className:"NavbarBottom fixed bottom-0 max-w-md md:w-full md:max-w-screen-sm p-2 ",children:(0,xy.jsxs)("form",{className:"flex w-full",children:[(0,xy.jsx)("input",{type:"message",value:l,row:"2",className:"rounded-full resize-none w-full h-10 p-4 text-black focus:outline-none",placeholder:"Type your message here",onChange:e=>c(e.target.value),disabled:p}),(0,xy.jsx)("button",{className:"".concat(p&&"cursor-not-allowed opacity-50"," rounded-full m-1 bg-cyan-500 p-2"),type:"submit",onClick:e=>{g(!0),e.preventDefault(),(async()=>{const e=await Mf(y);if(e.empty)await Uf(v,{participants:m,messages:[{senderId:r,message:l,time:new Date}],time:new Date});else{const t=e.docs[0],n=Dd(v,t.id);await jf(n,{participants:m,messages:qf({senderId:r,message:l,time:new Date}),time:new Date})}c(""),g(!1)})()},disabled:p,children:p?"sending":"send"})]})})})]}):(0,xy.jsx)(nS,{})}),(0,xy.jsx)("div",{className:"section-3 login-form hidden xl:block w-3/12 overflow-auto border-l border-gray-800 p-6",children:null!==i?(0,xy.jsxs)(xy.Fragment,{children:[(0,xy.jsxs)("div",{className:"flex flex-col justify-center content-center bg-gray-800 rounded-lg pt-6",children:[(0,xy.jsx)("div",{className:"flex justify-center content-center",children:(0,xy.jsx)("img",{src:a[i].photo,alt:a[i].name,className:" rounded-full p-1 h-20 w-20"})}),(0,xy.jsx)("div",{className:"flex justify-center content-center font-bold text-lg font-mono p-1",children:a[i].name}),(0,xy.jsxs)("div",{className:"flex justify-center content-center p-4",children:[(0,xy.jsxs)("div",{className:"flex-1",children:[(0,xy.jsx)("button",{className:"h-10 w-10 bg-gray-600 hover:bg-gray-500 rounded-full",onClick:e=>e.preventDefault(),children:(0,xy.jsx)("img",{src:$k,alt:"Profile",className:"p-1"})}),(0,xy.jsx)("div",{className:"py-1 font-bold font-sans text-gray-100 text-xs ml-1",children:"Profile"})]}),(0,xy.jsxs)("div",{className:"flex-1",children:[(0,xy.jsx)("button",{className:"h-10 w-10 bg-gray-600 hover:bg-gray-500 rounded-full",onClick:e=>e.preventDefault(),children:(0,xy.jsx)("img",{src:eS,alt:"Mute",className:"p-1"})}),(0,xy.jsx)("div",{className:"ml-1 py-1 font-bold font-sans text-gray-100 text-xs",children:"Mute"})]}),(0,xy.jsxs)("div",{className:"flex-1",children:[(0,xy.jsx)("button",{className:"h-10 w-10 bg-gray-600 hover:bg-gray-500 rounded-full",onClick:e=>e.preventDefault(),children:(0,xy.jsx)("img",{src:tS,alt:"Search",className:"p-1"})}),(0,xy.jsx)("div",{className:"py-1 font-bold font-sans text-gray-100 text-xs",children:"Search"})]})]})]})," ",(0,xy.jsx)("div",{className:"w-full h-10 my-2 hover:text-cyan-500 hover:bg-gray-600 p-2 rounded-lg bg-gray-800",children:"Media"}),(0,xy.jsx)("div",{className:"w-full h-10 my-2 hover:text-cyan-500 p-2 hover:bg-gray-600 rounded-lg bg-gray-800",children:"Report"}),(0,xy.jsx)("div",{className:"w-full h-10 my-2 hover:text-cyan-500 p-2 hover:bg-gray-600 rounded-lg bg-gray-800",children:"Block"})]}):(0,xy.jsx)(nS,{})})]})})}const iS=n.p+"static/media/fbcover.8c0f83c98f456dc528de.jpg";n.p,n.p;function sS(t){let{userDatabase:n,notun_data:r}=t;const[i,s]=(0,e.useState)(""),[o,a]=(0,e.useState)(null),[l,c]=(0,e.useState)(null),u=Rd(ky,"/postContainer"),h=async(e,t)=>{try{await Uf(u,{uploadTime:new Date,uid:r.id,postText:t,post_image:e,user_name:r.name,user_mail:r.email,user_image:r.photo,like_count:0,liked_by:[]}),console.log("data uploaded successfuly!!!")}catch(u_){console.error("not upload post data , because of ",u_)}};return console.log(r),(0,xy.jsx)(xy.Fragment,{children:(0,xy.jsxs)("div",{className:"h-full  z-0  login-form bg-gray-600",children:[(0,xy.jsxs)("div",{className:"showOff bg-gray-600 relative",children:[(0,xy.jsxs)("div",{className:"CoverPic relative overflow-hidden",children:[(0,xy.jsx)("img",{src:r&&r.coverPhoto?r.coverPhoto:iS,alt:"Cover Photo",className:"rounded-b-xl w-full"}),(0,xy.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:(0,xy.jsx)("img",{src:r&&r.photo?r.photo:sS,alt:"Profile",className:"rounded-full h-32 w-32 md:h-40 md:w-40 lg:h-48 lg:w-48 xl:h-56 xl:w-56 border-4 bg-gray-800 border-white"})})]}),(0,xy.jsxs)("div",{className:"pb-6 pt-10 ",children:[(0,xy.jsx)("div",{className:"text-white p-4",children:(0,xy.jsx)("h1",{className:"text-2xl md:text-3xl text-center lg:text-4xl xl:text-5xl font-bold",children:r&&r.name?r.name:"UserProfile"})}),(0,xy.jsxs)("div",{className:"flex justify-center content-center ",children:[(0,xy.jsxs)("div",{className:"upload-cover mt-4 md:mt-8 lg:mt-12 xl:mt-16 p-1 space-x-4",children:[(0,xy.jsx)("input",{type:"file",id:"coverFileInput",className:"hidden",onChange:e=>a(e.target.files[0])}),(0,xy.jsx)("label",{htmlFor:"coverFileInput",className:"".concat(o?"hidden":"bg-[#222f3e] text-teal-400 py-2 px-4 rounded-lg hover:bg-[#151e27] mb-2"),children:"Upload cover"}),(0,xy.jsx)("img",{src:Oy,alt:"",className:" ".concat(o?" h-8 w-8 bg-cyan-500 rounded-lg":"hidden"),onClick:async()=>{if(o){const e=await jk(o,"CoverPhoto");Uk(r.id,"coverPhoto",e),h(e,"Cover photo uploaded"),a(null)}}})]}),(0,xy.jsxs)("div",{className:"upload-profile mt-4 md:mt-8 lg:mt-12 xl:mt-16 p-1 space-x-4",children:[(0,xy.jsx)("input",{type:"file",id:"profileFileInput",className:"hidden",onChange:e=>c(e.target.files[0])}),(0,xy.jsx)("label",{htmlFor:"profileFileInput",className:"".concat(l?"hidden":"bg-[#222f3e] text-teal-400 py-2 px-4 rounded-lg hover:bg-[#151e27] mb-2"),children:"Upload profile"}),(0,xy.jsx)("img",{src:Oy,alt:"",className:" ".concat(l?" h-8 w-8 bg-cyan-500 rounded-lg":"hidden"),onClick:async()=>{if(l){const e=await jk(l,"photo");Uk(r.id,"photo",e),h(e,"Profile picture uploaded"),c(null)}}})]})]})]})]}),(0,xy.jsx)("hr",{className:"border-solid border-slate-700"}),(0,xy.jsxs)("div",{className:"TimeLineUpdate",children:[(0,xy.jsxs)("div",{className:"Title flex text-gray-300 space-x-2 m-4",children:[(0,xy.jsx)("div",{className:"".concat("friends"==i?"text-cyan-500":"hover:bg-gray-600"," rounded-lg  bg-gray-800 p-2"),onClick:()=>s("friends"),children:"Friends"}),(0,xy.jsx)("div",{className:"".concat("timeline"==i?"text-cyan-500":"hover:bg-gray-600"," rounded-lg  bg-gray-800 p-2"),onClick:()=>s("timeline"),children:"Timeline"})]}),(0,xy.jsx)("hr",{className:"border-solid border-slate-700 my-4"}),(0,xy.jsx)("div",{className:"".concat("friends"!==i?"hidden":""," w-auto p-2 m-auto flex text-cyan-600 justify-center content-center"),children:(0,xy.jsx)(Py,{userDatabase:n,userId:r.id})}),(0,xy.jsx)("div",{className:"".concat("timeline"!==i?"hidden":"","  flex text-cyan-600 justify-center content-center lg:w-1/3"),children:(0,xy.jsx)(Ny,{notun_data:r,unknown:"Profile"})})]})]})})}function oS(e){let{value:t,onSquarClick:n}=e;return(0,xy.jsx)("div",{className:"square",children:(0,xy.jsx)("button",{className:"border-2 bg-gray-900 rounded-xl m-1 p-8 text-white bg-fixed h-8 w-8",onClick:n,children:t})})}function aS(){const[t,n]=(0,e.useState)(Array(9).fill(null)),[r,i]=(0,e.useState)(!0),[s,o]=(0,e.useState)("First player: X"),[a,l]=(0,e.useState)(!1),[c,u]=(0,e.useState)(!1);function h(e){const s=t.slice();null!==t[e]||a||c||(r?(s[e]="X",o("Next Player is: O")):(s[e]="O",o("Next Player is: X")),i(!r),n(s))}return(0,e.useEffect)((()=>{let e=(e=>{const t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[0,4,8],[2,4,6],[1,4,7],[2,5,8]];for(let n=0;n<t.length;n++){const[r,i,s]=t[n];if(e[r]&&e[r]===e[i]&&e[r]===e[s])return l(!0),e[r]}return e.every((e=>null!==e))&&u(!0),null})(t);null!==e?(o("Winner is: "+e),console.log("Congratulations!")):c&&o("It's a draw!")}),[t,c]),(0,xy.jsx)("div",{className:"flex items-center justify-center h-screen  login-form",children:(0,xy.jsxs)("div",{className:"bg-gray-300 rounded-lg p-2",children:[(0,xy.jsx)("div",{className:"p-1 text-center text-3xl font-semibold",children:"Tik-Tak-Toe"}),(0,xy.jsxs)("div",{className:"flex p-3",children:[(0,xy.jsx)("div",{className:"p-1 ml-4 flex-1 font-semibold text-gray-800",children:s}),(0,xy.jsx)("button",{className:"mr-8 content-end rounded-lg bg-gray-400 hover:bg-gray-500 p-1",onClick:()=>{n(Array(9).fill(null)),l(!1),u(!1),i(!0),o("First Player is: X")},children:"Reset"})]}),(0,xy.jsxs)("div",{className:"flex flex-row mx-8",children:[(0,xy.jsxs)("div",{children:[(0,xy.jsx)(oS,{value:t[0],onSquarClick:()=>h(0)}),(0,xy.jsx)(oS,{value:t[1],onSquarClick:()=>h(1)}),(0,xy.jsx)(oS,{value:t[2],onSquarClick:()=>h(2)})]}),(0,xy.jsxs)("div",{children:[(0,xy.jsx)(oS,{value:t[3],onSquarClick:()=>h(3)}),(0,xy.jsx)(oS,{value:t[4],onSquarClick:()=>h(4)}),(0,xy.jsx)(oS,{value:t[5],onSquarClick:()=>h(5)})]}),(0,xy.jsxs)("div",{children:[(0,xy.jsx)(oS,{value:t[6],onSquarClick:()=>h(6)}),(0,xy.jsx)(oS,{value:t[7],onSquarClick:()=>h(7)}),(0,xy.jsx)(oS,{value:t[8],onSquarClick:()=>h(8)})]})]})]})})}const lS=()=>(0,xy.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,xy.jsx)("div",{className:"animate-spin rounded-full border-t-4 border-blue-500 border-solid h-16 w-16"})});const cS=function(){const[t,n]=(0,e.useState)(""),[r,i]=(0,e.useState)(!1),[s,o]=(0,e.useState)(""),[a,l]=(0,e.useState)({}),[c,u]=(0,e.useState)(!0),h=Rd(ky,"/userProfileData");(0,e.useEffect)((()=>{const e=Ff(h,(e=>{const t=e.docs.map((e=>({...e.data(),id:e.id})));l(t)}));return()=>e()}),[]),(0,e.useEffect)((()=>{(async()=>{const e=await Mf(h);console.log("valueeeeeee",e.docs),l((()=>e.docs.map((e=>({...e.data(),id:e.id})))))})();const e=function(e,t,n,r){return Y(e).onAuthStateChanged(t,n,r)}(Ey,(e=>{setTimeout((()=>{u(!1)}),2e3),e?(n((()=>e.email)),i(e),o("Home"),console.log("Logged in")):(i((()=>!1)),console.log("Logged out"))}));return()=>e()}),[]),(0,e.useEffect)((()=>{console.log(r)}),[r]);const d=a[0]?a.filter((e=>e.email===t)):[{id:null}];return(0,xy.jsx)(xy.Fragment,{children:c?(0,xy.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-800 text-white",children:(0,xy.jsx)(lS,{})}):(0,xy.jsx)("div",{className:"bg-gray-700 h-full w-full bg-fixed login-form",children:r?(0,xy.jsxs)(xy.Fragment,{children:[(0,xy.jsx)(Gk,{userDatabase:a,mail:t,setLogin:i,setValue:o,value:s}),"UserProfile"===s?(0,xy.jsx)(sS,{userDatabase:a,mail:t,notun_data:d[0]}):"Chat"===s?(0,xy.jsx)(rS,{userDatabase:a,userId:d[0]&&d[0].id?d[0].id:null}):"Games"===s?(0,xy.jsx)(aS,{setValue:o,setLogin:i}):"Friends"===s?(0,xy.jsx)(Zk,{userId:d[0]&&d[0].id?d[0].id:null,userDatabase:a}):(0,xy.jsx)(zk,{userDatabase:a,notun_data:d[0],userId:d[0]&&d[0].id?d[0].id:null})]}):"Login"===s?(0,xy.jsx)(Xk,{setValue:o,setLogin:i}):!r&&(0,xy.jsx)(Jk,{setLogin:i,setValue:o})})})},uS=e=>{e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:o}=t;n(e),r(e),i(e),s(e),o(e)}))};t.createRoot(document.getElementById("root")).render((0,xy.jsx)(e.StrictMode,{children:(0,xy.jsx)(cS,{})})),uS()})()})();
//# sourceMappingURL=main.6ec9684e.js.map